import{U as ot}from"../chunks/BNLYq5HQ.js";import{r as ke,R as N}from"../chunks/BeWG-__C.js";import{a as nt,r as lt}from"../chunks/Cx5lmlld.js";import{g as dt,$ as ut}from"../chunks/DdY9CyNE.js";import{p as vt,U as mt,V as ct,W as gt}from"../chunks/DeYUhNiz.js";import"../chunks/DsnmJJEf.js";import{t as v,c as m,s as a,g as e,u as t,n as h,r as c,p as _t,f as F,a as $t,b as ft,at as pt}from"../chunks/BOqQhZBJ.js";import{s as g}from"../chunks/BufZg4h2.js";import{f as S,t as y,a as i,s as ht,c as yt}from"../chunks/CnteGC4G.js";import{i as X}from"../chunks/QS5y7wlf.js";import{e as Pt}from"../chunks/D4fmOnVC.js";import{T as L,a as qe,X as xt,x as bt,aD as At,aE as Ut,aF as St,aI as wt,aJ as Ct,aK as Dt,aL as zt,aM as Bt,s as It,u as kt,aa as Rt,V as Tt,ac as qt}from"../chunks/LrV5ZTyj.js";import{p as Ot,s as Et,a as Re}from"../chunks/B227BkWK.js";import{i as Ft,g as Lt}from"../chunks/C4XZXykC.js";import{A as G}from"../chunks/Dtu3nHzq.js";import{A as Mt}from"../chunks/4in-FAdc.js";import{O as jt}from"../chunks/Di6OVBka.js";import{S as le}from"../chunks/Ca9QUCuW.js";import{U as Wt}from"../chunks/Bp2HQ4kn.js";import{D as Ht}from"../chunks/DvWDe2C-.js";import{g as Jt}from"../chunks/52C7z9ON.js";import{l as Vt,I as Te,o as Xt,J as Gt}from"../chunks/Jagi0WJL.js";import{C as Kt}from"../chunks/BCL4P6ef.js";import{C as Nt}from"../chunks/WscBzvwE.js";import{H,S as de}from"../chunks/Ze2c3aZz.js";import{C as Qt}from"../chunks/CgxV3crx.js";import{g as K}from"../chunks/D5MBkTLC.js";import{A as Yt}from"../chunks/BEiKRg21.js";import{B as Zt}from"../chunks/SuizJy8Y.js";const er=(async({params:M,url:z})=>{await nt(z,{admin:!0}),await lt(),ot.test(M.id)||ke(307,N.users());const[$]=await vt({id:M.id,withDeleted:!0}).catch(()=>[]);$||ke(307,N.users());const[r,j,E]=await Promise.all([mt({id:$.id}),ct({id:$.id}),gt({id:$.id})]),w=await dt();return{user:$,userPreferences:r,userStatistics:j,userSessions:E,meta:{title:w("admin.user_details")}}}),Wr=Object.freeze(Object.defineProperty({__proto__:null,load:er},Symbol.toStringTag,{value:"Module"}));var tr=S('<div class="flex justify-between items-center"><!> <!></div>');function R(M,z){var $=tr(),r=m($);L(r,{class:"text-sm",fontWeight:"medium",children:(E,w)=>{h();var n=y();v(()=>g(n,z.title)),i(E,n)},$$slots:{default:!0}});var j=a(r,2);{let E=t(()=>z.state?xt:bt),w=t(()=>z.state?"text-primary":"text-danger");qe(j,{get icon(){return e(E)},get class(){return e(w)},size:"24"})}c($),i(M,$)}var rr=S("<div><!></div>"),ar=S("<div><!> <!></div> <div><!> <!></div> <div><!> <!></div> <div><!> <!></div> <div><!> <!></div>",1),sr=S("<!> <!> <!> <!> <!> <!> <!> <!> <!>",1),ir=S("<!> ",1),or=S('<div class="storage-status p-4 mt-4 bg-gray-100 dark:bg-immich-dark-primary/10 rounded-lg text-sm w-full"><p class="font-medium text-immich-dark-gray dark:text-white mb-2"> </p> <div class="mt-4 h-1.75 w-full rounded-full bg-gray-200 dark:bg-gray-700"><div></div></div></div>'),nr=S("<!> <!>",1),lr=S('<span class="text-dark"> </span>'),dr=S('<!> <div class="grid gap-4 grid-cols-1 lg:grid-cols-2 w-full"><div class="col-span-full flex flex-col gap-4 my-4"><div class="flex items-center gap-4"><!> <!></div> <!></div> <div class="col-span-full"><div class="flex flex-col lg:flex-row gap-4 w-full"><!> <!> <!></div></div> <!> <!> <!> <!></div> <!>',1),ur=S("<div><!></div>"),vr=S("<!> <!> <!>",1);function Hr(M,z){_t(z,!0);const $=()=>Re(Vt,"$locale",j),r=()=>Re(ut,"$t",j),[j,E]=Et(),w=Ot(z,"data",7),n=t(()=>w().user),B=t(()=>w().userPreferences),ue=t(()=>w().userStatistics),Oe=t(()=>w().userSessions),Ee=1024**4,ve=t(()=>e(n).quotaUsageInBytes??0);let Fe=t(()=>Xt(e(ve),e(ve)>Ee?2:0)),me=t(()=>pt(e(Fe),2)),Le=t(()=>e(me)[0]),Me=t(()=>e(me)[1]);const Q=t(()=>e(n).quotaUsageInBytes??0),Y=t(()=>e(n).quotaSizeInBytes??1);let Z=t(()=>Math.min(Math.round(e(Q)/e(Y)*100),100)),ce=t(()=>Gt($()).code),je=t(()=>new Date(e(n).createdAt)),We=t(()=>new Date(e(n).updatedAt)),He=t(()=>Te(e(ce)).formatDateTime(e(je))),Je=t(()=>Te(e(ce)).formatDateTime(e(We)));const Ve=()=>e(Z)>=95?"bg-red-500":e(Z)>80?"bg-yellow-500":"bg-primary",J=t(()=>Jt(r(),e(n))),ge=t(()=>e(J).ResetPassword),_e=t(()=>e(J).ResetPinCode),$e=t(()=>e(J).Update),fe=t(()=>e(J).Delete),pe=t(()=>e(J).Restore),ee=async T=>{T.id===e(n).id&&(w().user=T,await Ft())},Xe=async({id:T})=>{T===e(n).id&&await Lt(N.users())};var he=vr(),ye=F(he);jt(ye,{onUserAdminUpdate:ee,onUserAdminDelete:ee,onUserAdminRestore:ee,onUserAdminDeleted:Xe});var Pe=a(ye,2);{let T=t(()=>r()("user")),te=t(()=>[e(ge),e(_e),e($e),e(fe),e(pe)]);Kt(Pe,{get name(){return e(T)},get actions(){return e(te)}})}var Ge=a(Pe,2);{let T=t(()=>[{title:r()("admin.user_management"),href:N.users()},{title:e(n).name}]),te=t(()=>[e(ge),e(_e),e($e),e(pe),qt.Divider,e(fe)]);Mt(Ge,{get breadcrumbs(){return e(T)},get actions(){return e(te)},children:(Ke,mr)=>{var re=ur(),Ne=m(re);Nt(Ne,{size:"large",center:!0,children:(Qe,cr)=>{var xe=dr(),be=F(xe);{var Ye=l=>{{let f=t(()=>r()("user_has_been_deleted"));Yt(l,{color:"danger",class:"my-4",get title(){return e(f)},get icon(){return Tt}})}};X(be,l=>{e(n).deletedAt&&l(Ye)})}var ae=a(be,2),se=m(ae),ie=m(se),Ae=m(ie);Wt(Ae,{get user(){return e(n)},size:"md"});var Ze=a(Ae,2);H(Ze,{tag:"h1",size:"large",children:(l,f)=>{h();var q=y();v(()=>g(q,e(n).name)),i(l,q)},$$slots:{default:!0}}),c(ie);var et=a(ie,2);{var tt=l=>{var f=rr(),q=m(f);Zt(q,{color:"primary",size:"small",children:(C,W)=>{h();var P=y();v(A=>g(P,A),[()=>r()("admin.admin_user")]),i(C,P)},$$slots:{default:!0}}),c(f),i(l,f)};X(et,l=>{e(n).isAdmin&&l(tt)})}c(se);var oe=a(se,2),Ue=m(oe),Se=m(Ue);{let l=t(()=>r()("photos"));le(Se,{get icon(){return At},get title(){return e(l)},get value(){return e(ue).images}})}var we=a(Se,2);{let l=t(()=>r()("videos"));le(we,{get icon(){return Ut},get title(){return e(l)},get value(){return e(ue).videos}})}var rt=a(we,2);{let l=t(()=>r()("storage"));le(rt,{get icon(){return St},get title(){return e(l)},get value(){return e(Le)},get unit(){return e(Me)}})}c(Ue),c(oe);var Ce=a(oe,2);{let l=t(()=>r()("profile"));G(Ce,{get icon(){return wt},get title(){return e(l)},children:(f,q)=>{de(f,{gap:2,children:(C,W)=>{var P=ar(),A=F(P),x=m(A);H(x,{tag:"h3",size:"tiny",children:(u,I)=>{h();var s=y();v(k=>g(s,k),[()=>r()("name")]),i(u,s)},$$slots:{default:!0}});var U=a(x,2);L(U,{children:(u,I)=>{h();var s=y();v(()=>g(s,e(n).name)),i(u,s)},$$slots:{default:!0}}),c(A);var d=a(A,2),_=m(d);H(_,{tag:"h3",size:"tiny",children:(u,I)=>{h();var s=y();v(k=>g(s,k),[()=>r()("email")]),i(u,s)},$$slots:{default:!0}});var D=a(_,2);L(D,{children:(u,I)=>{h();var s=y();v(()=>g(s,e(n).email)),i(u,s)},$$slots:{default:!0}}),c(d);var p=a(d,2),b=m(p);H(b,{tag:"h3",size:"tiny",children:(u,I)=>{h();var s=y();v(k=>g(s,k),[()=>r()("created_at")]),i(u,s)},$$slots:{default:!0}});var O=a(b,2);L(O,{children:(u,I)=>{h();var s=y();v(()=>g(s,e(He))),i(u,s)},$$slots:{default:!0}}),c(p);var o=a(p,2),V=m(o);H(V,{tag:"h3",size:"tiny",children:(u,I)=>{h();var s=y();v(k=>g(s,k),[()=>r()("updated_at")]),i(u,s)},$$slots:{default:!0}});var ne=a(V,2);L(ne,{children:(u,I)=>{h();var s=y();v(()=>g(s,e(Je))),i(u,s)},$$slots:{default:!0}}),c(o);var Be=a(o,2),Ie=m(Be);H(Ie,{tag:"h3",size:"tiny",children:(u,I)=>{h();var s=y();v(k=>g(s,k),[()=>r()("id")]),i(u,s)},$$slots:{default:!0}});var it=a(Ie,2);Qt(it,{children:(u,I)=>{h();var s=y();v(()=>g(s,e(n).id)),i(u,s)},$$slots:{default:!0}}),c(Be),i(C,P)},$$slots:{default:!0}})}})}var De=a(Ce,2);{let l=t(()=>r()("features"));G(De,{get icon(){return Ct},get title(){return e(l)},children:(f,q)=>{de(f,{gap:3,children:(C,W)=>{var P=sr(),A=F(P);{let o=t(()=>r()("email_notifications"));R(A,{get title(){return e(o)},get state(){return e(B).emailNotifications.enabled}})}var x=a(A,2);{let o=t(()=>r()("folders"));R(x,{get title(){return e(o)},get state(){return e(B).folders.enabled}})}var U=a(x,2);{let o=t(()=>r()("memories"));R(U,{get title(){return e(o)},get state(){return e(B).memories.enabled}})}var d=a(U,2);{let o=t(()=>r()("people"));R(d,{get title(){return e(o)},get state(){return e(B).people.enabled}})}var _=a(d,2);{let o=t(()=>r()("rating"));R(_,{get title(){return e(o)},get state(){return e(B).ratings.enabled}})}var D=a(_,2);{let o=t(()=>r()("shared_links"));R(D,{get title(){return e(o)},get state(){return e(B).sharedLinks.enabled}})}var p=a(D,2);{let o=t(()=>r()("show_supporter_badge"));R(p,{get title(){return e(o)},get state(){return e(B).purchase.showSupportBadge}})}var b=a(p,2);{let o=t(()=>r()("tags"));R(b,{get title(){return e(o)},get state(){return e(B).tags.enabled}})}var O=a(b,2);{let o=t(()=>r()("gcast_enabled"));R(O,{get title(){return e(o)},get state(){return e(B).cast.gCastEnabled}})}i(C,P)},$$slots:{default:!0}})}})}var ze=a(De,2);{let l=t(()=>r()("storage_quota"));G(ze,{get icon(){return Dt},get title(){return e(l)},children:(f,q)=>{var C=nr(),W=F(C);{var P=d=>{L(d,{children:(_,D)=>{h();var p=y();v(b=>g(p,b),[()=>r()("storage_usage",{values:{used:K(e(Q),$(),3),available:K(e(Y),$(),3)}})]),i(_,p)},$$slots:{default:!0}})},A=d=>{L(d,{class:"flex items-center gap-1",children:(_,D)=>{var p=ir(),b=F(p);qe(b,{get icon(){return Bt},size:"1.25rem",class:"text-success"});var O=a(b);v(o=>g(O,` ${o??""}`),[()=>r()("unlimited")]),i(_,p)},$$slots:{default:!0}})};X(W,d=>{e(n).quotaSizeInBytes!==null&&e(n).quotaSizeInBytes>=0?d(P):d(A,!1)})}var x=a(W,2);{var U=d=>{var _=or(),D=m(_),p=m(D,!0);c(D);var b=a(D,2),O=m(b);c(b),c(_),v((o,V,ne)=>{It(_,"title",o),g(p,V),kt(O,1,`h-1.75 rounded-full ${ne??""}`),Rt(O,`width: ${e(Z)??""}%`)},[()=>r()("storage_usage",{values:{used:K(e(Q),$(),3),available:K(e(Y),$(),3)}}),()=>r()("storage"),Ve]),i(d,_)};X(x,d=>{e(n).quotaSizeInBytes!==null&&e(n).quotaSizeInBytes>=0&&d(U)})}i(f,C)}})}var at=a(ze,2);{let l=t(()=>r()("authorized_devices"));G(at,{get icon(){return zt},get title(){return e(l)},children:(f,q)=>{de(f,{gap:3,children:(C,W)=>{var P=yt(),A=F(P);Pt(A,17,()=>e(Oe),x=>x.id,(x,U)=>{Ht(x,{get session(){return e(U)}})},x=>{var U=lr(),d=m(U,!0);c(U),v(_=>g(d,_),[()=>r()("no_devices")]),i(x,U)}),i(C,P)},$$slots:{default:!0}})}})}c(ae);var st=a(ae,2);ht(st,()=>z.children??ft),i(Qe,xe)},$$slots:{default:!0}}),c(re),i(Ke,re)},$$slots:{default:!0}})}i(M,he),$t(),E()}export{Hr as component,Wr as universal};
