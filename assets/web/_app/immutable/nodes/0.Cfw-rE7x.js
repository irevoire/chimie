import{g as le,b as oa,a as la}from"../chunks/C4XZXykC.js";import{s as ke}from"../chunks/FIvvbHQR.js";import{m as Ze,b as pa,c as da}from"../chunks/BoJ7Vqag.js";import{i as ca}from"../chunks/Bal6IUVU.js";import{c as ma,C as va}from"../chunks/BCL4P6ef.js";import"../chunks/DsnmJJEf.js";import{s as $,a as Ge,d as Qe,e as ua}from"../chunks/BufZg4h2.js";import{p as re,f as K,a as se,c as o,n as ha,t as D,s as a,r,g as m,ae as Ee,h as de,j as J,u as Q,i as _a,P as Te,N as ga,aW as fa,$ as Pe,b as xa}from"../chunks/BOqQhZBJ.js";import{c as ce,a as p,f as S,t as Re,s as ba}from"../chunks/CnteGC4G.js";import{i as B}from"../chunks/QS5y7wlf.js";import{h as wa}from"../chunks/CkzyFknU.js";import{a as ka}from"../chunks/4T_x9N89.js";import{I as be,x as Ue,aa as De,G as ee,bB as ya,H as Sa,s as l,ab as ye,a as Y,eQ as $a,eS as Aa,cx as Ve,aM as Ca,eT as Ta,bV as Ra,cY as Ua,bU as Fe,eU as Da,eP as ge,eV as Ma,ev as za,r as Ia,eW as Oa,dW as La,cR as Ba,ci as Ea,c$ as Pa,d1 as Va}from"../chunks/LrV5ZTyj.js";import{s as ne,a as j}from"../chunks/B227BkWK.js";import{p as G}from"../chunks/DbKlvrsB.js";import"../chunks/69_IOA4Y.js";import{e as Ke,t as we,T as ja}from"../chunks/D4fmOnVC.js";import{i as Na}from"../chunks/CMtyP6CA.js";import{am as fe,q as Ye,l as Se,al as je,an as Wa,w as Ne,ao as qa,ap as Ha,c as Za}from"../chunks/Jagi0WJL.js";import{$ as me}from"../chunks/DdY9CyNE.js";import{H as Ga,e as Qa,i as xe}from"../chunks/Ze2c3aZz.js";import{E as Fa}from"../chunks/mvsO_Jru.js";import{t as Ka}from"../chunks/CsIzZJ43.js";import{b as Ya}from"../chunks/eLOR7anR.js";import{u as pe,f as Ja,b as We}from"../chunks/BjCgVxgW.js";import{R as ie}from"../chunks/BeWG-__C.js";import{U as te}from"../chunks/DnqqNi3p.js";import{O as Xa}from"../chunks/Di6OVBka.js";import{F as et}from"../chunks/BbGcRfD-.js";import{B as at}from"../chunks/BZYF68wd.js";import{u as Je}from"../chunks/Cx5lmlld.js";import{m as Xe,M as tt,a as it}from"../chunks/C20f7eOz.js";import{e as rt}from"../chunks/ytu5q_IM.js";import{t as st}from"../chunks/DdFokm7i.js";import{s as qe}from"../chunks/BOKXftfP.js";import{l as He}from"../chunks/C2I_EQjW.js";import{s as nt}from"../chunks/1WjNB9m1.js";import{a as ot}from"../chunks/_U16pX41.js";const lt=!1,pt=!0,dt=(async({fetch:E,url:s})=>{let e;try{await ca(E),Ze(ke.value.maintenanceMode,s)&&await le(ke.value.maintenanceMode?pa(s):da(s.searchParams))}catch(v){e=v}return ma.enable(),{error:e,meta:{title:"Immich"}}}),rr=Object.freeze(Object.defineProperty({__proto__:null,csr:pt,load:dt,ssr:lt},Symbol.toStringTag,{value:"Module"}));var ct=S('<p class="whitespace-nowrap"> </p>'),mt=S('<div class="mb-2 flex place-items-center"><div class="w-full pe-10"><div class="flex place-items-center justify-between gap-2 text-xs font-medium"><p class="truncate"> </p> <!></div> <div class="flex place-items-center gap-2"><div class="h-2.5 w-full rounded-full bg-neutral-200 dark:bg-neutral-600"><div class="h-2.5 rounded-full bg-primary"></div></div> <p class="min-w-16 whitespace-nowrap text-right"><span class="text-primary"> </span></p></div></div> <div class="absolute end-4"><!></div></div>'),vt=S('<div class="fixed bottom-10 start-2 max-h-67.5 w-79 z-60 rounded-2xl border dark:border-white/10 p-4 shadow-lg bg-subtle"><!> <div class="my-2 mb-2 flex max-h-50 flex-col overflow-y-auto text-sm"></div></div>');function ut(E,s){re(s,!1);const e=()=>j(me,"$t",d),v=()=>j(Se,"$locale",d),[d,A]=ne(),b=(_,h)=>{h.abort?.abort(),fe.clear(_)};Na();var C=ce(),w=K(C);{var f=_=>{var h=vt(),T=o(h);Ga(T,{size:"tiny",children:(M,P)=>{ha();var z=Re();D(V=>$(z,V),[()=>e()("downloading")]),p(M,z)},$$slots:{default:!0}});var L=a(T,2);Ke(L,5,()=>Object.keys(fe.assets),M=>M,(M,P)=>{const z=Ee(()=>fe.assets[m(P)]);var V=mt(),g=o(V),k=o(g),x=o(k),N=o(x,!0);r(x);var I=a(x,2);{var W=y=>{var F=ct(),U=o(F,!0);r(F),D(O=>$(U,O),[()=>Ye(m(z).total,v())]),p(y,F)};B(I,y=>{m(z).total&&y(W)})}r(k);var q=a(k,2),H=o(q),i=o(H);r(H);var n=a(H,2),t=o(n),u=o(t,!0);r(t),r(n),r(q),r(g);var c=a(g,2),R=o(c);{let y=Ee(()=>e()("close"));be(R,{color:"secondary",variant:"outline",shape:"round",get"aria-label"(){return m(y)},onclick:()=>b(m(P),m(z)),size:"tiny",get icon(){return Ue}})}r(c),r(V),D(y=>{$(N,m(P)),De(i,`width: ${m(z).percentage}%`),$(u,y)},[()=>(m(z).percentage/100).toLocaleString(v(),{style:"percent"})]),ee(3,V,()=>ya),p(M,V)}),r(L),r(h),ee(3,h,()=>Sa,()=>({x:-100,duration:350})),p(_,h)};B(w,_=>{fe.isDownloading&&_(f)})}p(E,C),se(),A()}const ht="/_app/immutable/assets/apple-splash-2048-2732.fwp6Mnv1.png",_t="/_app/immutable/assets/apple-splash-2732-2048.jOsVZbjH.png",gt="/_app/immutable/assets/apple-splash-1668-2388.CksGwLMT.png",ft="/_app/immutable/assets/apple-splash-2388-1668.D_LOzq4n.png",xt="/_app/immutable/assets/apple-splash-1536-2048.CrADJBaU.png",bt="/_app/immutable/assets/apple-splash-2048-1536.CWjKc89z.png",wt="/_app/immutable/assets/apple-splash-1668-2224.DOKa-KY3.png",kt="/_app/immutable/assets/apple-splash-2224-1668.BzXLZnrP.png",yt="/_app/immutable/assets/apple-splash-1620-2160.JH4Mgnb-.png",St="/_app/immutable/assets/apple-splash-2160-1620.lYW7omrw.png",$t="/_app/immutable/assets/apple-splash-1290-2796.Dl_iQwcQ.png",At="/_app/immutable/assets/apple-splash-2796-1290.BnQZ3ZCK.png",Ct="/_app/immutable/assets/apple-splash-1179-2556.BsSwDIAl.png",Tt="/_app/immutable/assets/apple-splash-2556-1179.7vTA5SZb.png",Rt="/_app/immutable/assets/apple-splash-1284-2778.BFr0RH02.png",Ut="/_app/immutable/assets/apple-splash-2778-1284.BYczaWmT.png",Dt="/_app/immutable/assets/apple-splash-1170-2532.DFj8yr_L.png",Mt="/_app/immutable/assets/apple-splash-2532-1170.BNqP3wVp.png",zt="/_app/immutable/assets/apple-splash-1125-2436.B794NZP4.png",It="/_app/immutable/assets/apple-splash-2436-1125.DqWdbo6S.png",Ot="/_app/immutable/assets/apple-splash-1242-2688.CAABK-rM.png",Lt="/_app/immutable/assets/apple-splash-2688-1242.Dd466Tc7.png",Bt="/_app/immutable/assets/apple-splash-828-1792.DU0yixAw.png",Et="/_app/immutable/assets/apple-splash-1792-828.C8I8cgbe.png",Pt="/_app/immutable/assets/apple-splash-1242-2208.CoTZo0Tn.png",Vt="/_app/immutable/assets/apple-splash-2208-1242.HHGTmLaT.png",jt="/_app/immutable/assets/apple-splash-750-1334.BbUurNCS.png",Nt="/_app/immutable/assets/apple-splash-1334-750.DOUeOlsd.png",Wt="/_app/immutable/assets/apple-splash-640-1136.CKW01CIt.png",qt="/_app/immutable/assets/apple-splash-1136-640.CqrpG6nt.png";var Ht=S('<link rel="apple-touch-startup-image" media="(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"/> <link rel="apple-touch-startup-image" media="(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"/> <link rel="apple-touch-startup-image" media="(device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"/> <link rel="apple-touch-startup-image" media="(device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"/> <link rel="apple-touch-startup-image" media="(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"/> <link rel="apple-touch-startup-image" media="(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"/> <link rel="apple-touch-startup-image" media="(device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"/> <link rel="apple-touch-startup-image" media="(device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"/> <link rel="apple-touch-startup-image" media="(device-width: 810px) and (device-height: 1080px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"/> <link rel="apple-touch-startup-image" media="(device-width: 810px) and (device-height: 1080px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"/> <link rel="apple-touch-startup-image" media="(device-width: 430px) and (device-height: 932px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"/> <link rel="apple-touch-startup-image" media="(device-width: 430px) and (device-height: 932px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"/> <link rel="apple-touch-startup-image" media="(device-width: 430px) and (device-height: 932px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"/> <link rel="apple-touch-startup-image" media="(device-width: 430px) and (device-height: 932px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"/> <link rel="apple-touch-startup-image" media="(device-width: 428px) and (device-height: 926px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"/> <link rel="apple-touch-startup-image" media="(device-width: 428px) and (device-height: 926px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"/> <link rel="apple-touch-startup-image" media="(device-width: 390px) and (device-height: 844px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"/> <link rel="apple-touch-startup-image" media="(device-width: 390px) and (device-height: 844px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"/> <link rel="apple-touch-startup-image" media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"/> <link rel="apple-touch-startup-image" media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"/> <link rel="apple-touch-startup-image" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"/> <link rel="apple-touch-startup-image" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"/> <link rel="apple-touch-startup-image" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"/> <link rel="apple-touch-startup-image" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"/> <link rel="apple-touch-startup-image" media="(device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"/> <link rel="apple-touch-startup-image" media="(device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"/> <link rel="apple-touch-startup-image" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"/> <link rel="apple-touch-startup-image" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"/> <link rel="apple-touch-startup-image" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"/> <link rel="apple-touch-startup-image" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"/>',1);function Zt(E){var s=Ht(),e=K(s),v=a(e,2),d=a(v,2),A=a(d,2),b=a(A,2),C=a(b,2),w=a(C,2),f=a(w,2),_=a(f,2),h=a(_,2),T=a(h,2),L=a(T,2),M=a(L,2),P=a(M,2),z=a(P,2),V=a(z,2),g=a(V,2),k=a(g,2),x=a(k,2),N=a(x,2),I=a(N,2),W=a(I,2),q=a(W,2),H=a(q,2),i=a(H,2),n=a(i,2),t=a(n,2),u=a(t,2),c=a(u,2),R=a(c,2);D(()=>{l(e,"href",ht),l(v,"href",_t),l(d,"href",gt),l(A,"href",ft),l(b,"href",xt),l(C,"href",bt),l(w,"href",wt),l(f,"href",kt),l(_,"href",yt),l(h,"href",St),l(T,"href",$t),l(L,"href",At),l(M,"href",Ct),l(P,"href",Tt),l(z,"href",Rt),l(V,"href",Ut),l(g,"href",Dt),l(k,"href",Mt),l(x,"href",zt),l(N,"href",It),l(I,"href",Ot),l(W,"href",Lt),l(q,"href",Bt),l(H,"href",Et),l(i,"href",Pt),l(n,"href",Vt),l(t,"href",jt),l(u,"href",Nt),l(c,"href",Wt),l(R,"href",qt)}),p(E,s)}var Gt=S('<div class="absolute start-0 top-0 h-[3px] w-dvw bg-white"><span class="absolute h-[3px] bg-immich-primary"></span></div>');function Qt(E,s){re(s,!0);const e=()=>j(C,"$progress",v),[v,d]=ne();let A=de(!1);const b=100,C=Ka(0,{duration:1e3,easing:Qa});function w(){J(A,!0),C.set(90)}Ge(()=>{const T=setTimeout(w,b);return()=>clearTimeout(T)});var f=ce(),_=K(f);{var h=T=>{var L=Gt(),M=o(L);let P;r(L),D(()=>P=De(M,"",P,{width:`${e()}%`})),p(T,L)};B(_,T=>{m(A)&&T(h)})}p(E,f),se(),d()}var Ft=S('<div class="flex items-center justify-between gap-1"><a target="_blank" rel="noopener noreferrer" aria-hidden="true"><!></a> <button type="button" aria-hidden="true"><!></button></div>'),Kt=S('<div class="flex items-center justify-between gap-1"><button type="button" aria-hidden="true"><!></button> <button type="button" aria-hidden="true"><!></button></div>'),Yt=S('<div class="text-black relative mt-[5px] h-4.5 w-full rounded-md bg-gray-300 dark:bg-gray-700"><div class="h-4.5 rounded-md bg-immich-primary transition-all"></div> <p class="absolute top-0.5 h-full w-full text-center text-white text-[10px]"><!></p></div>'),Jt=S('<div class="flex flex-row justify-between"><p class="w-full rounded-md text-justify text-danger"> </p></div>'),Xt=S('<div class="flex flex-col rounded-xl text-xs p-2 gap-1 border border-gray-300 dark:border-subtle bg-primary/10"><div class="flex items-center gap-2"><div class="flex items-center justify-center"><!></div> <span class="grow break-all"> </span> <!></div> <!> <!></div>');function ei(E,s){re(s,!0);const e=()=>j(me,"$t",d),v=()=>j(Se,"$locale",d),[d,A]=ne(),b=i=>{pe.removeItem(i.id)},C=async i=>{pe.removeItem(i.id),await Ja({files:[i.file],albumId:i.albumId})};var w=Xt(),f=o(w),_=o(f),h=o(_);{var T=i=>{{let n=Q(()=>e()("pending"));Y(i,{get icon(){return $a},size:"24",class:"text-primary",get title(){return m(n)}})}},L=i=>{{let n=Q(()=>e()("asset_skipped"));Y(i,{get icon(){return Aa},size:"24",spin:!0,class:"text-primary",get title(){return m(n)}})}},M=i=>{{let n=Q(()=>e()("error"));Y(i,{get icon(){return Ve},size:"24",class:"text-danger",get title(){return m(n)}})}},P=i=>{var n=ce(),t=K(n);{var u=R=>{{let y=Q(()=>e()("asset_skipped_in_trash"));Y(R,{get icon(){return Ua},size:"24",class:"text-gray-500",get title(){return m(y)}})}},c=R=>{{let y=Q(()=>e()("asset_skipped"));Y(R,{get icon(){return Ve},size:"24",class:"text-warning",get title(){return m(y)}})}};B(t,R=>{s.uploadAsset.isTrashed?R(u):R(c,!1)})}p(i,n)},z=i=>{{let n=Q(()=>e()("asset_uploaded"));Y(i,{get icon(){return Ca},size:"24",class:"text-success",get title(){return m(n)}})}};B(h,i=>{s.uploadAsset.state===te.PENDING?i(T):s.uploadAsset.state===te.STARTED?i(L,1):s.uploadAsset.state===te.ERROR?i(M,2):s.uploadAsset.state===te.DUPLICATED?i(P,3):s.uploadAsset.state===te.DONE&&i(z,4)})}r(_);var V=a(_,2),g=o(V,!0);r(V);var k=a(V,2);{var x=i=>{var n=Ft(),t=o(n);l(t,"tabindex",-1);var u=o(t);Y(u,{get icon(){return Ta},size:"20"}),r(t);var c=a(t,2);c.__click=()=>b(s.uploadAsset),l(c,"tabindex",-1);var R=o(c);Y(R,{get icon(){return Ue},size:"20"}),r(c),r(n),D(y=>l(t,"href",y),[()=>s.uploadAsset.isTrashed?ie.viewTrashedAsset({id:s.uploadAsset.assetId}):ie.viewAsset({id:s.uploadAsset.assetId})]),p(i,n)},N=i=>{var n=Kt(),t=o(n);t.__click=()=>C(s.uploadAsset),l(t,"tabindex",-1);var u=o(t);Y(u,{get icon(){return Ra},size:"20"}),r(t);var c=a(t,2);c.__click=()=>b(s.uploadAsset),l(c,"tabindex",-1);var R=o(c);Y(R,{get icon(){return Ue},size:"20"}),r(c),r(n),p(i,n)};B(k,i=>{s.uploadAsset.state===te.DUPLICATED&&s.uploadAsset.assetId?i(x):s.uploadAsset.state===te.ERROR&&i(N,1)})}r(f);var I=a(f,2);{var W=i=>{var n=Yt(),t=o(n),u=a(t,2),c=o(u);{var R=U=>{var O=Re();D(()=>$(O,s.uploadAsset.message)),p(U,O)},y=Q(()=>s.uploadAsset.message===e()("asset_hashing")),F=U=>{var O=Re();D(X=>$(O,`${s.uploadAsset.message??""}
          ${s.uploadAsset.progress??""}% - ${X??""}/s - ${s.uploadAsset.eta??""}s`),[()=>Ye(s.uploadAsset.speed||0,v())]),p(U,O)};B(c,U=>{m(y)?U(R):U(F,!1)})}r(u),r(n),D(()=>De(t,`width: ${s.uploadAsset.progress}%`)),p(i,n)};B(I,i=>{s.uploadAsset.state===te.STARTED&&i(W)})}var q=a(I,2);{var H=i=>{var n=Jt(),t=o(n),u=o(t,!0);r(t),r(n),D(()=>$(u,s.uploadAsset.error)),p(i,n)};B(q,i=>{s.uploadAsset.state===te.ERROR&&i(H)})}r(w),D(()=>$(g,s.uploadAsset.file.name)),ee(1,w,()=>ye,()=>({duration:250})),ee(2,w,()=>ye,()=>({duration:100})),p(E,w),se(),A()}Qe(["click"]);var ai=S('<div class="immich-scrollbar mb-4 max-h-100 overflow-y-auto rounded-lg"><div class="flex h-6.5 place-items-center gap-1"><label class="immich-form-label" for="upload-concurrency"> </label></div> <input class="immich-form-input w-full" id="upload-concurrency" type="number" min="1" max="50" step="1"/></div>'),ti=S('<div class="w-81 rounded-xl border border-gray-200 dark:border-subtle p-4 text-sm shadow-xs bg-subtle"><div class="place-item-center mb-4 flex justify-between"><div class="flex flex-col gap-1"><p class="immich-form-label text-xm"> </p> <p class="immich-form-label text-xs"> <span class="text-success"> </span> <span class="text-danger"> </span> <span class="text-warning"> </span></p></div> <div class="flex flex-col items-end"><div class="flex flex-row"><!> <!></div> <!></div></div> <!> <div class="immich-scrollbar flex max-h-[400px] flex-col gap-2 overflow-y-auto rounded-lg"></div></div>'),ii=S('<button type="button" class="absolute -end-4 -top-4 flex h-10 w-10 place-content-center place-items-center rounded-full bg-danger p-5 text-xs text-light"> </button>'),ri=S('<div class="rounded-full"><button type="button" class="absolute -start-4 -top-4 flex h-10 w-10 place-content-center place-items-center rounded-full bg-primary p-5 text-xs text-light"> </button> <!> <button type="button" class="flex h-16 w-16 place-content-center place-items-center rounded-full bg-subtle p-5 text-sm text-primary shadow-lg"><div class="animate-pulse"><!></div></button></div>'),si=S('<div class="fixed bottom-6 end-16"><!></div>');function ni(E,s){re(s,!0);const e=()=>j(z,"$isUploading",f),v=()=>j(M,"$stats",f),d=()=>j(me,"$t",f),A=()=>j(V,"$remainingUploads",f),b=()=>j(Se,"$locale",f),C=()=>j(P,"$isDismissible",f),w=()=>j(pe,"$uploadAssetsStore",f),[f,_]=ne();let h=de(!1),T=de(!1),L=de(_a(We.concurrency)),{stats:M,isDismissible:P,isUploading:z,remainingUploads:V}=pe;Te(()=>{e()&&J(h,!0)});var g=ce(),k=K(g);{var x=N=>{var I=si(),W=o(I);{var q=i=>{var n=ti(),t=o(n),u=o(t),c=o(u),R=o(c,!0);r(c);var y=a(c,2),F=o(y),U=a(F),O=o(U,!0);r(U);var X=a(U),ve=a(X),$e=o(ve,!0);r(ve);var Me=a(ve),ze=a(Me),ea=o(ze,!0);r(ze),r(y),r(u);var Ie=a(u,2),Ae=o(Ie),Oe=o(Ae);{let Z=Q(()=>d()("toggle_settings"));be(Oe,{variant:"ghost",shape:"round",color:"secondary",get icon(){return Fe},size:"small",onclick:()=>J(T,!m(T)),get"aria-label"(){return m(Z)}})}var aa=a(Oe,2);{let Z=Q(()=>d()("minimize"));be(aa,{variant:"ghost",shape:"round",color:"secondary",get"aria-label"(){return m(Z)},get icon(){return Da},size:"small",onclick:()=>J(h,!1)})}r(Ae);var ta=a(Ae,2);{var ia=Z=>{{let ae=Q(()=>d()("dismiss_all_errors"));be(Z,{variant:"ghost",shape:"round",color:"secondary",get"aria-label"(){return m(ae)},get icon(){return za},size:"small",onclick:()=>pe.dismissErrors()})}};B(ta,Z=>{C()&&Z(ia)})}r(Ie),r(t);var Le=a(t,2);{var ra=Z=>{var ae=ai(),ue=o(ae),_e=o(ue),Ce=o(_e,!0);r(_e),r(ue);var oe=a(ue,2);Ia(oe),oe.__change=()=>We.concurrency=m(L),r(ae),D((he,sa,na)=>{$(Ce,he),l(oe,"aria-labelledby",sa),l(oe,"name",na)},[()=>d()("upload_concurrency"),()=>d()("upload_concurrency"),()=>d()("upload_concurrency")]),Ya(oe,()=>m(L),he=>J(L,he)),p(Z,ae)};B(Le,Z=>{m(T)&&Z(ra)})}var Be=a(Le,2);Ke(Be,5,w,Z=>Z.id,(Z,ae)=>{ei(Z,{get uploadAsset(){return m(ae)}})}),r(Be),r(n),D((Z,ae,ue,_e,Ce,oe,he)=>{$(R,Z),$(F,`${ae??""} `),$(O,ue),$(X,` -
              ${_e??""} `),$($e,Ce),$(Me,` -
              ${oe??""} `),$(ea,he)},[()=>d()("upload_progress",{values:{remaining:A(),processed:v().total-A(),total:v().total}}),()=>d()("upload_status_uploaded"),()=>v().success.toLocaleString(b()),()=>d()("upload_status_errors"),()=>v().errors.toLocaleString(b()),()=>d()("upload_status_duplicates"),()=>v().duplicates.toLocaleString(b())]),ee(1,n,()=>ge,()=>({duration:250,easing:xe})),p(i,n)},H=i=>{var n=ri(),t=o(n);t.__click=()=>J(h,!0);var u=o(t,!0);r(t);var c=a(t,2);{var R=O=>{var X=ii();X.__click=()=>J(h,!0);var ve=o(X,!0);r(X),D($e=>$(ve,$e),[()=>v().errors.toLocaleString(b())]),ee(1,X,()=>ge,()=>({duration:250,easing:xe})),p(O,X)};B(c,O=>{v().errors>0&&O(R)})}var y=a(c,2);y.__click=()=>J(h,!0);var F=o(y),U=o(F);Y(U,{get icon(){return Ma},size:"30"}),r(F),r(y),r(n),D(O=>$(u,O),[()=>A().toLocaleString(b())]),ee(1,t,()=>ge,()=>({duration:250,easing:xe})),ee(1,y,()=>ge,()=>({duration:250,easing:xe})),p(i,n)};B(W,i=>{m(h)?i(q):i(H,!1)})}r(I),ua("outroend",I,()=>{v().errors>0?we.danger(d()("upload_errors",{values:{count:v().errors}})):v().success>0&&we.success(d()("upload_success")),v().duplicates>0&&we.warning(d()("upload_skipped_duplicates",{values:{count:v().duplicates}})),pe.reset()}),ee(1,I,()=>ye,()=>({duration:250})),ee(2,I,()=>ye,()=>({duration:250})),p(N,I)};B(k,N=>{e()&&N(x)})}p(E,g),se(),_()}Qe(["change","click"]);var oi=S('<span class="font-medium underline"><a href="https://github.com/immich-app/immich/releases/latest" target="_blank" rel="noopener noreferrer"> </a></span>'),li=S("<code> </code>"),pi=S('<!> <div class="mt-4 font-medium"> </div> <div class="font-sm mt-8"><code> </code> <br/> <code> </code></div>',1);function di(E,s){re(s,!0);const e=()=>j(me,"$t",v),[v,d]=ne();{let A=Q(()=>e()("new_version_available")),b=Q(()=>e()("acknowledge"));at(E,{size:"small",get title(){return`ðŸŽ‰ ${m(A)??""}`},get closeText(){return m(b)},closeColor:"primary",get onClose(){return s.onClose},icon:!1,children:(C,w)=>{var f=pi(),_=K(f);et(_,{key:"version_announcement_message",children:(k,x)=>{let N=()=>x?.().tag,I=()=>x?.().message;var W=ce(),q=K(W);{var H=n=>{var t=oi(),u=o(t),c=o(u,!0);r(u),r(t),D(()=>$(c,I())),p(n,t)},i=n=>{var t=li(),u=o(t,!0);r(t),D(()=>$(u,I())),p(n,t)};B(q,n=>{N()==="link"?n(H):N()==="code"&&n(i,1)})}p(k,W)},$$slots:{default:!0}});var h=a(_,2),T=o(h,!0);r(h);var L=a(h,2),M=o(L),P=o(M);r(M);var z=a(M,4),V=o(z);r(z),r(L),D((g,k,x)=>{$(T,g),$(P,`${k??""}: ${s.serverVersion??""}`),$(V,`${x??""}: ${s.releaseVersion??""}`)},[()=>e()("version_announcement_closing"),()=>e()("server_version"),()=>e()("latest_version")]),p(C,f)},$$slots:{default:!0}})}se(),d()}function ci(E,s){re(s,!0);const e=()=>j(Je,"$user",v),[v,d]=ne();let A=de(void 0);Xa(E,{onReleaseEvent:async C=>{if(!C.isAvailable||!e().isAdmin)return;const w=je(C.releaseVersion),f=je(C.serverVersion),_=Wa(C.serverVersion,C.releaseVersion);if(!(_==="none"||_==="patch"||localStorage.getItem("appVersion")===w))try{await m(A)?.close(),J(A,Xe.open(di,{serverVersion:f,releaseVersion:w}),!0),m(A).onClose.then(()=>{localStorage.setItem("appVersion",w)})}catch(h){console.error("Error [VersionAnnouncementBox]:",h)}}}),se(),d()}var mi=S('<div class="font-medium"> </div>');function vi(E,s){re(s,!0);const e=()=>j(me,"$t",v),[v,d]=ne();{let A=Q(()=>e()("server_restarting_title"));tt(E,{size:"small",get title(){return m(A)},get onClose(){return s.onClose},icon:!1,children:(b,C)=>{it(b,{children:(w,f)=>{var _=mi(),h=o(_,!0);r(_),D(T=>$(h,T),[()=>e()("server_restarting_description")]),p(w,_)},$$slots:{default:!0}})},$$slots:{default:!0}})}se(),d()}var ui=S('<meta property="og:image"/>'),hi=S('<meta name="twitter:image"/>'),_i=S('<meta name="description"/> <meta property="og:type" content="website"/> <meta property="og:title"/> <meta property="og:description"/> <!> <meta name="twitter:card" content="summary_large_image"/> <meta name="twitter:title"/> <meta name="twitter:description"/> <!>',1),gi=S('<link rel="manifest" href="/manifest.json" crossorigin="use-credentials"/> <meta name="theme-color" content="currentColor"/> <!> <!>',1),fi=S("<!> <!> <!> <!>",1),xi=S("<!> <!>  <!>",1);function sr(E,s){re(s,!0);const e=()=>j(me,"$t",b),v=()=>j(Se,"$locale",b),d=()=>j(Je,"$user",b),A=()=>j(_,"$serverRestarting",b),[b,C]=ne();Te(()=>{Oa({cancel:e()("cancel"),close:e()("close"),confirm:e()("confirm"),expand:e()("expand"),collapse:e()("collapse"),search_placeholder:e()("search"),search_no_results:e()("no_results"),prompt_default:e()("are_you_sure_to_do_this"),show_password:e()("show_password"),hide_password:e()("hide_password"),dark_theme:e()("dark_theme"),open_menu:e()("open"),command_palette_prompt_default:e()("command_palette_prompt"),command_palette_to_select:e()("command_palette_to_select"),command_palette_to_navigate:e()("command_palette_to_navigate"),command_palette_to_close:e()("command_palette_to_close"),command_palette_to_show_all:e()("command_palette_to_show_all"),navigate_next:e()("next"),navigate_previous:e()("previous"),open_calendar:e()("open_calendar"),toast_success_title:e()("success"),toast_info_title:e()("info"),toast_warning_title:e()("warning"),toast_danger_title:e()("error"),save:e()("save"),supporter:e()("supporter")})}),Te(()=>nt(v()));let w=de(!1);const f=()=>new URL(G.url.pathname+G.url.search,"https://my.immich.app");we.setOptions({class:"top-16 fixed"}),Ge(()=>{document.querySelector("#stencil")?.remove()}),rt.emit("AppInit"),oa(({from:g,to:k})=>{qe.isOpen&&qe.reset(),!(He(g)&&He(k))&&J(w,!0)}),la(()=>{J(w,!1)});const{serverRestarting:_}=Ne;ga(()=>{d()||A()||G.url.pathname.startsWith(ie.maintenanceMode())?qa():Ha()}),_.subscribe(g=>{if(g&&Ze(g.isMaintenanceMode,location)){Xe.show(vi,{}).catch(x=>console.error("Error [ServerRestartBox]:",x));let k=!1;Ne.connected.subscribe(x=>{x?x&&k&&location.reload():k=!0})}});const h=[{title:e()("theme"),description:e()("toggle_theme_description"),type:e()("command"),icon:La,onAction:()=>st.toggleTheme(),shortcuts:{shift:!0,key:"t"}}],T=[{title:e()("users"),description:e()("admin.users_page_description"),icon:Ba,onAction:()=>le(ie.users())},{title:e()("settings"),description:e()("admin.settings_page_description"),icon:Fe,onAction:()=>le(ie.systemSettings())},{title:e()("admin.queues"),description:e()("admin.queues_page_description"),icon:Ea,type:e()("page"),onAction:()=>le(ie.queues())},{title:e()("external_libraries"),description:e()("admin.external_libraries_page_description"),icon:Pa,onAction:()=>le(ie.libraries())},{title:e()("server_stats"),description:e()("admin.server_stats_page_description"),icon:Va,onAction:()=>le(ie.systemStatistics())}].map(g=>({...g,type:e()("page"),$if:()=>d()?.isAdmin})),L=Q(()=>[...h,...T]);var M=xi();wa("12qhfyh",g=>{var k=gi(),x=a(K(k),4);Zt(x);var N=a(x,2);{var I=W=>{var q=_i(),H=K(q),i=a(H,4),n=a(i,2),t=a(n,2);{var u=U=>{var O=ui();D(()=>l(O,"content",new URL(G.data.meta.imageUrl,ke.value.externalDomain||globalThis.location.origin).href)),p(U,O)};B(t,U=>{G.data.meta.imageUrl&&U(u)})}var c=a(t,4),R=a(c,2),y=a(R,2);{var F=U=>{var O=hi();D(()=>l(O,"content",new URL(G.data.meta.imageUrl,ke.value.externalDomain||globalThis.location.origin).href)),p(U,O)};B(y,U=>{G.data.meta.imageUrl&&U(F)})}D(()=>{l(H,"content",G.data.meta.description),l(i,"content",G.data.meta.title),l(n,"content",G.data.meta.description),l(c,"content",G.data.meta.title),l(R,"content",G.data.meta.description)}),p(W,q)};B(N,W=>{G.data.meta&&W(I)})}fa(()=>{Pe.title=`${(G.data.meta?.title||"Web")??""} - Immich`}),p(g,k)}),ka(Pe,(g,k)=>ot?.(g,k),()=>({shortcut:{ctrl:!0,shift:!0,key:"m"},onShortcut:()=>Za(f().toString())}));var P=K(M);va(P,{name:"Global",get actions(){return m(L)}});var z=a(P,2);ci(z,{});var V=a(z,2);ja(V,{children:(g,k)=>{var x=fi(),N=K(x);{var I=t=>{Fa(t,{get error(){return G.data.error}})},W=t=>{var u=ce(),c=K(u);ba(c,()=>s.children??xa),p(t,u)};B(N,t=>{G.data.error?t(I):t(W,!1)})}var q=a(N,2);{var H=t=>{Qt(t,{})};B(q,t=>{m(w)&&t(H)})}var i=a(q,2);ut(i,{});var n=a(i,2);ni(n,{}),p(g,x)}}),p(E,M),se(),C()}export{sr as component,rr as universal};
