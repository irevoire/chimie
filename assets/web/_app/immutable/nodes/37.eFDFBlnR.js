import{a as Ut,p as Se,u as Ne}from"../chunks/Cx5lmlld.js";import{g as It,$ as me}from"../chunks/DdY9CyNE.js";import{bs as Ct,bt as Tt,bu as Mt,C as Bt,bl as dt,av as Je,aj as Et,ag as Ft,bv as Nt,bw as Wt,bx as jt,by as We,bz as Vt,A as vt,bA as Ht,bB as Kt,au as qt,a8 as et,a9 as tt,bC as Rt,bD as Gt,bE as Qt,P as Jt}from"../chunks/DeYUhNiz.js";import"../chunks/DsnmJJEf.js";import{p as $e,f as le,a as _e,c as n,r as i,s as o,j,h as Z,g as e,n as R,t as I,u as r,i as ne,Q as Te,b as rt,at as Xt}from"../chunks/BOqQhZBJ.js";import{s as pe,b as $t,a as se,d as ye,f as He,p as Ae,m as Oe}from"../chunks/B227BkWK.js";import{U as Yt}from"../chunks/CwTmTzRk.js";import{c as De,a,f as L,t as G,s as Zt}from"../chunks/CnteGC4G.js";import{i as de}from"../chunks/QS5y7wlf.js";import{a as Ee,p as er}from"../chunks/C2I_EQjW.js";import{s as A,d as tr,e as Ue,a as Ie}from"../chunks/BufZg4h2.js";import{by as rr,T as xe,B as fe,G as be,ab as Pe,a as qe,em as _t,H as sr,w as zt,I as ar,x as or,X as mt,cH as lr,aI as nr,en as ir,eo as dr,aL as cr,a4 as ur,aJ as vr,ep as $r,eq as _r,er as mr,aC as pr,es as fr,et as gr,dD as hr}from"../chunks/LrV5ZTyj.js";import{O as Dt}from"../chunks/Di6OVBka.js";import{P as Xe,a as br}from"../chunks/Do9Yq4PR.js";import{f as ct}from"../chunks/D5h9ps2j.js";import{h as yr,a as Pr}from"../chunks/CnynI8N_.js";import{F as xr}from"../chunks/C0Ca_l_S.js";import{S as wr,H as st,q as kr}from"../chunks/Ze2c3aZz.js";import{F as ae}from"../chunks/DzmAA-7p.js";import{P as Ke}from"../chunks/DHEjuV7w.js";import{H as Sr}from"../chunks/o4H9mija.js";import{M as At,a as Ot,m as ze,b as Cr}from"../chunks/C20f7eOz.js";import{t as Ce,h as ge,e as Re}from"../chunks/D4fmOnVC.js";import{S as Tr}from"../chunks/Dm7jOiZu.js";import{S as ut}from"../chunks/CGdGWZSx.js";import{b as zr,c as at,k as Ye,n as Dr,Q as pt,O as je}from"../chunks/BNLYq5HQ.js";import{G as Ar,F as ft,E as Or,l as Le,ab as gt,a4 as ht,ac as bt,ah as yt,ai as Pt,s as xt,I as Lr,J as Ze,H as Fe}from"../chunks/Jagi0WJL.js";import{a as ve,S as Ur}from"../chunks/BLeUNmxt.js";import{S as Ir}from"../chunks/DU0cVi4D.js";import{S as ce}from"../chunks/rybNiN9i.js";import{N as Mr}from"../chunks/D-O87UL4.js";import{s as Br,b as Er}from"../chunks/CWUfCk5h.js";import{i as Fr}from"../chunks/B_VXSWsl.js";import{T as ot,a as lt,b as we,c as nt,d as it,e as ke}from"../chunks/Bn2SVuxV.js";import{C as Nr}from"../chunks/Bz1BELIr.js";import{L as Wr}from"../chunks/eLOR7anR.js";import{S as jr}from"../chunks/Cm5MqJBL.js";import{t as wt}from"../chunks/DdFokm7i.js";import{D as kt}from"../chunks/DvWDe2C-.js";import{g as Vr}from"../chunks/C4XZXykC.js";import{U as Lt}from"../chunks/Bp2HQ4kn.js";import{a as Hr}from"../chunks/yWuLE-qO.js";import{L as Kr}from"../chunks/BH4ptThH.js";import{T as St}from"../chunks/Bxju487m.js";import{g as qr,a as Rr}from"../chunks/g2F3svyz.js";import{p as Gr}from"../chunks/BqlTOgs2.js";import{c as Qr}from"../chunks/BXcIwg1i.js";import{c as Jr}from"../chunks/Cihu_C9l.js";import{I as Ve}from"../chunks/BJT5MMCK.js";import{S as Xr}from"../chunks/AHWy_irw.js";import{C as Yr}from"../chunks/WscBzvwE.js";const Zr=(async({url:Y})=>{await Ut(Y);const T=await Ct(),s=await Tt(),t=await It();return{keys:T,sessions:s,meta:{title:t("settings")}}}),wo=Object.freeze(Object.defineProperty({__proto__:null,load:Zr},Symbol.toStringTag,{value:"Module"}));var es=L("<!> <!>",1),ts=L('<div> </div> <hr class="my-2 h-px w-full border-0 bg-gray-200 dark:bg-gray-600"/> <section><!></section>',1),rs=L("<div> </div>");function ss(Y,T){$e(T,!0);const s=()=>se(me,"$t",t),[t,Q]=pe();let x=Z("");const u=async()=>{await yr({password:e(x)})&&T.onClose()},E=r(()=>({title:s()("reset"),size:"small",icon:rr,onClose:T.onClose}));var F=De(),N=le(F);{var b=S=>{{let V=r(()=>s()("reset")),M=r(()=>!e(x));xr(S,$t(()=>e(E),{submitColor:"danger",get submitText(){return e(V)},get disabled(){return e(M)},onSubmit:u,children:(h,f)=>{wr(h,{gap:4,children:(w,d)=>{var _=ts(),l=le(_),c=n(l,!0);i(l);var y=o(l,4),p=n(y);{let C=r(()=>s()("confirm_password"));ae(p,{get label(){return e(C)},required:!0,children:(D,H)=>{var v=es(),$=le(v);Ke($,{autocomplete:"current-password",get value(){return e(x)},set value(m){j(x,m,!0)}});var P=o($,2);Sr(P,{color:"muted",children:(m,W)=>{R();var q=G();I(g=>A(q,g),[()=>s()("reset_pin_code_with_password")]),a(m,q)},$$slots:{default:!0}}),a(D,v)},$$slots:{default:!0}})}i(y),I(C=>A(c,C),[()=>s()("reset_pin_code_description")]),a(w,_)},$$slots:{default:!0}})},$$slots:{default:!0}}))}},z=S=>{At(S,$t(()=>e(E),{closeOnBackdropClick:!0,children:(V,M)=>{Ot(V,{children:(h,f)=>{var w=rs(),d=n(w,!0);i(w),I(_=>A(d,_),[()=>s()("reset_pin_code_description")]),a(h,w)},$$slots:{default:!0}})},$$slots:{default:!0}}))};de(N,S=>{ct.value.passwordLogin===!1?S(b):S(z,!1)})}a(Y,F),_e(),Q()}var as=L('<form autocomplete="off"><div class="flex flex-col gap-6 place-items-center place-content-center"><!> <!> <!> <!> <button type="button"><!></button></div> <div class="flex justify-end gap-2 mt-4"><!> <!></div></form>');function os(Y,T){$e(T,!0);const s=()=>se(me,"$t",t),[t,Q]=pe();let x=Z(""),u=Z(""),E=Z(""),F=Z(!1),N=r(()=>e(x).length===6&&e(E).length===6&&e(u)===e(E));const b=async C=>{C.preventDefault(),await z()},z=async()=>{j(F,!0);try{await Mt({pinCodeChangeDto:{pinCode:e(x),newPinCode:e(u)}}),S(),Ce.success(s()("pin_code_changed_successfully"))}catch(C){ge(C,s()("unable_to_change_pin_code"))}finally{j(F,!1)}},S=()=>{j(x,""),j(u,""),j(E,"")};var V=as(),M=n(V),h=n(M);st(h,{children:(C,D)=>{R();var H=G();I(v=>A(H,v),[()=>s()("change_pin_code")]),a(C,H)},$$slots:{default:!0}});var f=o(h,2);{let C=r(()=>s()("current_pin_code"));Xe(f,{get label(){return e(C)},tabindexStart:1,pinLength:6,get value(){return e(x)},set value(D){j(x,D,!0)}})}var w=o(f,2);{let C=r(()=>s()("new_pin_code"));Xe(w,{get label(){return e(C)},tabindexStart:7,pinLength:6,get value(){return e(u)},set value(D){j(u,D,!0)}})}var d=o(w,2);{let C=r(()=>s()("confirm_new_pin_code"));Xe(d,{get label(){return e(C)},tabindexStart:13,pinLength:6,get value(){return e(E)},set value(D){j(E,D,!0)}})}var _=o(d,2);_.__click=()=>ze.show(ss,{});var l=n(_);xe(l,{color:"muted",class:"underline",size:"small",children:(C,D)=>{R();var H=G();I(v=>A(H,v),[()=>s()("forgot_pin_code_question")]),a(C,H)},$$slots:{default:!0}}),i(_),i(M);var c=o(M,2),y=n(c);fe(y,{shape:"round",color:"secondary",type:"button",size:"small",onclick:S,children:(C,D)=>{R();var H=G();I(v=>A(H,v),[()=>s()("clear")]),a(C,H)},$$slots:{default:!0}});var p=o(y,2);{let C=r(()=>!e(N));fe(p,{shape:"round",type:"submit",size:"small",get loading(){return e(F)},get disabled(){return e(C)},children:(D,H)=>{R();var v=G();I($=>A(v,$),[()=>s()("save")]),a(D,v)},$$slots:{default:!0}})}i(c),i(V),Ue("submit",V,b),a(Y,V),_e(),Q()}tr(["click"]);var ls=L("<div><!></div>"),ns=L("<div><!></div>"),is=L('<!> <section class="my-4 sm:ms-8"><!></section>',1);function ds(Y,T){$e(T,!0);let s=Z(!1);Ie(async()=>{const{pinCode:b}=await Bt();j(s,b,!0)});const t=()=>{j(s,!1)};var Q=is(),x=le(Q);Dt(x,{onUserPinCodeReset:t});var u=o(x,2),E=n(u);{var F=b=>{var z=ls(),S=n(z);os(S,{}),i(z),be(1,z,()=>Pe,()=>({duration:200})),a(b,z)},N=b=>{var z=ns(),S=n(z);br(S,{onCreated:()=>j(s,!0)}),i(z),be(1,z,()=>Pe,()=>({duration:200})),a(b,z)};de(E,b=>{e(s)?b(F):b(N,!1)})}i(u),a(Y,Q),_e()}var cs=L('<section class="my-4"><div><form autocomplete="off"><div class="sm:ms-8 flex flex-col gap-4"><!> <!> <div class="flex justify-end"><!></div></div></form></div></section>');function us(Y,T){$e(T,!0);const s=()=>se(Se,"$preferences",Q),t=()=>se(me,"$t",Q),[Q,x]=pe();let u=Z(ne(Ar(s()?.download?.archiveSize||4,ft.GiB))),E=Z(ne(s()?.download?.includeEmbeddedVideos||!1));const F=async()=>{try{const d=await dt({userPreferencesUpdateDto:{download:{archiveSize:Math.floor(Or(e(u),ft.GiB)),includeEmbeddedVideos:e(E)}}});ye(Se,d),Ce.success(t()("saved_settings"))}catch(d){ge(d,t()("errors.unable_to_update_settings"))}},N=d=>{d.preventDefault()};var b=cs(),z=n(b),S=n(z),V=n(S),M=n(V);{let d=r(()=>t()("archive_size")),_=r(()=>t()("archive_size_description"));Tr(M,{get inputType(){return zr.NUMBER},get label(){return e(d)},get description(){return e(_)},get value(){return e(u)},set value(l){j(u,l,!0)}})}var h=o(M,2);{let d=r(()=>t()("download_include_embedded_motion_videos")),_=r(()=>t()("download_include_embedded_motion_videos_description"));ut(h,{get title(){return e(d)},get subtitle(){return e(_)},get checked(){return e(E)},set checked(l){j(E,l,!0)}})}var f=o(h,2),w=n(f);fe(w,{shape:"round",type:"submit",size:"small",onclick:()=>F(),children:(d,_)=>{R();var l=G();I(c=>A(l,c),[()=>t()("save")]),a(d,l)},$$slots:{default:!0}}),i(f),i(V),i(S),i(z),i(b),Ue("submit",S,N),be(1,z,()=>Pe,()=>({duration:500})),a(Y,b),_e(),x()}var vs=L('<div class="sm:ms-4 mt-4 flex flex-col gap-4"><!></div>'),$s=L('<div class="sm:ms-4 mt-4 flex flex-col gap-4"><!> <!></div>'),_s=L('<div class="sm:ms-4 mt-4 flex flex-col gap-4"><!> <!></div>'),ms=L('<div class="sm:ms-4 mt-4 flex flex-col gap-4"><!> <!></div>'),ps=L('<div class="sm:ms-4 mt-4 flex flex-col gap-4"><!></div>'),fs=L('<div class="sm:ms-4 mt-4 flex flex-col gap-4"><!> <!></div>'),gs=L('<div class="sm:ms-4 mt-4 flex flex-col gap-4"><!> <!></div>'),hs=L('<div class="sm:ms-4 mt-4 flex flex-col gap-4"><!></div>'),bs=L('<section class="my-4"><div><form autocomplete="off"><div class="sm:ms-4 md:ms-8 flex flex-col"><!> <!> <!> <!> <!> <!> <!> <!> <div class="flex justify-end mt-4"><!></div></div></form></div></section>');function ys(Y,T){$e(T,!0);const s=()=>se(Se,"$preferences",Q),t=()=>se(me,"$t",Q),[Q,x]=pe();let u=Z(ne(s()?.albums?.defaultAssetOrder??Je.Desc)),E=Z(ne(s()?.folders?.enabled??!1)),F=Z(ne(s()?.folders?.sidebarWeb??!1)),N=Z(ne(s()?.memories?.enabled??!0)),b=Z(ne(s()?.memories?.duration??5)),z=Z(ne(s()?.people?.enabled??!1)),S=Z(ne(s()?.people?.sidebarWeb??!1)),V=Z(ne(s()?.ratings?.enabled??!1)),M=Z(ne(s()?.sharedLinks?.enabled??!0)),h=Z(ne(s()?.sharedLinks?.sidebarWeb??!1)),f=Z(ne(s()?.tags?.enabled??!1)),w=Z(ne(s()?.tags?.sidebarWeb??!1)),d=Z(ne(s()?.cast?.gCastEnabled??!1));const _=async()=>{try{const k=await dt({userPreferencesUpdateDto:{albums:{defaultAssetOrder:e(u)},folders:{enabled:e(E),sidebarWeb:e(F)},memories:{enabled:e(N),duration:e(b)},people:{enabled:e(z),sidebarWeb:e(S)},ratings:{enabled:e(V)},sharedLinks:{enabled:e(M),sidebarWeb:e(h)},tags:{enabled:e(f),sidebarWeb:e(w)},cast:{gCastEnabled:e(d)}}});ye(Se,{...k}),Ce.success(t()("saved_settings"))}catch(k){ge(k,t()("errors.unable_to_update_settings"))}},l=k=>{k.preventDefault()};var c=bs(),y=n(c),p=n(y),C=n(p),D=n(C);{let k=r(()=>t()("albums")),J=r(()=>t()("albums_feature_description"));ve(D,{key:"albums",get title(){return e(k)},get subtitle(){return e(J)},children:(B,ee)=>{var O=vs(),U=n(O);{let re=r(()=>t()("albums_default_sort_order")),X=r(()=>t()("albums_default_sort_order_description"));ae(U,{get label(){return e(re)},get description(){return e(X)},children:(K,oe)=>{{let ie=r(()=>[{label:t()("oldest_first"),value:Je.Asc},{label:t()("newest_first"),value:Je.Desc}]);Ir(K,{get options(){return e(ie)},get value(){return e(u)},set value(ue){j(u,ue,!0)}})}},$$slots:{default:!0}})}i(O),a(B,O)},$$slots:{default:!0}})}var H=o(D,2);{let k=r(()=>t()("folders")),J=r(()=>t()("folders_feature_description"));ve(H,{key:"folders",get title(){return e(k)},get subtitle(){return e(J)},children:(B,ee)=>{var O=$s(),U=n(O);{let K=r(()=>t()("enable"));ae(U,{get label(){return e(K)},children:(oe,ie)=>{ce(oe,{get checked(){return e(E)},set checked(ue){j(E,ue,!0)}})},$$slots:{default:!0}})}var re=o(U,2);{var X=K=>{{let oe=r(()=>t()("sidebar")),ie=r(()=>t()("sidebar_display_description"));ae(K,{get label(){return e(oe)},get description(){return e(ie)},children:(ue,Me)=>{ce(ue,{get checked(){return e(F)},set checked(he){j(F,he,!0)}})},$$slots:{default:!0}})}};de(re,K=>{e(E)&&K(X)})}i(O),a(B,O)},$$slots:{default:!0}})}var v=o(H,2);{let k=r(()=>t()("time_based_memories")),J=r(()=>t()("photos_from_previous_years"));ve(v,{key:"memories",get title(){return e(k)},get subtitle(){return e(J)},children:(B,ee)=>{var O=_s(),U=n(O);{let X=r(()=>t()("enable"));ae(U,{get label(){return e(X)},children:(K,oe)=>{ce(K,{get checked(){return e(N)},set checked(ie){j(N,ie,!0)}})},$$slots:{default:!0}})}var re=o(U,2);{let X=r(()=>t()("duration")),K=r(()=>t()("time_based_memories_duration"));ae(re,{get label(){return e(X)},get description(){return e(K)},children:(oe,ie)=>{Mr(oe,{get value(){return e(b)},set value(ue){j(b,ue,!0)}})},$$slots:{default:!0}})}i(O),a(B,O)},$$slots:{default:!0}})}var $=o(v,2);{let k=r(()=>t()("people")),J=r(()=>t()("people_feature_description"));ve($,{key:"people",get title(){return e(k)},get subtitle(){return e(J)},children:(B,ee)=>{var O=ms(),U=n(O);{let K=r(()=>t()("enable"));ae(U,{get label(){return e(K)},children:(oe,ie)=>{ce(oe,{get checked(){return e(z)},set checked(ue){j(z,ue,!0)}})},$$slots:{default:!0}})}var re=o(U,2);{var X=K=>{{let oe=r(()=>t()("sidebar")),ie=r(()=>t()("sidebar_display_description"));ae(K,{get label(){return e(oe)},get description(){return e(ie)},children:(ue,Me)=>{ce(ue,{get checked(){return e(S)},set checked(he){j(S,he,!0)}})},$$slots:{default:!0}})}};de(re,K=>{e(z)&&K(X)})}i(O),a(B,O)},$$slots:{default:!0}})}var P=o($,2);{let k=r(()=>t()("rating")),J=r(()=>t()("rating_description"));ve(P,{key:"rating",get title(){return e(k)},get subtitle(){return e(J)},children:(B,ee)=>{var O=ps(),U=n(O);{let re=r(()=>t()("enable"));ae(U,{get label(){return e(re)},children:(X,K)=>{ce(X,{get checked(){return e(V)},set checked(oe){j(V,oe,!0)}})},$$slots:{default:!0}})}i(O),a(B,O)},$$slots:{default:!0}})}var m=o(P,2);{let k=r(()=>t()("shared_links")),J=r(()=>t()("shared_links_description"));ve(m,{key:"shared-links",get title(){return e(k)},get subtitle(){return e(J)},children:(B,ee)=>{var O=fs(),U=n(O);{let K=r(()=>t()("enable"));ae(U,{get label(){return e(K)},children:(oe,ie)=>{ce(oe,{get checked(){return e(M)},set checked(ue){j(M,ue,!0)}})},$$slots:{default:!0}})}var re=o(U,2);{var X=K=>{{let oe=r(()=>t()("sidebar")),ie=r(()=>t()("sidebar_display_description"));ae(K,{get label(){return e(oe)},get description(){return e(ie)},children:(ue,Me)=>{ce(ue,{get checked(){return e(h)},set checked(he){j(h,he,!0)}})},$$slots:{default:!0}})}};de(re,K=>{e(M)&&K(X)})}i(O),a(B,O)},$$slots:{default:!0}})}var W=o(m,2);{let k=r(()=>t()("tags")),J=r(()=>t()("tag_feature_description"));ve(W,{key:"tags",get title(){return e(k)},get subtitle(){return e(J)},children:(B,ee)=>{var O=gs(),U=n(O);{let K=r(()=>t()("enable"));ae(U,{get label(){return e(K)},children:(oe,ie)=>{ce(oe,{get checked(){return e(f)},set checked(ue){j(f,ue,!0)}})},$$slots:{default:!0}})}var re=o(U,2);{var X=K=>{{let oe=r(()=>t()("sidebar")),ie=r(()=>t()("sidebar_display_description"));ae(K,{get label(){return e(oe)},get description(){return e(ie)},children:(ue,Me)=>{ce(ue,{get checked(){return e(w)},set checked(he){j(w,he,!0)}})},$$slots:{default:!0}})}};de(re,K=>{e(f)&&K(X)})}i(O),a(B,O)},$$slots:{default:!0}})}var q=o(W,2);{let k=r(()=>t()("cast")),J=r(()=>t()("cast_description"));ve(q,{key:"cast",get title(){return e(k)},get subtitle(){return e(J)},children:(B,ee)=>{var O=hs(),U=n(O);{let re=r(()=>t()("gcast_enabled")),X=r(()=>t()("gcast_enabled_description"));ae(U,{get label(){return e(re)},get description(){return e(X)},children:(K,oe)=>{ce(K,{get checked(){return e(d)},set checked(ie){j(d,ie,!0)}})},$$slots:{default:!0}})}i(O),a(B,O)},$$slots:{default:!0}})}var g=o(q,2),te=n(g);fe(te,{shape:"round",type:"submit",size:"small",onclick:()=>_(),children:(k,J)=>{R();var B=G();I(ee=>A(B,ee),[()=>t()("save")]),a(k,B)},$$slots:{default:!0}}),i(g),i(C),i(p),i(y),i(c),Ue("submit",p,l),be(1,y,()=>Pe,()=>({duration:500})),a(Y,c),_e(),x()}var Ps=L('<section class="my-4"><div><form autocomplete="off"><div class="sm:ms-8 flex flex-col gap-6"><!> <!> <!></div> <div class="flex justify-end mt-4"><!></div></form></div></section>');function xs(Y,T){$e(T,!0);const s=()=>se(Se,"$preferences",Q),t=()=>se(me,"$t",Q),[Q,x]=pe();let u=Z(ne(s()?.emailNotifications?.enabled??!0)),E=Z(ne(s()?.emailNotifications?.albumInvite??!0)),F=Z(ne(s()?.emailNotifications?.albumUpdate??!0));const N=async()=>{try{const c=await dt({userPreferencesUpdateDto:{emailNotifications:{enabled:e(u),albumInvite:e(u)&&e(E),albumUpdate:e(u)&&e(F)}}});He(Se,Te(s).emailNotifications.enabled=c.emailNotifications.enabled,Te(s)),He(Se,Te(s).emailNotifications.albumInvite=c.emailNotifications.albumInvite,Te(s)),He(Se,Te(s).emailNotifications.albumUpdate=c.emailNotifications.albumUpdate,Te(s)),Ce.success(t()("saved_settings"))}catch(c){ge(c,t()("errors.unable_to_update_settings"))}},b=c=>{c.preventDefault()},z=r(()=>!e(u));var S=Ps(),V=n(S),M=n(V),h=n(M),f=n(h);{let c=r(()=>t()("enable")),y=r(()=>t()("notification_toggle_setting_description"));ae(f,{get label(){return e(c)},get description(){return e(y)},children:(p,C)=>{ce(p,{get checked(){return e(u)},set checked(D){j(u,D,!0)}})},$$slots:{default:!0}})}var w=o(f,2);{let c=r(()=>t()("album_added")),y=r(()=>t()("album_added_notification_setting_description"));ae(w,{get label(){return e(c)},get description(){return e(y)},get disabled(){return e(z)},children:(p,C)=>{ce(p,{get checked(){return e(E)},set checked(D){j(E,D,!0)}})},$$slots:{default:!0}})}var d=o(w,2);{let c=r(()=>t()("album_updated")),y=r(()=>t()("album_updated_setting_description"));ae(d,{get label(){return e(c)},get description(){return e(y)},get disabled(){return e(z)},children:(p,C)=>{ce(p,{get checked(){return e(F)},set checked(D){j(F,D,!0)}})},$$slots:{default:!0}})}i(h);var _=o(h,2),l=n(_);fe(l,{shape:"round",type:"submit",size:"small",onclick:()=>N(),children:(c,y)=>{R();var p=G();I(C=>A(p,C),[()=>t()("save")]),a(c,p)},$$slots:{default:!0}}),i(_),i(M),i(V),i(S),Ue("submit",M,b),be(1,V,()=>Pe,()=>({duration:500})),a(Y,S),_e(),x()}var ws=L('<p class="dark:text-white text-sm mt-1 col-start-2"> </p>'),ks=L('<p class="dark:text-white"> </p>'),Ss=L('<div class="text-right mt-4"><!></div>'),Cs=L('<div class="bg-gray-50 border border-immich-dark-primary/20 dark:bg-immich-dark-primary/15 p-6 pe-12 rounded-xl flex place-content-center gap-4"><!> <div><p class="text-primary font-semibold text-lg"> </p> <!></div></div> <!>',1),Ts=L('<p class="dark:text-white text-sm mt-1 col-start-2"> </p>'),zs=L('<div class="bg-gray-50 border border-immich-dark-primary/20 dark:bg-immich-dark-primary/15 p-6 pe-12 rounded-xl flex place-content-center gap-4"><!> <div><p class="text-primary font-semibold text-lg"> </p> <!></div></div> <div class="text-right mt-4"><!></div>',1),Ds=L('<div class="mb-4"><!></div> <!>',1),As=L('<section class="my-4"><div class="sm:ms-8"><!></div></section>');function Os(Y,T){$e(T,!0);const s=()=>se(Ne,"$user",u),t=()=>se(me,"$t",u),Q=()=>se(Se,"$preferences",u),x=()=>se(Le,"$locale",u),[u,E]=pe();let F=Z(!1),N=Z(null);const b=async()=>{const l=await Et();j(F,l.licensed,!0);const c=await Ft();c.license&&ye(Ne,{...s(),license:c.license}),e(F)&&s().isAdmin&&j(N,await z(),!0)},z=async()=>{try{return await Nt()}catch(l){if(Fr(l)&&l.status===404)return null;throw l}};Ie(async()=>{Ee.isPurchased&&await b()});const S=async()=>{try{if(!await ze.showDialog({title:t()("purchase_remove_product_key"),prompt:t()("purchase_remove_product_key_prompt"),confirmText:t()("remove")}))return;await Wt(),Ee.isPurchased=!1}catch(l){ge(l,t()("errors.failed_to_remove_product_key"))}},V=async()=>{try{if(!await ze.showDialog({title:t()("purchase_remove_server_product_key"),prompt:t()("purchase_remove_server_product_key_prompt"),confirmText:t()("remove")}))return;await jt(),Ee.isPurchased=!1}catch(l){ge(l,t()("errors.failed_to_remove_product_key"))}},M=async()=>{Ee.isPurchased=!0,await b()};var h=As(),f=n(h),w=n(f);{var d=l=>{var c=Ds(),y=le(c),p=n(y);{let v=r(()=>t()("show_supporter_badge")),$=r(()=>t()("show_supporter_badge_description"));ut(p,{get title(){return e(v)},get subtitle(){return e($)},get onToggle(){return Br},get checked(){return Q().purchase.showSupportBadge},set checked(P){He(Se,Te(Q).purchase.showSupportBadge=P,Te(Q))}})}i(y);var C=o(y,2);{var D=v=>{var $=Cs(),P=le($),m=n(P);qe(m,{get icon(){return _t},size:"56",class:"text-primary"});var W=o(m,2),q=n(W),g=n(q,!0);i(q);var te=o(q,2);{var k=O=>{var U=ws(),re=n(U,!0);i(U),I(X=>A(re,X),[()=>t()("purchase_activated_time",{values:{date:new Date(e(N).activatedAt).toLocaleString(x(),at.settings)}})]),a(O,U)},J=O=>{var U=ks(),re=n(U,!0);i(U),I(X=>A(re,X),[()=>t()("purchase_settings_server_activated")]),a(O,U)};de(te,O=>{s().isAdmin&&e(N)?.activatedAt?O(k):O(J,!1)})}i(W),i(P);var B=o(P,2);{var ee=O=>{var U=Ss(),re=n(U);fe(re,{shape:"round",size:"small",color:"danger",onclick:V,children:(X,K)=>{R();var oe=G();I(ie=>A(oe,ie),[()=>t()("purchase_button_remove_key")]),a(X,oe)},$$slots:{default:!0}}),i(U),a(O,U)};de(B,O=>{s().isAdmin&&O(ee)})}I(O=>A(g,O),[()=>t()("purchase_server_title")]),a(v,$)},H=v=>{var $=zs(),P=le($),m=n(P);qe(m,{get icon(){return _t},size:"56",class:"text-primary"});var W=o(m,2),q=n(W),g=n(q,!0);i(q);var te=o(q,2);{var k=ee=>{var O=Ts(),U=n(O,!0);i(O),I(re=>A(U,re),[()=>t()("purchase_activated_time",{values:{date:new Date(s().license?.activatedAt).toLocaleString(x(),at.settings)}})]),a(ee,O)};de(te,ee=>{s().license?.activatedAt&&ee(k)})}i(W),i(P);var J=o(P,2),B=n(J);fe(B,{shape:"round",size:"small",color:"danger",onclick:S,children:(ee,O)=>{R();var U=G();I(re=>A(U,re),[()=>t()("purchase_button_remove_key")]),a(ee,U)},$$slots:{default:!0}}),i(J),I(ee=>A(g,ee),[()=>t()("purchase_individual_title")]),a(v,$)};de(C,v=>{e(F)?v(D):v(H,!1)})}a(l,c)},_=l=>{Er(l,{onActivate:M,showTitle:!1})};de(w,l=>{Ee.isPurchased?l(d):l(_,!1)})}i(f),i(h),be(1,f,()=>Pe,()=>({duration:500})),a(Y,h),_e(),E()}var Ls=L("<!> <!> <!> <!>",1),Us=L("<!> <!> <!> <!>",1),Is=L("<!> <!> <!> <!>",1),Ms=L("<!> <!>",1),Bs=L("<!> <!>",1),Es=L("<!> <!>",1),Fs=L("<!> <!>",1),Ns=L('<section class="my-4 w-full"><!> <!> <!> <!></section>');function Ws(Y,T){$e(T,!0);const s=()=>se(Le,"$locale",Q),t=()=>se(me,"$t",Q),[Q,x]=pe(),u=(d,_=rt,l=rt)=>{it(d,{children:(c,y)=>{var p=Ls(),C=le(p);ke(C,{class:"w-1/4",children:($,P)=>{R();var m=G();I(()=>A(m,_())),a($,m)},$$slots:{default:!0}});var D=o(C,2);ke(D,{class:"w-1/4",children:($,P)=>{R();var m=G();I(W=>A(m,W),[()=>l().images.toLocaleString(s())]),a($,m)},$$slots:{default:!0}});var H=o(D,2);ke(H,{class:"w-1/4",children:($,P)=>{R();var m=G();I(W=>A(m,W),[()=>l().videos.toLocaleString(s())]),a($,m)},$$slots:{default:!0}});var v=o(H,2);ke(v,{class:"w-1/4",children:($,P)=>{R();var m=G();I(W=>A(m,W),[()=>l().total.toLocaleString(s())]),a($,m)},$$slots:{default:!0}}),a(c,p)},$$slots:{default:!0}})};let E=Z(ne({videos:0,images:0,total:0})),F=Z(ne({videos:0,images:0,total:0})),N=Z(ne({videos:0,images:0,total:0})),b=Z(ne({videos:0,images:0,total:0})),z=Z(ne({owned:0,shared:0,notShared:0}));const S=async()=>{await(async d=>{var _=Xt(d,5);j(E,_[0],!0),j(F,_[1],!0),j(N,_[2],!0),j(b,_[3],!0),j(z,_[4],!0)})(await Promise.all([We({visibility:vt.Timeline}),We({isFavorite:!0}),We({visibility:vt.Archive}),We({isTrashed:!0}),Vt()]))};Ie(async()=>{await S()});var V=Ns(),M=n(V);st(M,{size:"tiny",children:(d,_)=>{R();var l=G();I(c=>A(l,c),[()=>t()("photos_and_videos")]),a(d,l)},$$slots:{default:!0}});var h=o(M,2);ot(h,{striped:!0,spacing:"small",class:"mt-4",size:"small",children:(d,_)=>{var l=Ms(),c=le(l);lt(c,{children:(p,C)=>{var D=Us(),H=le(D);we(H,{class:"w-1/4",children:(m,W)=>{R();var q=G();I(g=>A(q,g),[()=>t()("view_name")]),a(m,q)},$$slots:{default:!0}});var v=o(H,2);we(v,{class:"w-1/4",children:(m,W)=>{R();var q=G();I(g=>A(q,g),[()=>t()("photos")]),a(m,q)},$$slots:{default:!0}});var $=o(v,2);we($,{class:"w-1/4",children:(m,W)=>{R();var q=G();I(g=>A(q,g),[()=>t()("videos")]),a(m,q)},$$slots:{default:!0}});var P=o($,2);we(P,{class:"w-1/4",children:(m,W)=>{R();var q=G();I(g=>A(q,g),[()=>t()("total")]),a(m,q)},$$slots:{default:!0}}),a(p,D)},$$slots:{default:!0}});var y=o(c,2);nt(y,{children:(p,C)=>{var D=Is(),H=le(D);{let m=r(()=>t()("timeline"));u(H,()=>e(m),()=>e(E))}var v=o(H,2);{let m=r(()=>t()("favorites"));u(v,()=>e(m),()=>e(F))}var $=o(v,2);{let m=r(()=>t()("archive"));u($,()=>e(m),()=>e(N))}var P=o($,2);{let m=r(()=>t()("trash"));u(P,()=>e(m),()=>e(b))}a(p,D)},$$slots:{default:!0}}),a(d,l)},$$slots:{default:!0}});var f=o(h,2);st(f,{size:"tiny",class:"mt-8",children:(d,_)=>{R();var l=G();I(c=>A(l,c),[()=>t()("albums")]),a(d,l)},$$slots:{default:!0}});var w=o(f,2);ot(w,{striped:!0,spacing:"small",class:"mt-4",size:"small",children:(d,_)=>{var l=Fs(),c=le(l);lt(c,{children:(p,C)=>{var D=Bs(),H=le(D);we(H,{class:"w-1/2",children:($,P)=>{R();var m=G();I(W=>A(m,W),[()=>t()("owned")]),a($,m)},$$slots:{default:!0}});var v=o(H,2);we(v,{class:"w-1/2",children:($,P)=>{R();var m=G();I(W=>A(m,W),[()=>t()("shared")]),a($,m)},$$slots:{default:!0}}),a(p,D)},$$slots:{default:!0}});var y=o(c,2);nt(y,{children:(p,C)=>{it(p,{children:(D,H)=>{var v=Es(),$=le(v);ke($,{class:"w-1/2",children:(m,W)=>{R();var q=G();I(g=>A(q,g),[()=>e(z).owned.toLocaleString(s())]),a(m,q)},$$slots:{default:!0}});var P=o($,2);ke(P,{class:"w-1/2",children:(m,W)=>{R();var q=G();I(g=>A(q,g),[()=>e(z).shared.toLocaleString(s())]),a(m,q)},$$slots:{default:!0}}),a(D,v)},$$slots:{default:!0}})},$$slots:{default:!0}}),a(d,l)},$$slots:{default:!0}}),i(V),a(Y,V),_e(),x()}var js=L('<div class="rounded-full bg-orange-100 px-2 text-[10px] text-orange-900"> </div>'),Vs=L('<div><div class="flex h-6.5 place-items-center gap-1"><!> <!></div> <!> <div class="flex items-center mt-2 max-w-[300px]"><!> <!></div></div>');function Hs(Y,T){$e(T,!0);const s=()=>se(me,"$t",t),[t,Q]=pe();let x=Ae(T,"subtitle",3,""),u=Ae(T,"isEdited",3,!1);var E=Vs(),F=n(E),N=n(F);Wr(N,{size:"small",children:(f,w)=>{R();var d=G();I(()=>A(d,T.title)),a(f,d)},$$slots:{default:!0}});var b=o(N,2);{var z=f=>{var w=js(),d=n(w,!0);i(w),I(_=>A(d,_),[()=>s()("unsaved_change")]),be(3,w,()=>sr,()=>({x:10,duration:200,easing:kr})),a(f,w)};de(b,f=>{u()&&f(z)})}i(F);var S=o(F,2);xe(S,{size:"small",color:"muted",children:(f,w)=>{R();var d=G();I(()=>A(d,x())),a(f,d)},$$slots:{default:!0}});var V=o(S,2),M=n(V);Nr(M,{get label(){return T.title},hideLabel:!0,get selectedOption(){return T.selectedOption},get options(){return T.options},get placeholder(){return T.comboboxPlaceholder},get onSelect(){return T.onSelect}});var h=o(M,2);Zt(h,()=>T.children??rt),i(V),i(E),a(Y,E),_e(),Q()}var Ks=L("<!> <!>",1),qs=L('<section class="my-4"><div><div class="sm:ms-8 flex flex-col gap-6"><!> <!> <!> <!> <!> <!> <!> <!> <!> <!></div></div></section>');function Rs(Y,T){$e(T,!0);const s=()=>se(Le,"$locale",b),t=()=>se(me,"$t",b),Q=()=>se(gt,"$alwaysLoadOriginalFile",b),x=()=>se(ht,"$playVideoThumbnailOnHover",b),u=()=>se(bt,"$autoPlayVideo",b),E=()=>se(yt,"$loopVideo",b),F=()=>se(Pt,"$alwaysLoadOriginalVideo",b),N=()=>se(xt,"$showDeleteModal",b),[b,z]=pe();let S=Z(ne(new Date));Ie(()=>{const g=setInterval(()=>{j(S,new Date,!0)},1e3);return()=>{clearInterval(g)}});const V=()=>Dr.filter(({code:g})=>Intl.NumberFormat.supportedLocalesOf(g).length>0).map(g=>({label:g.name,value:g.code})),M=()=>{ye(Le,s()==="default"?Ye.code:"default")},h=g=>{g&&ye(Le,g)};let f=r(()=>Ze(s()).code),w=r(()=>Lr(e(f)).formatDateTime(e(S))),d=r(()=>({value:Ze(e(f)).code||Ye.code,label:Ze(e(f)).name||Ye.name}));var _=qs(),l=n(_),c=n(l),y=n(c);{let g=r(()=>t()("theme_selection")),te=r(()=>t()("theme_selection_description"));ae(y,{get label(){return e(g)},get description(){return e(te)},children:(k,J)=>{ce(k,{get checked(){return wt.theme.system},onCheckedChange:B=>wt.setSystem(B)})},$$slots:{default:!0}})}var p=o(y,2);jr(p,{showSettingDescription:!0});var C=o(p,2);{let g=r(()=>t()("default_locale")),te=r(()=>t()("default_locale_description"));ae(C,{get label(){return e(g)},get description(){return e(te)},children:(k,J)=>{var B=Ks(),ee=le(B);{let U=r(()=>s()=="default");ce(ee,{get checked(){return e(U)},onCheckedChange:M})}var O=o(ee,2);xe(O,{size:"small",class:"mt-2 font-mono text-sm",children:(U,re)=>{R();var X=G();I(()=>A(X,e(w))),a(U,X)},$$slots:{default:!0}}),a(k,B)},$$slots:{default:!0}})}var D=o(C,2);{var H=g=>{{let te=r(()=>t()("searching_locales")),k=r(V),J=r(()=>t()("custom_locale")),B=r(()=>t()("custom_locale_description"));Hs(g,{get comboboxPlaceholder(){return e(te)},get selectedOption(){return e(d)},get options(){return e(k)},get title(){return e(J)},get subtitle(){return e(B)},onSelect:ee=>h(ee?.value)})}};de(D,g=>{s()!=="default"&&g(H)})}var v=o(D,2);{let g=r(()=>t()("display_original_photos")),te=r(()=>t()("display_original_photos_setting_description"));ae(v,{get label(){return e(g)},get description(){return e(te)},children:(k,J)=>{ce(k,{get checked(){return Oe(),Q()},set checked(B){ye(gt,B)}})},$$slots:{default:!0}})}var $=o(v,2);{let g=r(()=>t()("video_hover_setting")),te=r(()=>t()("video_hover_setting_description"));ae($,{get label(){return e(g)},get description(){return e(te)},children:(k,J)=>{ce(k,{get checked(){return Oe(),x()},set checked(B){ye(ht,B)}})},$$slots:{default:!0}})}var P=o($,2);{let g=r(()=>t()("setting_video_viewer_auto_play_title")),te=r(()=>t()("setting_video_viewer_auto_play_subtitle"));ae(P,{get label(){return e(g)},get description(){return e(te)},children:(k,J)=>{ce(k,{get checked(){return Oe(),u()},set checked(B){ye(bt,B)}})},$$slots:{default:!0}})}var m=o(P,2);{let g=r(()=>t()("loop_videos")),te=r(()=>t()("loop_videos_description"));ae(m,{get label(){return e(g)},get description(){return e(te)},children:(k,J)=>{ce(k,{get checked(){return Oe(),E()},set checked(B){ye(yt,B)}})},$$slots:{default:!0}})}var W=o(m,2);{let g=r(()=>t()("play_original_video")),te=r(()=>t()("play_original_video_setting_description"));ae(W,{get label(){return e(g)},get description(){return e(te)},children:(k,J)=>{ce(k,{get checked(){return Oe(),F()},set checked(B){ye(Pt,B)}})},$$slots:{default:!0}})}var q=o(W,2);{let g=r(()=>t()("permanent_deletion_warning")),te=r(()=>t()("permanent_deletion_warning_setting_description"));ae(q,{get label(){return e(g)},get description(){return e(te)},children:(k,J)=>{ce(k,{get checked(){return Oe(),N()},set checked(B){ye(xt,B)}})},$$slots:{default:!0}})}i(c),i(l),i(_),be(1,l,()=>Pe,()=>({duration:500})),a(Y,_),_e(),z()}var Gs=L('<section class="my-4"><div><form autocomplete="off"><div class="sm:ms-8 flex flex-col gap-4"><!> <!> <!> <!> <div class="flex justify-end"><!></div></div></form></div></section>');function Qs(Y,T){$e(T,!0);const s=()=>se(me,"$t",t),[t,Q]=pe();let x=Z(""),u=Z(""),E=Z(""),F=Z(!1);const N=async l=>{l.preventDefault(),await Pr({password:e(x),newPassword:e(u),invalidateSessions:e(F)})&&(j(x,""),j(u,""),j(E,""))};var b=Gs(),z=n(b),S=n(z),V=n(S),M=n(V);{let l=r(()=>s()("password"));ae(M,{get label(){return e(l)},required:!0,children:(c,y)=>{Ke(c,{autocomplete:"current-password",get value(){return e(x)},set value(p){j(x,p,!0)}})},$$slots:{default:!0}})}var h=o(M,2);{let l=r(()=>s()("new_password"));ae(h,{get label(){return e(l)},required:!0,children:(c,y)=>{Ke(c,{autocomplete:"new-password",get value(){return e(u)},set value(p){j(u,p,!0)}})},$$slots:{default:!0}})}var f=o(h,2);{let l=r(()=>s()("confirm_password"));ae(f,{get label(){return e(l)},required:!0,children:(c,y)=>{Ke(c,{autocomplete:"new-password",get value(){return e(E)},set value(p){j(E,p,!0)}})},$$slots:{default:!0}})}var w=o(f,2);{let l=r(()=>s()("log_out_all_devices")),c=r(()=>s()("change_password_form_log_out_description"));ae(w,{get label(){return e(l)},get description(){return e(c)},required:!0,children:(y,p)=>{ce(y,{get checked(){return e(F)},set checked(C){j(F,C,!0)}})},$$slots:{default:!0}})}var d=o(w,2),_=n(d);{let l=r(()=>!(e(x)&&e(u)&&e(u)===e(E)));fe(_,{shape:"round",type:"submit",size:"small",get disabled(){return e(l)},children:(c,y)=>{R();var p=G();I(C=>A(p,C),[()=>s()("save")]),a(c,p)},$$slots:{default:!0}})}i(d),i(V),i(S),i(z),i(b),Ue("submit",S,N),be(1,z,()=>Pe,()=>({duration:500})),a(Y,b),_e(),Q()}var Js=L('<div class="mb-6"><!> <!></div>'),Xs=L('<hr class="my-3"/>'),Ys=L("<!> <!>",1),Zs=L('<div class="mb-6"><!> <!></div> <div class="my-3"><hr/></div> <div class="flex justify-end"><!></div>',1),ea=L('<section class="my-4"><div><div class="sm:ms-8 flex flex-col gap-4"><!> <!></div></div></section>');function ta(Y,T){$e(T,!0);const s=()=>se(me,"$t",t),[t,Q]=pe();let x=Ae(T,"devices",15);const u=()=>Tt().then(d=>x(d));let E=r(()=>x().find(d=>d.current)),F=r(()=>x().filter(d=>!d.current));const N=async d=>{if(await ze.showDialog({prompt:s()("logout_this_device_confirmation")}))try{await Ht({id:d.id}),Ce.success(s()("logged_out_device"))}catch(l){ge(l,s()("errors.unable_to_log_out_device"))}finally{await u()}},b=async()=>{if(await ze.showDialog({prompt:s()("logout_all_device_confirmation")}))try{await Kt(),Ce.success(s()("logged_out_all_devices"))}catch(_){ge(_,s()("errors.unable_to_log_out_all_devices"))}finally{await u()}};var z=ea(),S=n(z),V=n(S),M=n(V);{var h=d=>{var _=Js(),l=n(_);xe(l,{class:"mb-2",fontWeight:"medium",size:"tiny",color:"primary",children:(y,p)=>{R();var C=G();I(D=>A(C,D),[()=>s()("current_device")]),a(y,C)},$$slots:{default:!0}});var c=o(l,2);kt(c,{get session(){return e(E)}}),i(_),a(d,_)};de(M,d=>{e(E)&&d(h)})}var f=o(M,2);{var w=d=>{var _=Zs(),l=le(_),c=n(l);xe(c,{class:"mb-2",fontWeight:"medium",size:"tiny",color:"primary",children:(D,H)=>{R();var v=G();I($=>A(v,$),[()=>s()("other_devices")]),a(D,v)},$$slots:{default:!0}});var y=o(c,2);Re(y,19,()=>e(F),D=>D.id,(D,H,v)=>{var $=Ys(),P=le($);kt(P,{get session(){return e(H)},onDelete:()=>N(e(H))});var m=o(P,2);{var W=q=>{var g=Xs();a(q,g)};de(m,q=>{e(v)!==e(F).length-1&&q(W)})}a(D,$)}),i(l);var p=o(l,4),C=n(p);fe(C,{shape:"round",color:"danger",size:"small",onclick:b,children:(D,H)=>{R();var v=G();I($=>A(v,$),[()=>s()("log_out_all_devices")]),a(D,v)},$$slots:{default:!0}}),i(p),a(d,_)};de(f,d=>{e(F).length>0&&d(w)})}i(V),i(S),i(z),be(1,S,()=>Pe,()=>({duration:500})),a(Y,z),_e(),Q()}var ra=L('<div class="flex place-content-center place-items-center"><!></div>'),sa=L('<section class="my-4"><div><div class="sm:ms-8 flex justify-end"><!></div></div></section>');function aa(Y,T){$e(T,!0);const s=()=>se(me,"$t",t),[t,Q]=pe();let x=Ae(T,"user",15),u=Z(!0);Ie(async()=>{if(Fe.isCallback(globalThis.location))try{j(u,!0),x(await Fe.link(globalThis.location)),Ce.success(s()("linked_oauth_account"))}catch(M){ge(M,s()("errors.unable_to_link_oauth_account"))}finally{await Vr("?open=oauth")}j(u,!1)});const E=async()=>{try{x(await Fe.unlink()),Ce.success(s()("unlinked_oauth_account"))}catch(M){ge(M,s()("errors.unable_to_unlink_account"))}};var F=sa(),N=n(F),b=n(N),z=n(b);{var S=M=>{var h=ra(),f=n(h);zt(f,{}),i(h),a(M,h)},V=M=>{var h=De(),f=le(h);{var w=_=>{fe(_,{shape:"round",size:"small",onclick:()=>E(),children:(l,c)=>{R();var y=G();I(p=>A(y,p),[()=>s()("unlink_oauth")]),a(l,y)},$$slots:{default:!0}})},d=_=>{fe(_,{shape:"round",size:"small",onclick:()=>Fe.authorize(globalThis.location),children:(l,c)=>{R();var y=G();I(p=>A(y,p),[()=>s()("link_to_oauth")]),a(l,y)},$$slots:{default:!0}})};de(f,_=>{x().oauthId?_(w):_(d,!1)})}a(M,h)};de(z,M=>{e(u)?M(S):ct.value.oauth&&M(V,1)})}i(b),i(N),i(F),be(1,N,()=>Pe,()=>({duration:500})),a(Y,F),_e(),Q()}var oa=L('<!> <div class="text-start grow"><!> <!></div>',1),la=L('<div class="immich-scrollbar max-h-75 overflow-y-auto gap-2 flex flex-col"><!> <!></div>'),na=L('<p class="py-5 text-sm"> </p>'),ia=L('<div class="w-full flex place-items-center place-content-center"><!></div>');function da(Y,T){$e(T,!0);const s=()=>se(me,"$t",t),[t,Q]=pe();let x=Z(ne([])),u=Z(ne([]));const E=async()=>{let N=await qt();N=N.filter(S=>S.id!==T.user.id);const b=await et({direction:tt.SharedBy}),z=new Set(b.map(S=>S.id));j(x,N.filter(S=>!z.has(S.id)),!0)},F=N=>{j(u,e(u).includes(N)?e(u).filter(b=>b.id!==N.id):[...e(u),N],!0)};{let N=r(()=>s()("add_partner"));At(Y,{get title(){return e(N)},get onClose(){return T.onClose},size:"small",children:(b,z)=>{Ot(b,{children:(S,V)=>{var M=De(),h=le(M);Hr(h,E,f=>{var w=ia(),d=n(w);zt(d,{}),i(w),a(f,w)},(f,w)=>{var d=De(),_=le(d);{var l=y=>{var p=la(),C=n(p);Re(C,17,()=>e(x),H=>H.id,(H,v,$,P)=>{{let m=r(()=>e(u).includes(e(v)));Kr(H,{onclick:()=>F(e(v)),get selected(){return e(m)},children:(W,q)=>{var g=oa(),te=le(g);Lt(te,{get user(){return e(v)},size:"md"});var k=o(te,2),J=n(k);xe(J,{fontWeight:"medium",children:(ee,O)=>{R();var U=G();I(()=>A(U,e(v).name)),a(ee,U)},$$slots:{default:!0}});var B=o(J,2);xe(B,{size:"tiny",color:"muted",children:(ee,O)=>{R();var U=G();I(()=>A(U,e(v).email)),a(ee,U)},$$slots:{default:!0}}),i(k),a(W,g)},$$slots:{default:!0}})}});var D=o(C,2);Cr(D,{children:(H,v)=>{var $=De(),P=le($);{var m=W=>{fe(W,{shape:"round",fullWidth:!0,onclick:()=>T.onClose(e(u)),children:(q,g)=>{R();var te=G();I(k=>A(te,k),[()=>s()("add")]),a(q,te)},$$slots:{default:!0}})};de(P,W=>{e(u).length>0&&W(m)})}a(H,$)},$$slots:{default:!0}}),i(p),a(y,p)},c=y=>{var p=na(),C=n(p,!0);i(p),I(D=>A(C,D),[()=>s()("photo_shared_all_users")]),a(y,p)};de(_,y=>{e(x).length>0?y(l):y(c,!1)})}a(f,d)}),a(S,M)},$$slots:{default:!0}})},$$slots:{default:!0}})}_e(),Q()}var ca=L('<hr class="my-4 border border-gray-200 dark:border-gray-700"/> <!> <!> <ul class="text-sm"><li class="flex gap-2 place-items-center py-1 mt-2"><!> </li> <li class="flex gap-2 place-items-center py-1"><!> </li></ul>',1),ua=L('<hr class="my-4 border border-gray-200 dark:border-gray-700"/> <!> <!>',1),va=L('<div class="rounded-2xl border border-gray-200 dark:border-gray-800 mt-6 bg-slate-50 dark:bg-gray-900 p-5"><div class="flex gap-4 rounded-lg pb-4 transition-all justify-between"><div class="flex gap-4"><!> <div class="text-start"><p class="text-immich-fg dark:text-immich-dark-fg"> </p> <p class="text-sm text-immich-fg/75 dark:text-immich-dark-fg/75"> </p></div></div> <!></div> <div class="dark:text-gray-200 text-immich-dark-gray"><!> <!></div></div>'),$a=L('<section class="my-4"><!> <div class="flex justify-end mt-5"><!></div></section>');function _a(Y,T){$e(T,!0);const s=()=>se(me,"$t",t),[t,Q]=pe();let x=Z(ne([]));Ie(async()=>{await u()});const u=async()=>{j(x,[],!0);const[h,f]=await Promise.all([et({direction:tt.SharedBy}),et({direction:tt.SharedWith})]);for(const w of h)j(x,[...e(x),{user:w,sharedByMe:!0,sharedWithMe:!1,inTimeline:w.inTimeline??!1}],!0);for(const w of f){const d=e(x).findIndex(_=>w.id===_.user.id);d===-1?j(x,[...e(x),{user:w,sharedByMe:!1,sharedWithMe:!0,inTimeline:w.inTimeline??!1}],!0):(e(x)[d].sharedWithMe=!0,e(x)[d].inTimeline=w.inTimeline??!1)}},E=async h=>{if(await ze.showDialog({title:s()("stop_photo_sharing"),prompt:s()("stop_photo_sharing_description",{values:{partner:h.name}})}))try{await Gt({id:h.id}),await u()}catch(w){ge(w,s()("errors.unable_to_remove_partner"))}},F=async()=>{const h=await ze.show(da,{user:T.user});if(h)try{for(const f of h)await Rt({partnerCreateDto:{sharedWithId:f.id}});await u()}catch(f){ge(f,s()("errors.unable_to_add_partners"))}},N=async(h,f)=>{try{await Qt({id:h.user.id,partnerUpdateDto:{inTimeline:f}}),h.inTimeline=f}catch(w){ge(w,s()("errors.unable_to_update_timeline_display_status"))}};var b=$a(),z=n(b);{var S=h=>{var f=De(),w=le(f);Re(w,17,()=>e(x),d=>d.user.id,(d,_,l)=>{var c=va(),y=n(c),p=n(y),C=n(p);Lt(C,{get user(){return e(_).user},size:"md"});var D=o(C,2),H=n(D),v=n(H,!0);i(H);var $=o(H,2),P=n($,!0);i($),i(D),i(p);var m=o(p,2);{var W=B=>{{let ee=r(()=>s()("stop_sharing_photos_with_user"));ar(B,{shape:"round",color:"secondary",variant:"ghost",onclick:()=>E(e(_).user),get icon(){return or},size:"small",get"aria-label"(){return e(ee)}})}};de(m,B=>{e(_).sharedByMe&&B(W)})}i(y);var q=o(y,2),g=n(q);{var te=B=>{var ee=ca(),O=o(le(ee),2);xe(O,{class:"my-4",size:"small",fontWeight:"medium",children:(he,Ge)=>{R();var Be=G();I(Qe=>A(Be,Qe),[()=>s()("shared_with_partner",{values:{partner:e(_).user.name}})]),a(he,Be)},$$slots:{default:!0}});var U=o(O,2);xe(U,{size:"tiny",fontWeight:"medium",children:(he,Ge)=>{R();var Be=G();I(Qe=>A(Be,Qe),[()=>s()("partner_can_access",{values:{partner:e(_).user.name}})]),a(he,Be)},$$slots:{default:!0}});var re=o(U,2),X=n(re),K=n(X);qe(K,{get icon(){return mt}});var oe=o(K);i(X);var ie=o(X,2),ue=n(ie);qe(ue,{get icon(){return mt}});var Me=o(ue);i(ie),i(re),I((he,Ge)=>{A(oe,` ${he??""}`),A(Me,` ${Ge??""}`)},[()=>s()("partner_can_access_assets"),()=>s()("partner_can_access_location")]),a(B,ee)};de(g,B=>{e(_).sharedByMe&&B(te)})}var k=o(g,2);{var J=B=>{var ee=ua(),O=o(le(ee),2);xe(O,{class:"my-4",size:"small",fontWeight:"medium",children:(re,X)=>{R();var K=G();I(oe=>A(K,oe),[()=>s()("shared_from_partner",{values:{partner:e(_).user.name}})]),a(re,K)},$$slots:{default:!0}});var U=o(O,2);{let re=r(()=>s()("show_in_timeline")),X=r(()=>s()("show_in_timeline_setting_description"));ut(U,{get title(){return e(re)},get subtitle(){return e(X)},onToggle:K=>N(e(_),K),get checked(){return e(_).inTimeline},set checked(K){e(_).inTimeline=K}})}a(B,ee)};de(k,B=>{e(_).sharedWithMe&&B(J)})}i(q),i(c),I(()=>{A(v,e(_).user.name),A(P,e(_).user.email)}),a(d,c)}),a(h,f)};de(z,h=>{e(x).length>0&&h(S)})}var V=o(z,2),M=n(V);fe(M,{shape:"round",size:"small",onclick:()=>F(),children:(h,f)=>{R();var w=G();I(d=>A(w,d),[()=>s()("add_partner")]),a(h,w)},$$slots:{default:!0}}),i(V),i(b),a(Y,b),_e(),Q()}var ma=L("<!> <!> <!> <!>",1),pa=L("<!> <!>",1),fa=L("<!> <!> <!> <!>",1),ga=L("<!> <!>",1),ha=L('<!> <section class="my-4"><div class="sm:ms-8 flex flex-col gap-2"><div class="mb-2 flex justify-end"><!></div> <!></div></section>',1);function ba(Y,T){$e(T,!0);const s=()=>se(me,"$t",Q),t=()=>se(Le,"$locale",Q),[Q,x]=pe();let u=Ae(T,"keys",15);const E=async()=>{u(await Ct())},F=l=>{u(u().map(c=>c.id===l.id?l:c))},N=({id:l})=>{u(u().filter(c=>c.id!==l))},b=r(()=>Rr(s())),z=r(()=>e(b).Create);var S=ha(),V=le(S);Dt(V,{onApiKeyCreate:E,onApiKeyUpdate:F,onApiKeyDelete:N});var M=o(V,2),h=n(M),f=n(h),w=n(f);fe(w,{get leadingIcon(){return e(z).icon},shape:"round",size:"small",onclick:()=>e(z).onAction(e(z)),children:(l,c)=>{R();var y=G();I(()=>A(y,e(z).title)),a(l,y)},$$slots:{default:!0}}),i(f);var d=o(f,2);{var _=l=>{ot(l,{class:"mt-4",striped:!0,spacing:"small",size:"small",children:(c,y)=>{var p=ga(),C=le(p);lt(C,{children:(H,v)=>{var $=ma(),P=le($);we(P,{children:(g,te)=>{R();var k=G();I(J=>A(k,J),[()=>s()("name")]),a(g,k)},$$slots:{default:!0}});var m=o(P,2);we(m,{children:(g,te)=>{R();var k=G();I(J=>A(k,J),[()=>s()("permission")]),a(g,k)},$$slots:{default:!0}});var W=o(m,2);we(W,{children:(g,te)=>{R();var k=G();I(J=>A(k,J),[()=>s()("created")]),a(g,k)},$$slots:{default:!0}});var q=o(W,2);we(q,{children:(g,te)=>{R();var k=G();I(J=>A(k,J),[()=>s()("action")]),a(g,k)},$$slots:{default:!0}}),a(H,$)},$$slots:{default:!0}});var D=o(C,2);nt(D,{children:(H,v)=>{var $=De(),P=le($);Re(P,17,u,m=>m.id,(m,W)=>{const q=r(()=>{const{Update:g,Delete:te}=qr(s(),e(W));return{Update:g,Delete:te}});it(m,{children:(g,te)=>{var k=fa(),J=le(k);ke(J,{children:(U,re)=>{R();var X=G();I(()=>A(X,e(W).name)),a(U,X)},$$slots:{default:!0}});var B=o(J,2);ke(B,{children:(U,re)=>{{let X=r(()=>JSON.stringify(e(W).permissions,null,2));xe(U,{class:"font-mono overflow-hidden line-clamp-3",size:"small",get title(){return e(X)},children:(K,oe)=>{R();var ie=G();I(()=>A(ie,e(W).permissions)),a(K,ie)},$$slots:{default:!0}})}},$$slots:{default:!0}});var ee=o(B,2);ke(ee,{children:(U,re)=>{R();var X=G();I(K=>A(X,K),[()=>new Date(e(W).createdAt).toLocaleDateString(t(),at.settings)]),a(U,X)},$$slots:{default:!0}});var O=o(ee,2);ke(O,{class:"flex flex-row flex-wrap justify-center gap-x-2 gap-y-1",children:(U,re)=>{var X=pa(),K=le(X);St(K,{get action(){return e(q).Update},size:"small"});var oe=o(K,2);St(oe,{get action(){return e(q).Delete},size:"small"}),a(U,X)},$$slots:{default:!0}}),a(g,k)},$$slots:{default:!0}})}),a(H,$)},$$slots:{default:!0}}),a(c,p)},$$slots:{default:!0}})};de(d,l=>{u().length>0&&l(_)})}i(h),i(M),be(1,h,()=>Pe,()=>({duration:500})),a(Y,S),_e(),x()}var ya=L('<section class="my-4"><div><form autocomplete="off"><div class="sm:ms-8 flex flex-col gap-4"><!> <!> <!> <!> <div class="flex justify-end"><!></div></div></form></div></section>');function Pa(Y,T){$e(T,!0);const s=()=>se(Ne,"$user",Q),t=()=>se(me,"$t",Q),[Q,x]=pe();let u=ne(Jr(s()));const E=Qr(),F=async()=>{try{const l=await Jt({userUpdateMeDto:{email:u.email,name:u.name}});Object.assign(u,l),ye(Ne,l),Ce.success(t()("saved_profile"))}catch(l){ge(l,t()("errors.unable_to_save_profile"))}};var N=ya(),b=n(N),z=n(b),S=r(()=>Gr(E("submit"))),V=n(z),M=n(V);{let l=r(()=>t()("user_id"));ae(M,{get label(){return e(l)},disabled:!0,children:(c,y)=>{Ve(c,{get value(){return u.id},set value(p){u.id=p}})},$$slots:{default:!0}})}var h=o(M,2);{let l=r(()=>t()("email"));ae(h,{get label(){return e(l)},required:!0,children:(c,y)=>{Ve(c,{type:"email",get value(){return u.email},set value(p){u.email=p}})},$$slots:{default:!0}})}var f=o(h,2);{let l=r(()=>t()("name"));ae(f,{get label(){return e(l)},required:!0,children:(c,y)=>{Ve(c,{get value(){return u.name},set value(p){u.name=p}})},$$slots:{default:!0}})}var w=o(f,2);{let l=r(()=>t()("storage_label"));ae(w,{get label(){return e(l)},disabled:!0,children:(c,y)=>{{let p=r(()=>u.storageLabel||"");Ve(c,{get value(){return e(p)}})}},$$slots:{default:!0}})}var d=o(w,2),_=n(d);fe(_,{shape:"round",type:"submit",size:"small",onclick:()=>F(),children:(l,c)=>{R();var y=G();I(p=>A(y,p),[()=>t()("save")]),a(l,y)},$$slots:{default:!0}}),i(d),i(V),i(z),i(b),i(N),Ue("submit",z,function(...l){e(S)?.apply(this,l)}),be(1,b,()=>Pe,()=>({duration:500})),a(Y,N),_e(),x()}var xa=L("<!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!>",1);function wa(Y,T){$e(T,!0);const s=()=>se(er,"$page",x),t=()=>se(me,"$t",x),Q=()=>se(Ne,"$user",x),[x,u]=pe();let E=Ae(T,"keys",31,()=>ne([])),F=Ae(T,"sessions",31,()=>ne([])),N=Fe.isCallback(globalThis.location)||s().url.searchParams.get(pt.OPEN_SETTING)===je.OAUTH;Ur(Y,{get queryParam(){return pt.IS_OPEN},children:(b,z)=>{var S=xa(),V=le(S);{let v=r(()=>t()("app_settings")),$=r(()=>t()("manage_the_app_settings"));ve(V,{get icon(){return lr},key:"app-settings",get title(){return e(v)},get subtitle(){return e($)},children:(P,m)=>{Rs(P,{})},$$slots:{default:!0}})}var M=o(V,2);{let v=r(()=>t()("account")),$=r(()=>t()("manage_your_account"));ve(M,{get icon(){return nr},key:"account",get title(){return e(v)},get subtitle(){return e($)},children:(P,m)=>{Pa(P,{})},$$slots:{default:!0}})}var h=o(M,2);{let v=r(()=>t()("user_usage_stats")),$=r(()=>t()("user_usage_stats_description"));ve(h,{get icon(){return ir},key:"user-usage-info",get title(){return e(v)},get subtitle(){return e($)},children:(P,m)=>{Ws(P,{})},$$slots:{default:!0}})}var f=o(h,2);{let v=r(()=>t()("api_keys")),$=r(()=>t()("manage_your_api_keys"));ve(f,{get icon(){return dr},key:"api-keys",get title(){return e(v)},get subtitle(){return e($)},children:(P,m)=>{ba(P,{get keys(){return E()},set keys(W){E(W)}})},$$slots:{default:!0}})}var w=o(f,2);{let v=r(()=>t()("authorized_devices")),$=r(()=>t()("manage_your_devices"));ve(w,{get icon(){return cr},key:"authorized-devices",get title(){return e(v)},get subtitle(){return e($)},children:(P,m)=>{ta(P,{get devices(){return F()},set devices(W){F(W)}})},$$slots:{default:!0}})}var d=o(w,2);{let v=r(()=>t()("download_settings")),$=r(()=>t()("download_settings_description"));ve(d,{get icon(){return ur},key:"download-settings",get title(){return e(v)},get subtitle(){return e($)},children:(P,m)=>{us(P,{})},$$slots:{default:!0}})}var _=o(d,2);{let v=r(()=>t()("features")),$=r(()=>t()("features_setting_description"));ve(_,{get icon(){return vr},key:"feature",get title(){return e(v)},get subtitle(){return e($)},children:(P,m)=>{ys(P,{})},$$slots:{default:!0}})}var l=o(_,2);{let v=r(()=>t()("notifications")),$=r(()=>t()("notifications_setting_description"));ve(l,{get icon(){return $r},get key(){return je.NOTIFICATIONS},get title(){return e(v)},get subtitle(){return e($)},children:(P,m)=>{xs(P,{})},$$slots:{default:!0}})}var c=o(l,2);{var y=v=>{{let $=r(()=>t()("oauth")),P=r(()=>t()("manage_your_oauth_connection")),m=r(()=>N||void 0);ve(v,{get icon(){return gr},get key(){return je.OAUTH},get title(){return e($)},get subtitle(){return e(P)},get isOpen(){return e(m)},children:(W,q)=>{aa(W,{get user(){return Q()}})},$$slots:{default:!0}})}};de(c,v=>{ct.value.oauth&&v(y)})}var p=o(c,2);{let v=r(()=>t()("password")),$=r(()=>t()("change_your_password"));ve(p,{get icon(){return _r},key:"password",get title(){return e(v)},get subtitle(){return e($)},children:(P,m)=>{Qs(P,{})},$$slots:{default:!0}})}var C=o(p,2);{let v=r(()=>t()("partner_sharing")),$=r(()=>t()("manage_sharing_with_partners"));ve(C,{get icon(){return mr},key:"partner-sharing",get title(){return e(v)},get subtitle(){return e($)},children:(P,m)=>{_a(P,{get user(){return Q()}})},$$slots:{default:!0}})}var D=o(C,2);{let v=r(()=>t()("user_pin_code_settings")),$=r(()=>t()("user_pin_code_settings_description"));ve(D,{get icon(){return pr},key:"user-pin-code-settings",get title(){return e(v)},get subtitle(){return e($)},autoScrollTo:!0,children:(P,m)=>{ds(P,{})},$$slots:{default:!0}})}var H=o(D,2);{let v=r(()=>t()("user_purchase_settings")),$=r(()=>t()("user_purchase_settings_description"));ve(H,{get icon(){return fr},get key(){return je.PURCHASE_SETTINGS},get title(){return e(v)},get subtitle(){return e($)},autoScrollTo:!0,children:(P,m)=>{Os(P,{})},$$slots:{default:!0}})}a(b,S)},$$slots:{default:!0}}),_e(),u()}const ka=Y=>({KeyboardShortcuts:{title:Y("show_keyboard_shortcuts"),icon:hr,onAction:()=>ze.show(Xr,{})}});function ko(Y,T){$e(T,!0);const s=()=>se(me,"$t",t),[t,Q]=pe(),x=r(()=>ka(s())),u=r(()=>e(x).KeyboardShortcuts);{let E=r(()=>[e(u)]);Yt(Y,{get title(){return T.data.meta.title},get actions(){return e(E)},children:(F,N)=>{Yr(F,{size:"medium",center:!0,children:(b,z)=>{wa(b,{get keys(){return T.data.keys},get sessions(){return T.data.sessions}})},$$slots:{default:!0}})},$$slots:{default:!0}})}_e(),Q()}export{ko as component,wo as universal};
