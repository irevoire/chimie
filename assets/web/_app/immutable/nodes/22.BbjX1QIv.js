import{a as sr,D as ir,p as nr}from"../chunks/Cx5lmlld.js";import{g as lr,$ as dr}from"../chunks/DdY9CyNE.js";import"../chunks/DsnmJJEf.js";import"../chunks/69_IOA4Y.js";import{p as qe,g as e,h as L,f as U,s as d,a as Qe,j as $,u as _,t as V,c as i,r as n,i as cr,P as dt,$ as vr}from"../chunks/BOqQhZBJ.js";import{a as yt,d as ur,s as ae}from"../chunks/BufZg4h2.js";import{f,a as p,c as Re,t as mr}from"../chunks/CnteGC4G.js";import{a as pr}from"../chunks/yWuLE-qO.js";import{i as P}from"../chunks/QS5y7wlf.js";import{s as M,w as fr,G as wt,ab as bt,I as J,a6 as _r,ae as gr,af as ct,aa as hr,bq as yr,bp as wr,d6 as br,dp as xr,dq as $r,bP as Ar,u as be,b1 as Mr,dr as Pr,ds as kr,ag as Vr,ax as Ir,dt as Sr,cL as Cr,bD as Dr}from"../chunks/LrV5ZTyj.js";import{e as Lr,t as vt}from"../chunks/D4fmOnVC.js";import{a as He}from"../chunks/4T_x9N89.js";import{b as Or}from"../chunks/9i_j0jQI.js";import{s as We,c as De,a as Y,p as Tr,d as zr}from"../chunks/B227BkWK.js";import{a as jr,g as Se}from"../chunks/C4XZXykC.js";import{p as xe}from"../chunks/DbKlvrsB.js";import{r as Er}from"../chunks/CrEwRPGF.js";import{h as xt,Q as ut}from"../chunks/BNLYq5HQ.js";import{t as Le,a3 as Fr,ac as Br,h as N,ad as mt,a as Nr,l as Ur,ae as Hr,a7 as Gr}from"../chunks/Jagi0WJL.js";import{g as Rr,b as qr,t as Qr}from"../chunks/BIB7ntQe.js";import{B as Oe,J as Wr,f as Xr}from"../chunks/DeYUhNiz.js";import{B as Ge}from"../chunks/Ydc33-3A.js";import{M as pt}from"../chunks/ClWsMFS7.js";import{C as Jr}from"../chunks/C9fqHGV9.js";import{G as Yr}from"../chunks/BO7gIFhw.js";import{C as Kr,A as ft}from"../chunks/D3TI8oak.js";import{F as Zr,A as ea}from"../chunks/CJ8Y9ewd.js";import{C as ta,a as ra}from"../chunks/Td-V8-DQ.js";import{C as aa,T as oa}from"../chunks/BgebDwf7.js";import{D as sa}from"../chunks/DbL3L5r_.js";import{D as ia}from"../chunks/CAJBNUk5.js";import{A as na}from"../chunks/DYbeYGSx.js";import{a as la}from"../chunks/C2I_EQjW.js";import{R as Ce}from"../chunks/BeWG-__C.js";import{A as da}from"../chunks/DeL_lkPB.js";import{a as ca}from"../chunks/ngppk3MK.js";import{m as ue}from"../chunks/C2jcabg9.js";import{T as _t}from"../chunks/CsIzZJ43.js";import{s as va}from"../chunks/_U16pX41.js";const ua=(async({url:c})=>{const l=await sr(c),b=await lr();return{user:l,meta:{title:b("memory")}}}),Co=Object.freeze(Object.defineProperty({__proto__:null,load:ua},Symbol.toStringTag,{value:"Module"}));function ma(c,l){return c?.bottom===l?.bottom&&c?.top===l?.top&&c?.left===l?.left&&c?.right==l?.right&&c?.threshold===l?.threshold&&c?.root===l?.root}const oe=new Map,pa=(c,l,b)=>{if(!l.isConnected){oe.get(c)?.observer?.unobserve(l);return}const{root:g,threshold:s,top:I="0px",right:O="0px",bottom:C="0px",left:H="0px",onSeparate:D,onIntersect:B}=b,T=`${I} ${O} ${C} ${H}`,S=new IntersectionObserver(A=>{A.sort((se,x)=>se.time-x.time);const G=A.pop();G?.isIntersecting?B?.(G):D?.(l)},{rootMargin:T,threshold:s,root:g});S.observe(l),oe.set(c,{...b,observer:S})};function gt(c,l,b){if(b.disabled){const g=oe.get(c),{observer:s}=g||{};s?.unobserve(l),oe.delete(c)}else oe.set(c,b),pa(c,l,b)}function ht(c,l,b){return gt(c,l,b),{update(g){const s=oe.get(c);s&&(ma(s,g)||gt(c,l,g))},destroy:()=>{const g=oe.get(c),{observer:s}=g||{};s?.unobserve(l),oe.delete(c)}}}function fa(c,l){if(Array.isArray(l)){if(!l.every(g=>g.key))throw new Error("Multiple configurations must specify key");const b=l.map(g=>ht(g.key,c,g));return{update:g=>{for(const[s,I]of g.entries())b[s].update(I)},destroy:()=>{for(const g of b)g.destroy()}}}return ht(l.key||c,c,l)}var _a=f('<img style="display:none" aria-hidden="true"/>'),ga=f('<div id="spinner" class="flex h-full items-center justify-center svelte-mlc33t"><!></div>'),ha=f('<div class="h-full w-full"><img class="h-full w-full rounded-2xl object-contain transition-all" draggable="false"/></div>'),ya=f("<!> <!>",1);function wa(c,l){qe(l,!0);const b=()=>Y(Rr,"$getAltText",g),[g,s]=We();let I=L(""),O=L(!1),C=L(void 0);const H=()=>{$(O,!0),$(I,e(D),!0),l.onImageLoad()};yt(()=>(e(C)?.complete&&H(),e(C)?.addEventListener("load",H),()=>{e(C)?.removeEventListener("load",H)}));const D=_(()=>Le({id:l.asset.id,size:Oe.Preview}));var B=ya(),T=U(B);{var S=x=>{var t=_a();De(t,K=>$(C,K),()=>e(C)),V(()=>M(t,"src",e(D))),p(x,t)};P(T,x=>{e(O)||x(S)})}var A=d(T,2);{var G=x=>{var t=ga(),K=i(t);fr(K,{}),n(t),p(x,t)},se=x=>{var t=ha(),K=i(t);n(t),V($e=>{M(K,"src",e(I)),M(K,"alt",$e)},[()=>b()(l.asset)]),wt(3,t,()=>bt,()=>({duration:xt})),p(x,t)};P(A,x=>{e(O)?e(O)&&x(se,1):x(G)})}p(c,B),Qe(),s()}var ba=f('<div class="h-full w-full bg-pink-9000"><video playsinline="" class="h-full w-full rounded-2xl object-contain transition-all" draggable="false"></video></div>',2);function xa(c,l){qe(l,!0);const b=()=>Y(Br,"$autoPlayVideo",g),[g,s]=We();let I=Tr(l,"videoPlayer",15),O=L(!1);yt(()=>{$(O,!0)});var C=Re(),H=U(C);{var D=B=>{var T=ba(),S=i(T);De(S,A=>I(A),()=>I()),n(T),V((A,G)=>{S.autoplay=b(),M(S,"src",A),M(S,"poster",G),S.muted=l.videoViewerMuted,S.volume=l.videoViewerVolume},[()=>Fr({id:l.asset.id}),()=>Le({id:l.asset.id,size:Oe.Preview})]),wt(3,T,()=>bt,()=>({duration:xt})),p(B,T)};P(H,B=>{e(O)&&B(D)})}p(c,C),Qe(),s()}var $a=f("<!> <!>",1),Aa=f("<!> <!> <!> <!> <!> <!> <!>",1),Ma=f("<!> <!> <!> <!> <!>",1),Pa=f('<div class="sticky top-0 z-1 dark"><!></div>'),ka=f('<p class="text-lg"> </p>'),Va=f('<a class="relative w-full py-2"><span class="absolute start-0 h-0.5 w-full bg-gray-500"></span> <span class="absolute start-0 h-0.5 bg-white"></span></a>'),Ia=f('<div class="w-12.5 dark"><!></div>'),Sa=f('<div class="flex place-content-center place-items-center gap-2 overflow-hidden"><div class="w-12.5 dark"><!></div> <!> <div><p class="text-small"> </p></div> <!></div>'),Ca=f('<div><button type="button"><!></button></div>'),Da=f('<img class="h-full w-full rounded-2xl object-cover" draggable="false"/>'),La=f('<picture><source sizes="min(271px,186px)" type="image/avif"/><source sizes="min(271px,186px)" type="image/webp"/><img class="h-full w-full rounded-2xl object-cover" draggable="false" width="271" height="186"/></picture>'),Oa=f('<div class="absolute bottom-4 end-4 text-start text-white"><p class="uppercase text-xs font-semibold text-gray-200"> </p> <p class="text-xl"> </p></div>'),Ta=f("<!> <!>",1),za=f('<div class="absolute top-1/2 start-0 ms-4 dark"><!></div>'),ja=f('<div class="absolute top-1/2 end-0 me-4 dark"><!></div>'),Ea=f('<img class="h-full w-full rounded-2xl object-cover" draggable="false"/>'),Fa=f('<picture><source sizes="min(271px,186px)" type="image/avif"/><source sizes="min(271px,186px)" type="image/webp"/><img class="h-full w-full rounded-2xl object-cover" draggable="false" width="271" height="186"/></picture>'),Ba=f('<div class="absolute bottom-4 start-4 text-start text-white"><p class="uppercase text-xs font-semibold text-gray-200"> </p> <p class="text-xl"> </p></div>'),Na=f('<!> <!> <section class="overflow-hidden pt-32 md:pt-20"><div class="ms-[-100%] box-border flex h-[calc(100vh-224px)] md:h-[calc(100vh-180px)] w-[300%] items-center justify-center gap-10 overflow-hidden"><div><button type="button" class="relative h-full w-full rounded-2xl"><!> <!></button></div> <div class="main-view relative flex h-full w-[70vw] place-content-center place-items-center rounded-2xl bg-black svelte-lyjzxy"><div class="relative h-full w-full rounded-2xl bg-black"><!> <div><div class="flex items-center"><!> <!></div> <div><!></div></div> <!> <!> <div class="absolute start-8 top-4 text-sm font-medium text-white"><p> </p> <p><!></p></div></div></div> <div><button type="button" class="relative h-full w-full rounded-2xl"><!> <!></button></div></div></section>',1),Ua=f('<section class="bg-immich-dark-gray p-4"><div><!></div> <div id="gallery-memory"><!></div></section>'),Ha=f('<!> <section id="memory-viewer" class="w-full bg-immich-dark-gray"><!></section> <!>',1);function Ga(c,l){qe(l,!0);const b=()=>Y(At,"$isViewing",D),g=()=>Y(nr,"$preferences",D),s=()=>Y(dr,"$t",D),I=()=>Y(mt,"$videoViewerMuted",D),O=()=>Y(Gr,"$memoryLaneTitle",D),C=()=>Y(Ur,"$locale",D),H=()=>Y(Hr,"$videoViewerVolume",D),[D,B]=We();let T=L(void 0),S=L(void 0),A=L(!1),G=L(!0),se=L(!1),x=L(!1),t=L(void 0),K=_(async()=>e(t)?.asset?await Xr({...la.params,id:e(t).asset.id}):void 0),$e=_(()=>e(t)?.memory.assets??[]),$t=_(()=>[...e(t)?.previousMemory?.assets??[],...e(t)?.memory.assets??[],...e(t)?.nextMemory?.assets??[]]),Xe=_(()=>e(t)?.memory.isSaved),Je=L(0);const{isViewing:At}=ca,Ae=cr({width:0,height:0}),Mt=_(()=>({height:Ae.height,width:Ae.width-32})),Z=new da;let z=L(void 0),ee=L(void 0);const Ye=r=>`?${ut.ID}=${r.id}`,Me=async r=>{if(b())return r;r&&await Se(Ye(r))},Pt=r=>{if(r.isVideo){const m=r.duration.split(":").map(Number),w=(m[0]*3600+m[1]*60+m[2])*1e3;$(z,new _t(0,{duration:(R,ie)=>ie?w*(ie-R):0}),!0)}else $(z,new _t(0,{duration:(m,w)=>w?g().memories.duration*1e3*(w-m):0}),!0)},Pe=()=>Me(e(t)?.next?.asset),Te=()=>Me(e(t)?.previous?.asset),kt=()=>Me(e(t)?.nextMemory?.assets[0]),Vt=()=>Me(e(t)?.previousMemory?.assets[0]),It=async()=>Se(Ce.photos()),St=()=>Z.selectAssets(e(t)?.memory.assets.map(r=>Qr(r))||[]),te=async(r,m)=>{if(e(z))switch(m){case"play":{try{$(x,!1),await e(ee)?.play(),await e(z).set(1)}catch(w){console.error(`handleAction[${r}] videoPlayer play problem: ${w}`),$(x,!0),await e(z).set(0)}break}case"pause":{$(x,!0),e(ee)?.pause(),await e(z).set(e(z).current);break}case"reset":{$(x,!1),e(ee)?.pause(),await e(z).set(0);break}}},Ct=async r=>{e(z)&&r===1&&!e(x)&&await(e(t)?.next?Pe():N(te("handleProgressLast","pause")))},Dt=r=>!e(z)||e(t)?.assetIndex===void 0?0:r<e(t)?.assetIndex?100:r>e(t)?.assetIndex?0:e(z).current*100,Ke=r=>{e(t)&&(ue.hideAssetsFromMemory(r),pe(xe))},Lt=async()=>{e(t)&&(await ue.deleteAssetFromMemory(e(t).asset.id),pe(xe))},Ot=async()=>{e(t)&&(await ue.deleteMemory(e(t).memory.id),vt.success(s()("removed_memory")),pe(xe))},Tt=async()=>{if(!e(t))return;const r=!e(t).memory.isSaved;await ue.updateMemorySaved(e(t).memory.id,r),vt.success(r?s()("added_to_favorites"):s()("removed_from_favorites")),pe(xe)},zt=()=>{$(A,!0),N(te("galleryInView","pause"))},jt=()=>{$(A,!1),e(G)||N(te("galleryOutOfView","play")),$(G,!1)},Et=r=>{const m=r?.params?.assetId??r?.url.searchParams.get(ut.ID)??void 0;return ue.getMemoryAsset(m)},pe=r=>{if(ue.memories.length===0)return N(Se(Ce.photos()));$(t,Et(r),!0),e(t)&&Pt(e(t).asset),$(se,!1)},Ze=()=>{N(te("resetAndPlay","reset")),N(te("resetAndPlay","play"))},et=()=>{const r=e(t)&&e(t).asset.isVideo,m=r&&!e(ee);e(se)||m||(b()?N(te("initPlayer[AssetViewOpen]","pause")):r&&Ze(),$(se,!0))};jr(({from:r,to:m})=>{ue.ready().then(()=>{let w=null;m?.params?.assetId?w=m:r?.params?.assetId?w=r:w=xe,pe(w),et()},w=>{console.error(`Error loading memories: ${w}`)})}),dt(()=>{e(z)&&N(Ct(e(z).current))}),dt(()=>{e(ee)&&(e(ee).muted=I(),et())});var tt=Ha();He(vr,(r,m)=>va?.(r,m),()=>b()?[]:[{shortcut:{key:"ArrowRight"},onShortcut:()=>Pe()},{shortcut:{key:"d"},onShortcut:()=>Pe()},{shortcut:{key:"ArrowLeft"},onShortcut:()=>Te()},{shortcut:{key:"a"},onShortcut:()=>Te()},{shortcut:{key:"Escape"},onShortcut:()=>It()}]);var rt=U(tt);{var Ft=r=>{var m=Pa(),w=i(m);na(w,{forceDark:!0,get assets(){return Z.selectedAssets},clearSelect:()=>Nr(Z),children:(R,ie)=>{var F=Ma(),ne=U(F);Kr(ne,{});var j=d(ne,2);{let le=_(()=>s()("select_all"));J(j,{shape:"round",color:"secondary",variant:"ghost",get"aria-label"(){return e(le)},get icon(){return _r},onclick:St})}var q=d(j,2);{let le=_(()=>s()("add_to"));Ge(q,{get icon(){return gr},get title(){return e(le)},children:(ge,je)=>{var Q=$a(),re=U(Q);ft(re,{});var de=d(re,2);ft(de,{shared:!0}),p(ge,Q)},$$slots:{default:!0}})}var _e=d(q,2);Zr(_e,{get removeFavorite(){return Z.isAllFavorite}});var ze=d(_e,2);{let le=_(()=>s()("menu"));Ge(ze,{get icon(){return ct},get title(){return e(le)},children:(ge,je)=>{var Q=Aa(),re=U(Q);ia(re,{menuItem:!0});var de=d(re,2);ta(de,{menuItem:!0});var ce=d(de,2);aa(ce,{menuItem:!0});var he=d(ce,2);ra(he,{menuItem:!0});var me=d(he,2);ea(me,{menuItem:!0,get unarchive(){return Z.isAllArchived},onArchive:Ke});var ye=d(me,2);{var Ee=we=>{oa(we,{menuItem:!0})};P(ye,we=>{g().tags.enabled&&Z.isAllUserOwned&&we(Ee)})}var ke=d(ye,2);sa(ke,{menuItem:!0,onAssetDelete:Ke}),p(ge,Q)},$$slots:{default:!0}})}p(R,F)},$$slots:{default:!0}}),n(m),p(r,m)};P(rt,r=>{Z.selectionActive&&r(Ft)})}var fe=d(rt,2),Bt=i(fe);{var Nt=r=>{var m=Na(),w=U(m);Jr(w,{onClose:()=>Se(Ce.photos()),forceDark:!0,multiRow:!0,leading:a=>{var v=Re(),u=U(v);{var h=y=>{var k=ka(),W=i(k,!0);n(k),V(Ie=>ae(W,Ie),[()=>O()(e(t).memory)]),p(y,k)};P(u,y=>{e(t)&&y(h)})}p(a,v)},children:(a,v)=>{var u=Sa(),h=i(u),y=i(h);{let E=_(()=>e(x)?s()("play_memories"):s()("pause_memories")),X=_(()=>e(x)?yr:wr);J(y,{shape:"round",variant:"ghost",color:"secondary",get"aria-label"(){return e(E)},get icon(){return e(X)},onclick:()=>N(te("PlayPauseButtonClick",e(x)?"play":"pause"))})}n(h);var k=d(h,2);Lr(k,19,()=>e(t).memory.assets,E=>E.id,(E,X,Ne)=>{var ve=Va(),Ue=d(i(ve),2);let lt;n(ve),V((rr,ar,or)=>{M(ve,"href",rr),M(ve,"aria-label",ar),lt=hr(Ue,"",lt,or)},[()=>Ye(e(X)),()=>s()("view"),()=>({width:`${Dt(e(Ne))}%`})]),p(E,ve)});var W=d(k,2),Ie=i(W),Kt=i(Ie);n(Ie),n(W);var Zt=d(W,2);{var er=E=>{var X=Ia(),Ne=i(X);{let ve=_(()=>I()?s()("unmute_memories"):s()("mute_memories")),Ue=_(()=>I()?Pr:kr);J(Ne,{shape:"round",variant:"ghost",color:"secondary",get"aria-label"(){return e(ve)},get icon(){return e(Ue)},onclick:()=>zr(mt,!I())})}n(X),p(E,X)},tr=_(()=>e($e).some(E=>E.type===Wr.Video));P(Zt,E=>{e(tr)&&E(er)})}n(u),V((E,X)=>ae(Kt,`${E??""}/${X??""}`),[()=>(e(t).assetIndex+1).toLocaleString(C()),()=>e(t).memory.assets.length.toLocaleString(C())]),p(a,u)},$$slots:{leading:!0,default:!0}});var R=d(w,2);{var ie=o=>{var a=Ca();let v;var u=i(a);u.__click=()=>e(S)?.scrollIntoView({behavior:"smooth"});var h=i(u);{let y=_(()=>s()("hide_gallery"));J(h,{shape:"round",color:"secondary",get"aria-label"(){return e(y)},get icon(){return Sr},onclick:()=>{}})}n(u),n(a),V(()=>{v=be(a,1,"fixed top-10 start-1/2 -translate-x-1/2 transition-opacity dark z-1",null,v,{"opacity-0":!e(A),"opacity-100":e(A)}),u.disabled=!e(A)}),p(o,a)};P(R,o=>{e(A)&&o(ie)})}var F=d(R,2),ne=i(F),j=i(ne),q=i(j);q.__click=Vt;var _e=i(q);{var ze=o=>{var a=Da();V((v,u)=>{M(a,"src",v),M(a,"alt",u)},[()=>Le({id:e(t).previousMemory.assets[0].id,size:Oe.Preview}),()=>s()("previous_memory")]),p(o,a)},le=o=>{var a=La(),v=i(a);M(v,"srcset","/_app/immutable/assets/no-thumbnail.N5o339_p.avif 271w");var u=d(v);M(u,"srcset","/_app/immutable/assets/no-thumbnail.CuO55w5X.webp 271w");var h=d(u);M(h,"src","/_app/immutable/assets/no-thumbnail.BE_9d36v.png"),n(a),V(y=>M(h,"alt",y),[()=>s()("previous_memory")]),p(o,a)};P(_e,o=>{e(t).previousMemory&&e(t).previousMemory.assets.length>0?o(ze):o(le,!1)})}var ge=d(_e,2);{var je=o=>{var a=Oa(),v=i(a),u=i(v,!0);n(v);var h=d(v,2),y=i(h,!0);n(h),n(a),V((k,W)=>{ae(u,k),ae(y,W)},[()=>s()("previous"),()=>O()(e(t).previousMemory)]),p(o,a)};P(ge,o=>{e(t).previousMemory&&o(je)})}n(q),n(j);var Q=d(j,2),re=i(Q),de=i(re);br(de,()=>e(t).asset.id,o=>{var a=Re(),v=U(a);{var u=y=>{xa(y,{get asset(){return e(t).asset},get videoViewerMuted(){return I()},get videoViewerVolume(){return H()},get videoPlayer(){return e(ee)},set videoPlayer(k){$(ee,k,!0)}})},h=y=>{wa(y,{get asset(){return e(t).asset},onImageLoad:Ze})};P(v,y=>{e(t).asset.isVideo?y(u):y(h,!1)})}p(o,a)});var ce=d(de,2);let he;var me=i(ce),ye=i(me);{let o=_(()=>e(Xe)?Vr:Ir),a=_(()=>e(Xe)?s()("unfavorite"):s()("favorite"));J(ye,{get icon(){return e(o)},shape:"round",variant:"ghost",color:"secondary",get"aria-label"(){return e(a)},onclick:()=>Tt(),class:"w-12 h-12"})}var Ee=d(ye,2);{let o=_(()=>s()("menu"));Ge(Ee,{get icon(){return ct},get title(){return e(o)},onclick:()=>N(te("ContextMenuClick","pause")),direction:"left",size:"medium",align:"bottom-right",children:(a,v)=>{var u=Ta(),h=U(u);{let k=_(()=>s()("remove_memory"));pt(h,{onClick:()=>Ot(),get text(){return e(k)},get icon(){return xr}})}var y=d(h,2);{let k=_(()=>s()("remove_photo_from_memory"));pt(y,{onClick:()=>Lt(),get text(){return e(k)},get icon(){return $r}})}p(a,u)},$$slots:{default:!0}})}n(me);var ke=d(me,2),we=i(ke);{let o=_(()=>Ce.photos({at:e(t).asset.id})),a=_(()=>s()("view_in_timeline"));J(we,{get href(){return e(o)},get icon(){return Ar},get"aria-label"(){return e(a)},color:"secondary",variant:"ghost",shape:"round"})}n(ke),n(ce);var at=d(ce,2);{var Gt=o=>{var a=za(),v=i(a);{let u=_(()=>s()("previous_memory"));J(v,{shape:"round",get"aria-label"(){return e(u)},get icon(){return Cr},variant:"ghost",color:"secondary",size:"giant",onclick:Te})}n(a),p(o,a)};P(at,o=>{e(t).previous&&o(Gt)})}var ot=d(at,2);{var Rt=o=>{var a=ja(),v=i(a);{let u=_(()=>s()("next_memory"));J(v,{shape:"round",get"aria-label"(){return e(u)},get icon(){return Dr},variant:"ghost",color:"secondary",size:"giant",onclick:Pe})}n(a),p(o,a)};P(ot,o=>{e(t).next&&o(Rt)})}var st=d(ot,2),Fe=i(st),qt=i(Fe,!0);n(Fe);var it=d(Fe,2),Qt=i(it);pr(Qt,()=>e(K),null,(o,a)=>{var v=mr();V(()=>ae(v,`${(e(a)?.exifInfo?.city||"")??""}
                  ${(e(a)?.exifInfo?.country||"")??""}`)),p(o,v)}),n(it),n(st),n(re),n(Q);var Be=d(Q,2),Ve=i(Be);Ve.__click=kt;var nt=i(Ve);{var Wt=o=>{var a=Ea();V((v,u)=>{M(a,"src",v),M(a,"alt",u)},[()=>Le({id:e(t).nextMemory.assets[0].id,size:Oe.Preview}),()=>s()("next_memory")]),p(o,a)},Xt=o=>{var a=Fa(),v=i(a);M(v,"srcset","/_app/immutable/assets/no-thumbnail.N5o339_p.avif 271w");var u=d(v);M(u,"srcset","/_app/immutable/assets/no-thumbnail.CuO55w5X.webp 271w");var h=d(u);M(h,"src","/_app/immutable/assets/no-thumbnail.BE_9d36v.png"),n(a),V(y=>M(h,"alt",y),[()=>s()("next_memory")]),p(o,a)};P(nt,o=>{e(t).nextMemory&&e(t).nextMemory.assets.length>0?o(Wt):o(Xt,!1)})}var Jt=d(nt,2);{var Yt=o=>{var a=Ba(),v=i(a),u=i(v,!0);n(v);var h=d(v,2),y=i(h,!0);n(h),n(a),V((k,W)=>{ae(u,k),ae(y,W)},[()=>s()("up_next"),()=>O()(e(t).nextMemory)]),p(o,a)};P(Jt,o=>{e(t).nextMemory&&o(Yt)})}n(Ve),n(Be),n(ne),n(F),V(o=>{be(j,1,`h-1/2 w-[20vw] rounded-2xl ${e(t).previousMemory?"opacity-25 hover:opacity-70":"opacity-0"}`),q.disabled=!e(t).previousMemory,he=be(ce,1,"absolute bottom-0 end-0 p-2 transition-all flex h-full justify-between flex-col items-end gap-2 dark",null,he,{"opacity-0":e(A),"opacity-100":!e(A)}),ae(qt,o),be(Be,1,`h-1/2 w-[20vw] rounded-2xl ${e(t).nextMemory?"opacity-25 hover:opacity-70":"opacity-0"}`),Ve.disabled=!e(t).nextMemory},[()=>qr(e(t).memory.assets[0].localDateTime).toLocaleString(ir.DATE_FULL,{locale:C()})]),Or(F,"clientHeight",o=>$(Je,o)),p(r,m)};P(Bt,r=>{e(t)&&r(Nt)})}n(fe),De(fe,r=>$(S,r),()=>e(S)),He(fe,(r,m)=>Er?.(r,m),()=>({height:r,width:m})=>(Ae.height=r,Ae.width=m));var Ut=d(fe,2);{var Ht=r=>{var m=Ua(),w=i(m);let R;var ie=i(w);{let j=_(()=>s()("show_gallery"));J(ie,{shape:"round",color:"secondary",get"aria-label"(){return e(j)},get icon(){return Mr},onclick:()=>e(T)?.scrollIntoView({behavior:"smooth"})})}n(w);var F=d(w,2),ne=i(F);Yr(ne,{get assets(){return e($e)},get viewerAssets(){return e($t)},get viewport(){return e(Mt)},get assetInteraction(){return Z},get slidingWindowOffset(){return e(Je)},arrowNavigation:!1}),n(F),He(F,(j,q)=>fa?.(j,q),()=>({onIntersect:zt,onSeparate:jt,bottom:"-200px"})),De(F,j=>$(T,j),()=>e(T)),n(m),V(()=>R=be(w,1,"sticky mb-10 flex place-content-center place-items-center transition-all dark",null,R,{"opacity-0":e(A),"opacity-100":!e(A)})),p(r,m)};P(Ut,r=>{e(t)&&r(Ht)})}p(c,tt),Qe(),B()}ur(["click"]);function Do(c){Ga(c,{})}export{Do as component,Co as universal};
