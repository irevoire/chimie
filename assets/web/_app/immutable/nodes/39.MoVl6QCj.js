const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["_app/immutable/chunks/BEfn6cqG.js","_app/immutable/chunks/DsnmJJEf.js","_app/immutable/chunks/BufZg4h2.js","_app/immutable/chunks/BOqQhZBJ.js","_app/immutable/chunks/DIeogL5L.js","_app/immutable/chunks/CnteGC4G.js","_app/immutable/chunks/QS5y7wlf.js","_app/immutable/chunks/D4fmOnVC.js","_app/immutable/chunks/DeYUhNiz.js","_app/immutable/chunks/B_VXSWsl.js","_app/immutable/chunks/B227BkWK.js","_app/immutable/chunks/LrV5ZTyj.js","_app/immutable/chunks/C4XZXykC.js","_app/immutable/chunks/BUApaBEI.js","_app/immutable/assets/Logo.BzPWps5k.css","_app/immutable/chunks/4T_x9N89.js","_app/immutable/chunks/CKQ4VlI3.js","_app/immutable/chunks/De1sTUmb.js","_app/immutable/chunks/BNLYq5HQ.js","_app/immutable/chunks/Jagi0WJL.js","_app/immutable/chunks/C2I_EQjW.js","_app/immutable/chunks/DbKlvrsB.js","_app/immutable/chunks/ytu5q_IM.js","_app/immutable/chunks/BeWG-__C.js","_app/immutable/chunks/DdY9CyNE.js","_app/immutable/chunks/Cx5lmlld.js","_app/immutable/chunks/_U16pX41.js","_app/immutable/chunks/Bp2HQ4kn.js","_app/immutable/chunks/CT-ELVN-.js","_app/immutable/chunks/ClWsMFS7.js","_app/immutable/chunks/Bz1BELIr.js","_app/immutable/chunks/eLOR7anR.js","_app/immutable/chunks/Clv0aeC8.js","_app/immutable/chunks/DFvk55M8.js","_app/immutable/chunks/DsCc9Mx1.js","_app/immutable/chunks/CsUlL5WR.js","_app/immutable/chunks/CYAb_6oJ.js","_app/immutable/chunks/CS-10t6W.js","_app/immutable/chunks/BihPMor6.js","_app/immutable/chunks/C20f7eOz.js","_app/immutable/chunks/Ze2c3aZz.js","_app/immutable/chunks/Vqhp0wrh.js","_app/immutable/chunks/BIB7ntQe.js","_app/immutable/chunks/BjCgVxgW.js","_app/immutable/chunks/DnqqNi3p.js","_app/immutable/chunks/D5h9ps2j.js","_app/immutable/chunks/CH9-R8qO.js","_app/immutable/chunks/C9pIfr-B.js","_app/immutable/chunks/BbGcRfD-.js","_app/immutable/chunks/BHgwLGQu.js","_app/immutable/chunks/69_IOA4Y.js","_app/immutable/chunks/CMtyP6CA.js","_app/immutable/chunks/CRYXttfP.js","_app/immutable/chunks/9i_j0jQI.js","_app/immutable/chunks/1WjNB9m1.js","_app/immutable/chunks/Bc5ULZvy.js","_app/immutable/chunks/C0Ca_l_S.js","_app/immutable/chunks/LRhZRw-S.js","_app/immutable/chunks/CBNU4HUx.js","_app/immutable/chunks/DzmAA-7p.js","_app/immutable/chunks/BJT5MMCK.js","_app/immutable/assets/Input.DUYXNfxO.css","_app/immutable/chunks/DHEjuV7w.js","_app/immutable/chunks/rybNiN9i.js","_app/immutable/chunks/CaDSsDA9.js","_app/immutable/chunks/FIvvbHQR.js","_app/immutable/chunks/yWuLE-qO.js","_app/immutable/chunks/izWpGtDw.js","_app/immutable/chunks/ngppk3MK.js","_app/immutable/chunks/BSBkdVh4.js","_app/immutable/chunks/BTHsrYEL.js","_app/immutable/chunks/y_IyUkeW.js","_app/immutable/chunks/Ydc33-3A.js","_app/immutable/chunks/ClLqiWoK.js","_app/immutable/chunks/BmZTbFl5.js","_app/immutable/chunks/BCL4P6ef.js","_app/immutable/chunks/SuizJy8Y.js","_app/immutable/chunks/Di6OVBka.js","_app/immutable/chunks/B6A-PVC5.js","_app/immutable/chunks/BXaFREg4.js","_app/immutable/assets/Textarea.M6eTxvbo.css","_app/immutable/assets/activity-viewer.CwxlvmcY.css","_app/immutable/chunks/B1PyaZbq.js","_app/immutable/assets/thumbnail.Di7rqjOL.css","_app/immutable/chunks/ghntbn61.js","_app/immutable/chunks/6ckOa7Ax.js","_app/immutable/chunks/Bj7pQby1.js","_app/immutable/chunks/Dj0AsE1j.js","_app/immutable/chunks/zKTaOrsI.js","_app/immutable/chunks/DxfhPdFw.js","_app/immutable/chunks/CaTmVaxL.js","_app/immutable/chunks/CsIzZJ43.js","_app/immutable/chunks/8PJ7VpFA.js","_app/immutable/chunks/BzKamodV.js","_app/immutable/chunks/D-O87UL4.js","_app/immutable/chunks/o4H9mija.js","_app/immutable/assets/asset-viewer.CSooJwqO.css"])))=>i.map(i=>d[i]);
import{a as ot}from"../chunks/Cx5lmlld.js";import{g as nt,$ as ye}from"../chunks/DdY9CyNE.js";import{bi as dt,X as ct,f as ut,bj as vt,j as Ae,a6 as Le}from"../chunks/DeYUhNiz.js";import"../chunks/DsnmJJEf.js";import{c as u,g as e,u as n,s as h,f as te,b as mt,r as c,t as g,p as ke,n as N,a as $e,h as Je,i as qe,j as pe,$ as Qe}from"../chunks/BOqQhZBJ.js";import{d as ft,s as v,a as gt,b as ht}from"../chunks/BufZg4h2.js";import{f as X,c as _e,s as _t,a as i,t as P}from"../chunks/CnteGC4G.js";import{i as de}from"../chunks/QS5y7wlf.js";import{a as be,T as Ce,u as Ne,s as he,dw as xt,cF as pt,aG as bt,dx as wt,dy as yt,cz as kt,dz as $t,dA as It,dB as Pt,ag as St,cN as Ye,B as ee,X as Ue,V as Fe,dC as At,I as Ee,dD as zt,a9 as Dt,d6 as Mt,dE as Tt,cL as Ot,bD as Bt,dF as Vt}from"../chunks/LrV5ZTyj.js";import{a as et}from"../chunks/4T_x9N89.js";import{p as Ze,a as le,s as Ie,e as Ct}from"../chunks/B227BkWK.js";import{g as ze}from"../chunks/C4XZXykC.js";import{p as De}from"../chunks/DbKlvrsB.js";import{U as Nt}from"../chunks/CwTmTzRk.js";import{_ as Ft}from"../chunks/BNLYq5HQ.js";import{a as tt}from"../chunks/yWuLE-qO.js";import{e as jt,t as He,h as Rt}from"../chunks/D4fmOnVC.js";import{U as Ke,af as We,t as Lt,l as at,h as Ut,g as Et,f as Zt,a6 as Ht}from"../chunks/Jagi0WJL.js";import{t as Kt,g as Wt,c as Me,b as Te}from"../chunks/BIB7ntQe.js";import{S as Oe,P as Xt}from"../chunks/De1sTUmb.js";import{b as Xe,a as Gt}from"../chunks/C2I_EQjW.js";import{a as we}from"../chunks/ngppk3MK.js";import{s as Ge}from"../chunks/mpq9N9gX.js";import{s as st}from"../chunks/_U16pX41.js";import{f as xe}from"../chunks/D5h9ps2j.js";import{M as Jt,a as qt,H as Qt,m as Be}from"../chunks/C20f7eOz.js";import{S as Yt}from"../chunks/AHWy_irw.js";import{R as Ve}from"../chunks/BeWG-__C.js";const ea=(async({url:B})=>{await ot(B);const t=await dt(),s=await nt();return{duplicates:t,meta:{title:s("duplicates")}}}),Ha=Object.freeze(Object.defineProperty({__proto__:null,load:ea},Symbol.toStringTag,{value:"Module"}));var ta=X('<div><!> <div class="justify-self-end text-end rounded px-1 transition-colors w-full overflow-hidden"><!></div></div>');function ue(B,t){let s=Ze(t,"borderBottom",3,!0),z=Ze(t,"highlight",3,!1);var F=ta();let M;var ae=u(F);{let G=n(()=>z()?"text-primary/75":"");be(ae,{get icon(){return t.icon},size:"18",get class(){return`text-dark/25 ${e(G)??""}`}})}var ie=h(ae,2),m=u(ie);{let G=n(()=>z()?"semi-bold":"normal"),k=n(()=>`${z()?"text-primary":""} text-ellipsis w-full overflow-hidden`);Ce(m,{size:"tiny",get fontWeight(){return e(G)},get class(){return e(k)},children:(w,V)=>{var D=_e(),R=te(D);_t(R,()=>t.children??mt),i(w,D)},$$slots:{default:!0}})}c(ie),c(F),g(()=>{M=Ne(F,1,"grid grid-cols-[25px_1fr] w-full px-1 py-0.5",null,M,{"border-b":s()}),he(F,"title",t.title)}),i(B,F)}var aa=X('<div class="absolute bottom-2 start-2"><!></div>'),sa=X('<div class="bg-immich-primary/90 px-2 py-1 rounded-xl text-xs text-white"> </div>'),ra=X('<div class="bg-immich-primary/90 px-2 py-1 my-0.5 rounded-xl text-xs text-white"><div class="flex items-center justify-center"><div class="me-1"> </div> <!></div></div>'),la=X('<div class="min-w-60 transition-colors border rounded-lg flex-1"><div class="relative w-full"><button type="button" class="block relative w-full"><img class="h-60 object-cover w-full rounded-t-md" draggable="false"/> <!> <div> </div> <div class="absolute top-2 end-3"><!> <!></div></button> <button type="button" class="absolute rounded-full top-1 start-1 text-gray-200 p-2 hover:text-white bg-black/35 hover:bg-black/50"><!></button></div> <div><!> <!> <!> <!> <!> <!> <!> <!></div></div>');function ia(B,t){ke(t,!0);const s=()=>le(ye,"$t",M),z=()=>le(at,"$locale",M),F=()=>le(Wt,"$getAltText",M),[M,ae]=Ie();let ie=n(()=>!!t.asset.libraryId),m=n(()=>JSON.stringify(t.asset,null,2)),G=n(()=>[t.asset.exifInfo?.city,t.asset.exifInfo?.state,t.asset.exifInfo?.country].filter(Boolean)),k=n(()=>t.asset.exifInfo?.timeZone),w=n(()=>e(k)&&t.asset.exifInfo?.dateTimeOriginal?Me(t.asset.exifInfo.dateTimeOriginal,e(k)):Te(t.asset.localDateTime));const V=a=>new Set(t.assets.map(r=>a(r))).size>1,D=n(()=>({fileName:V(a=>a.originalFileName),fileSize:V(a=>Ke(a)),resolution:V(a=>We(a)),originalPath:V(a=>a.originalPath??s()("unknown")),date:V(a=>{const r=a.exifInfo?.timeZone;return(r&&a.exifInfo?.dateTimeOriginal?Me(a.exifInfo.dateTimeOriginal,r):Te(a.localDateTime))?.toLocaleString({month:"short",day:"numeric",year:"numeric"},{locale:z()})}),time:V(a=>{const r=a.exifInfo?.timeZone;return(r&&a.exifInfo?.dateTimeOriginal?Me(a.exifInfo.dateTimeOriginal,r):Te(a.localDateTime))?.toLocaleString({hour:"numeric",minute:"2-digit",second:"2-digit",timeZoneName:r?"shortOffset":void 0},{locale:z()})}),location:V(a=>[a.exifInfo?.city,a.exifInfo?.state,a.exifInfo?.country].filter(Boolean).join(", ")||"unknown")})),R=(a,r)=>r&&a.endsWith(r)?a.slice(0,-(r.length+1)):a;function ce(a,r=50){if(a.length<=r)return a;const x=Math.floor(r/2)-2,d=Math.floor(r/2)-2;return a.slice(0,Math.max(0,x))+"..."+a.slice(Math.max(0,a.length-d))}var W=la(),J=u(W),L=u(J);L.__click=()=>t.onSelectAsset(t.asset);var se=u(L),re=h(se,2);{var ve=a=>{var r=aa(),x=u(r);be(x,{get icon(){return St},size:"24",class:"text-white"}),c(r),i(a,r)};de(re,a=>{t.asset.isFavorite&&a(ve)})}var q=h(re,2),me=u(q,!0);c(q);var fe=h(q,2),Q=u(fe);{var _=a=>{var r=sa(),x=u(r,!0);c(r),g(d=>v(x,d),[()=>s()("external")]),i(a,r)};de(Q,a=>{e(ie)&&a(_)})}var p=h(Q,2);{var A=a=>{var r=ra(),x=u(r),d=u(x),I=u(d,!0);c(d);var O=h(d,2);be(O,{get icon(){return Ye},size:"18"}),c(x),c(r),g(()=>v(I,t.asset.stack.assetCount)),i(a,r)};de(p,a=>{t.asset.stack?.assetCount&&a(A)})}c(fe),c(L);var S=h(L,2);S.__click=()=>t.onViewAsset(t.asset);var T=u(S);{let a=n(()=>s()("view"));be(T,{get"aria-label"(){return e(a)},get icon(){return xt},flipped:!0,size:"18"})}c(S),c(J);var U=h(J,2),j=u(U);{let a=n(()=>s()("file_name_with_value",{values:{file_name:t.asset.originalFileName??""}}));ue(j,{get icon(){return pt},get highlight(){return e(D).fileName},get title(){return e(a)},children:(r,x)=>{N();var d=P();g(()=>v(d,t.asset.originalFileName)),i(r,d)},$$slots:{default:!0}})}var oe=h(j,2);{let a=n(()=>s()("full_path",{values:{path:t.asset.originalPath}}));ue(oe,{get icon(){return bt},get highlight(){return e(D).originalPath},get title(){return e(a)},children:(r,x)=>{N();var d=P();g(I=>v(d,I),[()=>ce(R(t.asset.originalPath,t.asset.originalFileName))||s()("unknown")]),i(r,d)},$$slots:{default:!0}})}var E=h(oe,2);{let a=n(()=>s()("file_size"));ue(E,{get icon(){return wt},get highlight(){return e(D).fileSize},get title(){return e(a)},children:(r,x)=>{N();var d=P();g(I=>v(d,I),[()=>Ke(t.asset)]),i(r,d)},$$slots:{default:!0}})}var l=h(E,2);{let a=n(()=>s()("resolution"));ue(l,{get icon(){return yt},get highlight(){return e(D).resolution},get title(){return e(a)},children:(r,x)=>{N();var d=P();g(I=>v(d,I),[()=>We(t.asset)]),i(r,d)},$$slots:{default:!0}})}var o=h(l,2);{let a=n(()=>s()("date"));ue(o,{get icon(){return kt},get highlight(){return e(D).date},get title(){return e(a)},children:(r,x)=>{var d=_e(),I=te(d);{var O=f=>{var $=P();g(H=>v($,H),[()=>e(w).toLocaleString({month:"short",day:"numeric",year:"numeric"},{locale:z()})]),i(f,$)},C=f=>{var $=P();g(H=>v($,H),[()=>s()("unknown")]),i(f,$)};de(I,f=>{e(w)?f(O):f(C,!1)})}i(r,d)},$$slots:{default:!0}})}var b=h(o,2);{let a=n(()=>s()("time"));ue(b,{get icon(){return $t},get highlight(){return e(D).time},get title(){return e(a)},children:(r,x)=>{var d=_e(),I=te(d);{var O=f=>{var $=P();g(H=>v($,H),[()=>e(w).toLocaleString({hour:"numeric",minute:"2-digit",second:"2-digit",timeZoneName:e(k)?"shortOffset":void 0},{locale:z()})]),i(f,$)},C=f=>{var $=P();g(H=>v($,H),[()=>s()("unknown")]),i(f,$)};de(I,f=>{e(w)?f(O):f(C,!1)})}i(r,d)},$$slots:{default:!0}})}var y=h(b,2);{let a=n(()=>s()("location"));ue(y,{get icon(){return It},get highlight(){return e(D).location},get title(){return e(a)},children:(r,x)=>{var d=_e(),I=te(d);{var O=f=>{var $=P();g(H=>v($,H),[()=>e(G).join(", ")]),i(f,$)},C=f=>{var $=P();g(H=>v($,H),[()=>s()("unknown")]),i(f,$)};de(I,f=>{e(G).length>0?f(O):f(C,!1)})}i(r,d)},$$slots:{default:!0}})}var Z=h(y,2);{let a=n(()=>s()("albums"));ue(Z,{get icon(){return Pt},borderBottom:!1,get title(){return e(a)},children:(r,x)=>{var d=_e(),I=te(d);tt(I,()=>ct({assetId:t.asset.id}),O=>{var C=P();g(f=>v(C,f),[()=>s()("scanning_for_album")]),i(O,C)},(O,C)=>{var f=P();g($=>v(f,$),[()=>s()("in_albums",{values:{count:e(C).length}})]),i(O,f)}),i(r,d)},$$slots:{default:!0}})}c(U),c(W),g((a,r,x,d,I)=>{he(L,"aria-pressed",t.isSelected),he(L,"aria-label",a),he(se,"src",r),he(se,"alt",x),he(se,"title",e(m)),Ne(q,1,`absolute bottom-1 end-3 px-4 py-1 rounded-xl text-xs transition-colors ${t.isSelected?"bg-green-400/90":"bg-red-300/90"} text-black`),v(me,d),he(S,"title",I),Ne(U,1,`grid place-items-start gap-y-2 py-2 text-sm transition-colors rounded-b-lg ${t.isSelected?"bg-success/15 dark:bg-[#001a06]":"bg-transparent"}`)},[()=>s()("keep"),()=>Lt({id:t.asset.id}),()=>F()(Kt(t.asset)),()=>t.isSelected?s()("keep"):s()("to_trash"),()=>s()("view")]),i(B,W),$e(),ae()}ft(["click"]);const oa=B=>Object.values(B.exifInfo??{}).filter(Boolean).length,rt=B=>{let t=Ge(B,s=>s.exifInfo?.fileSizeInByte??0);return t=t.filter(s=>s.exifInfo?.fileSizeInByte===t.at(-1)?.exifInfo?.fileSizeInByte),t.length>=2&&(t=Ge(t,oa)),t.pop()};var na=X('<div class="rounded-3xl border dark:border-2 border-gray-300 dark:border-gray-700 max-w-256 mx-auto mb-4 py-6 px-0.2"><div class="flex flex-wrap gap-y-6 mb-4 px-6 w-full place-content-end justify-between"><div class="flex text-xs text-black"><!> <!></div> <div class="flex text-xs text-black"><!> <!></div></div> <div class="overflow-x-auto p-2"><div class="flex flex-nowrap gap-1 place-items-start justify-center min-w-full w-fit mx-auto"></div></div></div> <!>',1);function da(B,t){ke(t,!0);const s=()=>le(m,"$viewingAsset",M),z=()=>le(ye,"$t",M),F=()=>le(ie,"$showAssetViewer",M),[M,ae]=Ie(),{isViewing:ie,asset:m,setAsset:G}=we;let k=Je(qe(new Oe)),w=n(()=>t.assets.length-e(k).size);gt(()=>{const l=rt(t.assets);if(!l){pe(k,new Oe(t.assets[0].id),!0);return}e(k).add(l.id)}),ht(()=>{we.showAssetViewer(!1)});const V=async()=>{if(t.assets.length<=0)return;const l=Math.floor(Math.random()*t.assets.length),o=t.assets[l];return await W(o),{id:o.id}},D=l=>{e(k).has(l.id)?e(k).delete(l.id):e(k).add(l.id)},R=()=>{e(k).clear()},ce=()=>{pe(k,new Oe(t.assets.map(l=>l.id)),!0)},W=async({id:l})=>{const o=await ut({...Gt.params,id:l});G(o),await Xe({targetRoute:"current",assetId:o.id})},J=()=>{const l=t.assets.map(b=>b.id).filter(b=>!e(k).has(b)),o=t.assets.map(b=>b.id);t.onResolve(o,l)},L=()=>{t.onStack(t.assets)},se=n(()=>({current:s(),nextAsset:Zt(t.assets,s()),previousAsset:Et(t.assets,s())}));var re=na();et(Qe,(l,o)=>st?.(l,o),()=>[{shortcut:{key:"a"},onShortcut:ce},{shortcut:{key:"s"},onShortcut:()=>W(t.assets[0])},{shortcut:{key:"d"},onShortcut:R},{shortcut:{key:"c",shift:!0},onShortcut:J},{shortcut:{key:"s",shift:!0},onShortcut:L}]);var ve=te(re),q=u(ve),me=u(q),fe=u(me);ee(fe,{class:"rounded-s-full",size:"small",color:"primary",get leadingIcon(){return Ue},onclick:ce,children:(l,o)=>{N();var b=P();g(y=>v(b,y),[()=>z()("select_keep_all")]),i(l,b)},$$slots:{default:!0}});var Q=h(fe,2);ee(Q,{class:"rounded-e-full",size:"small",color:"secondary",get leadingIcon(){return Fe},onclick:R,children:(l,o)=>{N();var b=P();g(y=>v(b,y),[()=>z()("select_trash_all")]),i(l,b)},$$slots:{default:!0}}),c(me);var _=h(me,2),p=u(_);{var A=l=>{ee(l,{size:"small",get leadingIcon(){return Ue},color:"success",class:"flex place-items-center rounded-s-full gap-2",onclick:J,children:(o,b)=>{N();var y=P();g(Z=>v(y,Z),[()=>z()("keep_all")]),i(o,y)},$$slots:{default:!0}})},S=l=>{ee(l,{size:"small",color:"danger",get leadingIcon(){return Fe},class:"rounded-s-full",onclick:J,children:(o,b)=>{N();var y=P();g(Z=>v(y,Z),[()=>e(w)===t.assets.length?z()("trash_all"):z()("trash_count",{values:{count:e(w)}})]),i(o,y)},$$slots:{default:!0}})};de(p,l=>{e(w)===0?l(A):l(S,!1)})}var T=h(p,2);{let l=n(()=>e(k).size!==1);ee(T,{size:"small",color:"primary",get leadingIcon(){return Ye},class:"rounded-e-full",onclick:L,get disabled(){return e(l)},children:(o,b)=>{N();var y=P();g(Z=>v(y,Z),[()=>z()("stack")]),i(o,y)},$$slots:{default:!0}})}c(_),c(q);var U=h(q,2),j=u(U);jt(j,21,()=>t.assets,l=>l.id,(l,o)=>{{let b=n(()=>e(k).has(e(o).id));ia(l,{get assets(){return t.assets},get asset(){return e(o)},onSelectAsset:D,get isSelected(){return e(b)},onViewAsset:W})}}),c(j),c(U),c(ve);var oe=h(ve,2);{var E=l=>{var o=_e(),b=te(o);tt(b,()=>Ft(()=>import("../chunks/BEfn6cqG.js").then(y=>y.a),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96])),null,(y,Z)=>{var a=n(()=>{var{default:x}=e(Z);return{AssetViewer:x}}),r=n(()=>e(a).AssetViewer);Xt(y,{target:"body",children:(x,d)=>{var I=_e(),O=te(I);{let C=n(()=>t.assets.length>1);Ct(O,()=>e(r),(f,$)=>{$(f,{get cursor(){return e(se)},get showNavigation(){return e(C)},onRandom:V,onClose:()=>{we.showAssetViewer(!1),Ut(Xe({targetRoute:"current",assetId:null}))}})})}i(x,I)},$$slots:{default:!0}})}),i(l,o)};de(oe,l=>{F()&&l(E)})}i(B,re),$e(),ae()}var ca=X('<div class="text-sm dark:text-white"><p> </p> <ol class="ms-8 mt-2" style="list-style: decimal"><li> </li> <li> </li></ol></div>');function ua(B,t){ke(t,!0);const s=()=>le(ye,"$t",z),[z,F]=Ie();{let M=n(()=>s()("deduplication_info"));Jt(B,{get title(){return e(M)},size:"small",get onClose(){return t.onClose},children:(ae,ie)=>{qt(ae,{children:(m,G)=>{var k=ca(),w=u(k),V=u(w,!0);c(w);var D=h(w,2),R=u(D),ce=u(R,!0);c(R);var W=h(R,2),J=u(W,!0);c(W),c(D),c(k),g((L,se,re)=>{v(V,L),v(ce,se),v(J,re)},[()=>s()("deduplication_info_description"),()=>s()("deduplication_criteria_1"),()=>s()("deduplication_criteria_2")]),i(m,k)},$$slots:{default:!0}})},$$slots:{default:!0}})}$e(),F()}var va=X("<!> <!> <!>",1),ma=X('<!> <div class="max-w-5xl mx-auto mb-16"><div class="flex mb-4 sm:px-6 w-full place-content-center justify-between items-center place-items-center"><div class="flex text-xs text-black"><!> <!></div> <p class="border px-3 md:px-6 py-1 dark:bg-subtle rounded-lg text-xs md:text-sm"> </p> <div class="flex text-xs text-black"><!> <!></div></div></div>',1),fa=X('<div class="flex items-center mb-2"><div class="text-sm dark:text-white"><p> </p></div> <!></div> <!>',1),ga=X('<p class="text-center text-lg dark:text-white flex place-items-center place-content-center"> </p>'),ha=X("<div><!></div>");function Ka(B,t){ke(t,!0);const s=()=>le(ye,"$t",M),z=()=>le(G,"$showAssetViewer",M),F=()=>le(at,"$locale",M),[M,ae]=Ie(),ie={general:[],actions:[{key:["a"],action:s()("select_all_duplicates")},{key:["s"],action:s()("view")},{key:["d"],action:s()("unselect_all_duplicates")},{key:["⇧","c"],action:s()("resolve_duplicates")},{key:["⇧","s"],action:s()("stack_duplicates")}]};let m=Je(qe(t.data.duplicates));const{isViewing:G}=we,k=_=>Math.max(0,Math.min(_,e(m).length-1));let w=n(()=>(()=>{const _=De.url.searchParams.get("index")??"0",p=Number.parseInt(_,10);return k(Number.isNaN(p)?0:p)})()),V=n(()=>e(m).length>0);const D=async(_,p,A)=>{if(!(p&&A&&!await Be.showDialog({prompt:p,confirmText:A})))try{return await _()}catch(S){Rt(S,s()("errors.unable_to_resolve_duplicate"))}},R=_=>{if(!_)return;const p=xe.value.trash?s()("assets_moved_to_trash_count",{values:{count:_}}):s()("permanently_deleted_assets_count",{values:{count:_}});He.success(p)},ce=async(_,p,A)=>D(async()=>{await Le({assetBulkDeleteDto:{ids:A,force:!xe.value.trash}}),await Ae({assetBulkUpdateDto:{ids:p,duplicateId:null}}),pe(m,e(m).filter(S=>S.duplicateId!==_),!0),R(A.length),await Q(e(w))},A.length>0&&!xe.value.trash?s()("delete_duplicates_confirmation"):void 0,A.length>0&&!xe.value.trash?s()("permanently_delete"):void 0),W=async(_,p)=>{await Ht(p,!1);const A=p.map(S=>S.id);await Ae({assetBulkUpdateDto:{ids:A,duplicateId:null}}),pe(m,e(m).filter(S=>S.duplicateId!==_),!0),await Q(e(w))},J=async()=>{const _=e(m).map(T=>rt(T.assets)).map(T=>T?.id),p=e(m).flatMap((T,U)=>T.assets.map(j=>j.id).filter(j=>j!==_[U]));let A,S;return xe.value.trash?(A=s()("bulk_trash_duplicates_confirmation",{values:{count:p.length}}),S=s()("confirm")):(A=s()("bulk_delete_duplicates_confirmation",{values:{count:p.length}}),S=s()("permanently_delete")),D(async()=>{await Le({assetBulkDeleteDto:{ids:p,force:!xe.value.trash}}),await Ae({assetBulkUpdateDto:{ids:[...p,..._.filter(T=>!!T)],duplicateId:null}}),pe(m,[],!0),R(p.length),De.url.searchParams.delete("index"),await ze(Ve.duplicatesUtility())},A,S)},L=async()=>{const _=e(m).map(({duplicateId:p})=>p);return D(async()=>{await vt({bulkIdsDto:{ids:_}}),pe(m,[],!0),He.success(s()("resolved_all_duplicates")),De.url.searchParams.delete("index"),await ze(Ve.duplicatesUtility())},s()("bulk_keep_duplicates_confirmation",{values:{count:_.length}}),s()("confirm"))},se=()=>Q(0),re=()=>Q(Math.max(e(w)-1,0)),ve=async()=>{z()||await re()},q=async()=>Q(Math.min(e(w)+1,e(m).length-1)),me=async()=>{z()||await q()},fe=()=>Q(e(m).length-1),Q=async _=>ze(Ve.duplicatesUtility({index:k(_)}));et(Qe,(_,p)=>st?.(_,p),()=>[{shortcut:{key:"ArrowLeft"},onShortcut:ve},{shortcut:{key:"ArrowRight"},onShortcut:me}]);{const _=A=>{Qt(A,{gap:0,children:(S,T)=>{var U=va(),j=te(U);{let l=n(()=>!e(V));ee(j,{get leadingIcon(){return Fe},onclick:()=>J(),get disabled(){return e(l)},size:"small",variant:"ghost",color:"secondary",children:(o,b)=>{Ce(o,{class:"hidden md:block",children:(y,Z)=>{N();var a=P();g(r=>v(a,r),[()=>s()("deduplicate_all")]),i(y,a)},$$slots:{default:!0}})},$$slots:{default:!0}})}var oe=h(j,2);{let l=n(()=>!e(V));ee(oe,{get leadingIcon(){return At},onclick:()=>L(),get disabled(){return e(l)},size:"small",variant:"ghost",color:"secondary",children:(o,b)=>{Ce(o,{class:"hidden md:block",children:(y,Z)=>{N();var a=P();g(r=>v(a,r),[()=>s()("keep_all")]),i(y,a)},$$slots:{default:!0}})},$$slots:{default:!0}})}var E=h(oe,2);{let l=n(()=>s()("show_keyboard_shortcuts")),o=n(()=>s()("show_keyboard_shortcuts"));Ee(E,{shape:"round",variant:"ghost",color:"secondary",get icon(){return zt},get title(){return e(l)},onclick:()=>Be.show(Yt,{shortcuts:ie}),get"aria-label"(){return e(o)}})}i(S,U)},$$slots:{default:!0}})};let p=n(()=>t.data.meta.title+` (${e(m).length.toLocaleString(F())})`);Nt(B,{get title(){return e(p)},scrollbar:!0,buttons:_,children:(A,S)=>{var T=ha(),U=u(T);{var j=E=>{var l=fa(),o=te(l),b=u(o),y=u(b),Z=u(y,!0);c(y),c(b);var a=h(b,2);{let x=n(()=>s()("deduplication_info"));Ee(a,{shape:"round",variant:"ghost",color:"secondary",get icon(){return Dt},get"aria-label"(){return e(x)},size:"small",onclick:()=>Be.show(ua)})}c(o);var r=h(o,2);Mt(r,()=>e(m)[e(w)].duplicateId,x=>{var d=ma(),I=te(d);da(I,{get assets(){return e(m)[e(w)].assets},onResolve:(K,ne)=>ce(e(m)[e(w)].duplicateId,K,ne),onStack:K=>W(e(m)[e(w)].duplicateId,K)});var O=h(I,2),C=u(O),f=u(C),$=u(f);{let K=n(()=>e(w)===0);ee($,{size:"small",get leadingIcon(){return Tt},color:"primary",class:"flex place-items-center rounded-s-full gap-2 px-2 sm:px-4",onclick:se,get disabled(){return e(K)},children:(ne,Se)=>{N();var Y=P();g(ge=>v(Y,ge),[()=>s()("first")]),i(ne,Y)},$$slots:{default:!0}})}var H=h($,2);{let K=n(()=>e(w)===0);ee(H,{size:"small",get leadingIcon(){return Ot},color:"primary",class:"flex place-items-center rounded-e-full gap-2 px-2 sm:px-4",onclick:re,get disabled(){return e(K)},children:(ne,Se)=>{N();var Y=P();g(ge=>v(Y,ge),[()=>s()("previous")]),i(ne,Y)},$$slots:{default:!0}})}c(f);var Pe=h(f,2),lt=u(Pe);c(Pe);var je=h(Pe,2),Re=u(je);{let K=n(()=>e(w)===e(m).length-1);ee(Re,{size:"small",get trailingIcon(){return Bt},color:"primary",class:"flex place-items-center rounded-s-full gap-2 px-2 sm:px-4",onclick:q,get disabled(){return e(K)},children:(ne,Se)=>{N();var Y=P();g(ge=>v(Y,ge),[()=>s()("next")]),i(ne,Y)},$$slots:{default:!0}})}var it=h(Re,2);{let K=n(()=>e(w)===e(m).length-1);ee(it,{size:"small",get trailingIcon(){return Vt},color:"primary",class:"flex place-items-center rounded-e-full gap-2 px-2 sm:px-4",onclick:fe,get disabled(){return e(K)},children:(ne,Se)=>{N();var Y=P();g(ge=>v(Y,ge),[()=>s()("last")]),i(ne,Y)},$$slots:{default:!0}})}c(je),c(C),c(O),g(K=>v(lt,`${e(w)+1} / ${K??""}`),[()=>e(m).length.toLocaleString(F())]),i(x,d)}),g(x=>v(Z,x),[()=>s()("duplicates_description")]),i(E,l)},oe=E=>{var l=ga(),o=u(l,!0);c(l),g(b=>v(o,b),[()=>s()("no_duplicates_found")]),i(E,l)};de(U,E=>{e(m)&&e(m).length>0?E(j):E(oe,!1)})}c(T),i(A,T)},$$slots:{buttons:!0,default:!0}})}$e(),ae()}export{Ka as component,Ha as universal};
