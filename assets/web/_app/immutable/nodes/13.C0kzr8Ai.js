import{a as Se}from"../chunks/Cx5lmlld.js";import{g as xe,$ as ue}from"../chunks/DdY9CyNE.js";import{X as re}from"../chunks/DeYUhNiz.js";import"../chunks/DsnmJJEf.js";import{p as ce,f as me,g as t,u as s,c as u,s as _,t as q,a as pe,Q as l,r as c,n as ae,h as se,i as ke,j as K}from"../chunks/BOqQhZBJ.js";import{f as j,a as y,t as oe}from"../chunks/CnteGC4G.js";import{p as Be,a as T,s as ge,f as v}from"../chunks/B227BkWK.js";import{s as Ge}from"../chunks/_KdZ2AIy.js";import{s as X}from"../chunks/BufZg4h2.js";import{i as le}from"../chunks/QS5y7wlf.js";import{B as Y,aN as Me,I as ne,aO as Pe,aP as Fe,G as Ie,T as ie,aQ as Ce,aR as De,aS as je,aT as Qe,aU as Te,aV as Ve,aW as ze,H as Le}from"../chunks/LrV5ZTyj.js";import{D as de}from"../chunks/8PJ7VpFA.js";import{G as ve}from"../chunks/BhyZz3VN.js";import{S as _e}from"../chunks/6ckOa7Ax.js";import{z as D,K as Q,y as d,S as I,x as C,A as S}from"../chunks/Jagi0WJL.js";import{c as be,e as Ne,a as Ue,f as Re,b as Ee,d as He,s as We,g as qe,h as Ke}from"../chunks/DsCc9Mx1.js";import{A as Xe}from"../chunks/B4vmgvha.js";import{U as Ye}from"../chunks/CwTmTzRk.js";import{E as Je}from"../chunks/0tdQcI5E.js";import{R as Ze}from"../chunks/BeWG-__C.js";const et=(async({url:x})=>{await Se(x);const m=await re({shared:!0}),e=await re({}),r=await xe();return{albums:e,sharedAlbums:m,meta:{title:r("albums")}}}),kt=Object.freeze(Object.defineProperty({__proto__:null,load:et},Symbol.toStringTag,{value:"Module"}));var tt=j('<p class="hidden md:block"> </p>'),rt=j('<span><div class="hidden xl:flex gap-0"><div class="block"><!></div> <div class="block"><!></div></div></span>'),at=j('<div class="hidden xl:block h-10"><!></div> <div class="hidden xl:block h-10 xl:w-60 2xl:w-80"><!></div> <!> <!> <!> <!> <!>',1);function st(x,m){ce(m,!0);const e=()=>T(d,"$albumViewSettings",k),r=()=>T(ue,"$t",k),[k,V]=ge();let b=Be(m,"searchQuery",15);const O=a=>a===I.Asc?I.Desc:I.Asc,z=(a,o)=>{v(d,l(e).filter=Object.keys(t(p)).find(n=>t(p)[n]===a)??o,l(e))},L=({id:a,defaultOrder:o})=>{e().groupBy===a?v(d,l(e).groupOrder=O(e().groupOrder),l(e)):(v(d,l(e).groupBy=a,l(e)),v(d,l(e).groupOrder=o,l(e)))},B=({id:a,defaultOrder:o})=>{e().sortBy===a?v(d,l(e).sortOrder=O(e().sortOrder),l(e)):(v(d,l(e).sortBy=a,l(e)),v(d,l(e).sortOrder=o,l(e)))},h=()=>{v(d,l(e).view=e().view===Q.Cover?Q.List:Q.Cover,l(e))};let w=s(()=>t(M)?.id===C.None?je:e().groupOrder===I.Desc?Qe:Te),p=s(()=>({[D.All]:r()("all"),[D.Owned]:r()("owned"),[D.Shared]:r()("shared")})),G=s(()=>t(p)[Re(e().filter)]),N=s(()=>Ee(e().sortBy)),M=s(()=>He(e().groupBy)),U=s(()=>e().sortOrder===I.Desc?Ve:ze),R=s(()=>({[S.Title]:r()("sort_title"),[S.ItemCount]:r()("sort_items"),[S.DateModified]:r()("sort_modified"),[S.DateCreated]:r()("sort_created"),[S.MostRecentPhoto]:r()("sort_recent"),[S.OldestPhoto]:r()("sort_oldest")})),A=s(()=>({[C.None]:r()("group_no"),[C.Owner]:r()("group_owner"),[C.Year]:r()("group_year")}));var g=at(),$=me(g),fe=u($);{let a=s(()=>r()("show_albums")),o=s(()=>Object.values(t(p)));ve(fe,{get label(){return t(a)},get filters(){return t(o)},get selected(){return t(G)},onSelect:n=>z(n,D.All)})}c($);var E=_($,2),he=u(E);{let a=s(()=>r()("search_albums"));_e(he,{get placeholder(){return t(a)},showLoadingSpinner:!1,get name(){return b()},set name(o){b(o)}})}c(E);var J=_(E,2);Y(J,{get leadingIcon(){return Me},onclick:()=>be(),size:"small",variant:"ghost",color:"secondary",children:(a,o)=>{var n=tt(),i=u(n,!0);c(n),q(P=>X(i,P),[()=>r()("create_album")]),y(a,n)},$$slots:{default:!0}});var Z=_(J,2);{let a=s(()=>r()("sort_albums_by")),o=s(()=>Object.values(We));de(Z,{get title(){return t(a)},get options(){return t(o)},get selectedOption(){return t(N)},onSelect:B,render:({id:n})=>({title:t(R)[n],icon:t(U)})})}var ee=_(Z,2);{let a=s(()=>r()("group_albums_by")),o=s(()=>Object.values(qe));de(ee,{get title(){return t(a)},get options(){return t(o)},get selectedOption(){return t(M)},onSelect:L,render:({id:n,isDisabled:i})=>({title:t(A)[n],icon:t(w),disabled:i()})})}var te=_(ee,2);{var $e=a=>{var o=rt(),n=u(o),i=u(n),P=u(i);{let H=s(()=>r()("expand_all")),W=s(()=>r()("expand_all"));ne(P,{get title(){return t(H)},onclick:()=>Ne(),variant:"ghost",color:"secondary",shape:"round",get icon(){return Pe},get"aria-label"(){return t(W)}})}c(i);var f=_(i,2),F=u(f);{let H=s(()=>r()("collapse_all")),W=s(()=>r()("collapse_all"));ne(F,{get title(){return t(H)},onclick:()=>Ue(m.albumGroups),variant:"ghost",color:"secondary",shape:"round",get icon(){return Fe},get"aria-label"(){return t(W)}})}c(f),c(n),c(o),Ie(1,o,()=>Le,()=>({x:-50,duration:250})),y(a,o)},ye=s(()=>Ke(e())!==C.None);le(te,a=>{t(ye)&&a($e)})}var Oe=_(te,2);{var we=a=>{Y(a,{get leadingIcon(){return Ce},onclick:()=>h(),size:"small",variant:"ghost",color:"secondary",children:(o,n)=>{ie(o,{class:"hidden md:block",children:(i,P)=>{ae();var f=oe();q(F=>X(f,F),[()=>r()("covers")]),y(i,f)},$$slots:{default:!0}})},$$slots:{default:!0}})},Ae=a=>{Y(a,{get leadingIcon(){return De},onclick:()=>h(),size:"small",variant:"ghost",color:"secondary",children:(o,n)=>{ie(o,{class:"hidden md:block",children:(i,P)=>{ae();var f=oe();q(F=>X(f,F),[()=>r()("list")]),y(i,f)},$$slots:{default:!0}})},$$slots:{default:!0}})};le(Oe,a=>{e().view===Q.List?a(we):a(Ae,!1)})}y(x,g),pe(),V()}var ot=j('<div class="flex place-items-center gap-2"><!></div>'),lt=j('<div class="xl:hidden"><div class="w-fit h-14 dark:text-immich-dark-fg py-2"><!></div> <div class="w-60"><!></div></div> <!>',1);function Bt(x,m){ce(m,!0);const e=()=>T(ue,"$t",k),r=()=>T(d,"$albumViewSettings",k),[k,V]=ge();let b=se(""),O=se(ke([]));{const z=B=>{var h=ot(),w=u(h);st(w,{get albumGroups(){return t(O)},get searchQuery(){return t(b)},set searchQuery(p){K(b,p,!0)}}),c(h),y(B,h)};let L=s(()=>[[Ge,{routeStartsWith:Ze.albums()}]]);Ye(x,{get title(){return m.data.meta.title},get use(){return t(L)},buttons:z,children:(B,h)=>{var w=lt(),p=me(w),G=u(p),N=u(G);{let A=s(()=>e()("show_albums")),g=s(()=>Object.keys(D));ve(N,{get label(){return t(A)},get filters(){return t(g)},get selected(){return r().filter},onSelect:$=>v(d,l(r).filter=$,l(r))})}c(G);var M=_(G,2),U=u(M);{let A=s(()=>e()("search_albums"));_e(U,{get placeholder(){return t(A)},showLoadingSpinner:!1,get name(){return t(b)},set name(g){K(b,g,!0)}})}c(M),c(p);var R=_(p,2);Xe(R,{get ownedAlbums(){return m.data.albums},get sharedAlbums(){return m.data.sharedAlbums},get userSettings(){return r()},allowEdit:!0,get searchQuery(){return t(b)},get albumGroupIds(){return t(O)},set albumGroupIds(g){K(O,g,!0)},empty:g=>{{let $=s(()=>e()("no_albums_message"));Je(g,{get text(){return t($)},onClick:()=>be(),class:"mt-10 mx-auto"})}},$$slots:{empty:!0}}),y(B,w)},$$slots:{buttons:!0,default:!0}})}pe(),V()}export{Bt as component,kt as universal};
