import{a as he,c as Y}from"../chunks/Cx5lmlld.js";import{g as we,$ as be}from"../chunks/DdY9CyNE.js";import"../chunks/DsnmJJEf.js";import{p as Pe,f as w,j as n,g as e,h as m,u as t,s as u,t as Z,a as ye,n as ee}from"../chunks/BOqQhZBJ.js";import{s as te}from"../chunks/BufZg4h2.js";import{f as b,t as re,a as p}from"../chunks/CnteGC4G.js";import{i as B}from"../chunks/QS5y7wlf.js";import{s as Se,a as qe}from"../chunks/B227BkWK.js";import{g as ae}from"../chunks/C4XZXykC.js";import{f as T}from"../chunks/D5h9ps2j.js";import{R as se}from"../chunks/BeWG-__C.js";import{h as xe}from"../chunks/52C7z9ON.js";import{E as ke,F as ze}from"../chunks/Jagi0WJL.js";import{F as Ie}from"../chunks/C0Ca_l_S.js";import{S as Fe}from"../chunks/Ze2c3aZz.js";import{F as $}from"../chunks/DzmAA-7p.js";import{I as U}from"../chunks/BJT5MMCK.js";import{P as oe}from"../chunks/DHEjuV7w.js";import{H as le}from"../chunks/o4H9mija.js";import{S as j}from"../chunks/rybNiN9i.js";const Ce=(async({url:P})=>(await he(P,{admin:!0}),{meta:{title:(await we())("admin.user_management")}})),st=Object.freeze(Object.defineProperty({__proto__:null,load:Ce},Symbol.toStringTag,{value:"Module"}));var Me=b("<!> <!>",1),Be=b("<!> <!>",1),Te=b("<!> <!> <!> <!> <!> <!> <!> <!>",1),Ue=b("<!> <!>",1);function ot(P,A){Pe(A,!0);const s=()=>qe(be,"$t",ne),[ne,ue]=Se();let y=m(""),c=m(""),f=m(""),S=m(""),q=m(!0),x=m(!0),k=m(!1),_=m(void 0),z=m(!1),I=t(()=>e(_)===null?null:ke(Number(e(_)),ze.GiB)),ie=t(()=>e(I)&&Y.serverInfo&&e(I)>Y.serverInfo.diskSizeRaw);const R=t(()=>e(c)!==e(f)&&e(f).length>0),de=t(()=>e(R)?s()("password_does_not_match"):""),H=t(()=>!e(R)&&!e(z)),me=async()=>{await ae(se.users())},$e=async F=>{if(F.preventDefault(),!e(H))return;n(z,!0);const g=await xe({email:e(y),password:e(c),shouldChangePassword:e(q),name:e(S),quotaSizeInBytes:e(I),notify:e(x),isAdmin:e(k)});g&&await ae(se.viewUser(g),{replaceState:!0}),n(z,!1)};{let F=t(()=>s()("create_new_user")),g=t(()=>!e(H)),pe=t(()=>s()("create"));Ie(P,{get title(){return e(F)},size:"small",get disabled(){return e(g)},get submitText(){return e(pe)},onClose:me,onSubmit:$e,children:(ce,je)=>{var O=Ue(),D=w(O);B(D,E=>{});var fe=u(D,2);Fe(fe,{gap:4,children:(E,Ae)=>{var G=Te(),N=w(G);{let r=t(()=>s()("email"));$(N,{get label(){return e(r)},required:!0,children:(a,l)=>{U(a,{type:"email",get value(){return e(y)},set value(o){n(y,o,!0)}})},$$slots:{default:!0}})}var W=u(N,2);{var _e=r=>{{let a=t(()=>s()("admin.send_welcome_email"));$(r,{get label(){return e(a)},children:(l,o)=>{j(l,{id:"send-welcome-email",class:"text-sm",get checked(){return e(x)},set checked(i){n(x,i,!0)}})},$$slots:{default:!0}})}};B(W,r=>{T.value.email&&r(_e)})}var J=u(W,2);{let r=t(()=>s()("password")),a=t(()=>!T.value.oauth);$(J,{get label(){return e(r)},get required(){return e(a)},children:(l,o)=>{oe(l,{id:"password",autocomplete:"new-password",get value(){return e(c)},set value(i){n(c,i,!0)}})},$$slots:{default:!0}})}var K=u(J,2);{let r=t(()=>s()("confirm_password")),a=t(()=>!T.value.oauth);$(K,{get label(){return e(r)},get required(){return e(a)},children:(l,o)=>{var i=Me(),v=w(i);oe(v,{id:"confirmPassword",autocomplete:"new-password",get value(){return e(f)},set value(d){n(f,d,!0)}});var C=u(v,2);le(C,{color:"danger",children:(d,h)=>{ee();var M=re();Z(()=>te(M,e(de))),p(d,M)},$$slots:{default:!0}}),p(l,i)},$$slots:{default:!0}})}var L=u(K,2);{let r=t(()=>s()("admin.require_password_change_on_login"));$(L,{get label(){return e(r)},children:(a,l)=>{j(a,{id:"require-password-change",class:"text-sm text-start",get checked(){return e(q)},set checked(o){n(q,o,!0)}})},$$slots:{default:!0}})}var Q=u(L,2);{let r=t(()=>s()("name"));$(Q,{get label(){return e(r)},required:!0,children:(a,l)=>{U(a,{get value(){return e(S)},set value(o){n(S,o,!0)}})},$$slots:{default:!0}})}var V=u(Q,2);{let r=t(()=>s()("admin.quota_size_gib"));$(V,{get label(){return e(r)},children:(a,l)=>{var o=Be(),i=w(o);{let d=t(()=>s()("unlimited"));U(i,{type:"number",get placeholder(){return e(d)},min:"0",step:"1",get value(){return e(_)},set value(h){n(_,h,!0)}})}var v=u(i,2);{var C=d=>{le(d,{color:"danger",children:(h,M)=>{ee();var X=re();Z(ve=>te(X,ve),[()=>s()("errors.quota_higher_than_disk_size")]),p(h,X)},$$slots:{default:!0}})};B(v,d=>{e(ie)&&d(C)})}p(a,o)},$$slots:{default:!0}})}var ge=u(V,2);{let r=t(()=>s()("admin.admin_user"));$(ge,{get label(){return e(r)},children:(a,l)=>{j(a,{get checked(){return e(k)},set checked(o){n(k,o,!0)}})},$$slots:{default:!0}})}p(E,G)},$$slots:{default:!0}}),p(ce,O)},$$slots:{default:!0}})}ye(),ue()}export{ot as component,st as universal};
