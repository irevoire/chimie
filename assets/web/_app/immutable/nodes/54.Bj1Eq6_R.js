import{a as se}from"../chunks/Cx5lmlld.js";import{g as re,$ as oe}from"../chunks/DdY9CyNE.js";import{aO as Ft}from"../chunks/DeYUhNiz.js";import"../chunks/DsnmJJEf.js";import{s as l,a as ie}from"../chunks/BufZg4h2.js";import{p as vt,c as s,r,t as v,g as t,u as p,a as ct,at as Ot,s as e,f as z,n as u,h as le,i as ne,j as de}from"../chunks/BOqQhZBJ.js";import{A as ve}from"../chunks/4in-FAdc.js";import{f as b,a as i,t as f,c as ce}from"../chunks/CnteGC4G.js";import{i as qt}from"../chunks/QS5y7wlf.js";import{e as ue}from"../chunks/D4fmOnVC.js";import{p as me,s as _e,a as Lt}from"../chunks/B227BkWK.js";import{S as nt}from"../chunks/Ca9QUCuW.js";import{l as fe,o as pe}from"../chunks/Jagi0WJL.js";import{T as D,aD as Ut,aE as jt,aF as kt,a as dt}from"../chunks/LrV5ZTyj.js";import{C as ge}from"../chunks/CgxV3crx.js";import{T as $e,a as xe,b as E,c as he,d as ye,e as N}from"../chunks/Bn2SVuxV.js";import{a as be}from"../chunks/D5MBkTLC.js";import{C as Pe}from"../chunks/WscBzvwE.js";var we=b("<span> </span>");function R(B,n){vt(n,!0);const d=me(n,"variant",3,"short"),I=p(()=>be(n.bytes,n.precision)),y=p(()=>Ot(t(I),2)),j=p(()=>t(y)[0]),C=p(()=>t(y)[1]),k=p(()=>d()==="narrow"?"":" ");var W=we(),H=s(W);r(W),v(()=>l(H,`${t(j)??""}${t(k)??""}${t(C)??""}`)),i(B,W),ct()}const Se=(async({url:B})=>{await se(B,{admin:!0});const n=await Ft(),d=await re();return{stats:n,meta:{title:d("server_stats")}}}),Ze=Object.freeze(Object.defineProperty({__proto__:null,load:Se},Symbol.toStringTag,{value:"Module"}));var ze=b("<!> <!> <!> <!>",1),Be=b(" <!>)",1),Ie=b(" <!>)",1),Te=b("/ <!>",1),Ce=b('<!> <!> <span class="text-primary"><!></span>',1),We=b("<!> <!> <!> <!>",1),qe=b("<!> <!>",1),Le=b('<div class="flex flex-col gap-5 my-4"><div><!> <div class="hidden justify-between lg:flex gap-4"><!> <!> <!></div> <div class="mt-5 flex lg:hidden"><div class="flex flex-col justify-between rounded-3xl bg-subtle p-5 dark:bg-immich-dark-gray"><div class="flex flex-wrap gap-x-12"><div class="flex flex-1 place-items-center gap-4 text-primary"><!> <!></div> <div class="relative text-center font-mono text-2xl font-medium"><span class="text-light-300"> </span><span class="text-primary"> </span></div></div> <div class="flex flex-wrap gap-x-12"><div class="flex flex-1 place-items-center gap-4 text-primary"><!> <!></div> <div class="relative text-center font-mono text-2xl font-medium"><span class="text-light-300"> </span><span class="text-primary"> </span></div></div> <div class="flex flex-wrap gap-x-5"><div class="flex flex-1 flex-nowrap place-items-center gap-4 text-primary"><!> <!></div> <div class="relative flex text-center font-mono text-2xl font-medium"><span class="text-light-300"> </span><span class="text-primary"> </span> <div class="absolute -end-1.5 -bottom-4"><!></div></div></div></div></div></div> <div><!> <!></div></div>');function Ue(B,n){vt(n,!0);const d=()=>Lt(oe,"$t",y),I=()=>Lt(fe,"$locale",y),[y,j]=_e(),C=(o,$=13)=>{const a=o.toString().length,m=$-a;return"0".repeat(m)},k=1024**4;let W=p(()=>pe(n.stats.usage,n.stats.usage>k?2:0)),H=p(()=>Ot(t(W),2)),V=p(()=>t(H)[0]),ut=p(()=>t(H)[1]);var G=Le(),J=s(G),mt=s(J);D(mt,{class:"mb-2",fontWeight:"medium",children:(o,$)=>{u();var a=f();v(m=>l(a,m),[()=>d()("total_usage")]),i(o,a)},$$slots:{default:!0}});var K=e(mt,2),_t=s(K);{let o=p(()=>d()("photos"));nt(_t,{get icon(){return Ut},get title(){return t(o)},get value(){return n.stats.photos}})}var ft=e(_t,2);{let o=p(()=>d()("videos"));nt(ft,{get icon(){return jt},get title(){return t(o)},get value(){return n.stats.videos}})}var At=e(ft,2);{let o=p(()=>d()("storage"));nt(At,{get icon(){return kt},get title(){return t(o)},get value(){return t(V)},get unit(){return t(ut)}})}r(K);var pt=e(K,2),gt=s(pt),Q=s(gt),X=s(Q),$t=s(X);dt($t,{get icon(){return Ut},size:"25"});var Dt=e($t,2);D(Dt,{size:"medium",fontWeight:"medium",children:(o,$)=>{u();var a=f();v(m=>l(a,m),[()=>d()("photos")]),i(o,a)},$$slots:{default:!0}}),r(X);var xt=e(X,2),Y=s(xt),Ht=s(Y,!0);r(Y);var ht=e(Y),Mt=s(ht,!0);r(ht),r(xt),r(Q);var Z=e(Q,2),tt=s(Z),yt=s(tt);dt(yt,{get icon(){return jt},size:"25"});var Et=e(yt,2);D(Et,{size:"medium",fontWeight:"medium",children:(o,$)=>{u();var a=f();v(m=>l(a,m),[()=>d()("videos")]),i(o,a)},$$slots:{default:!0}}),r(tt);var bt=e(tt,2),et=s(bt),Nt=s(et,!0);r(et);var Pt=e(et),Rt=s(Pt,!0);r(Pt),r(bt),r(Z);var wt=e(Z,2),at=s(wt),St=s(at);dt(St,{get icon(){return kt},size:"25"});var Vt=e(St,2);D(Vt,{size:"medium",fontWeight:"medium",children:(o,$)=>{u();var a=f();v(m=>l(a,m),[()=>d()("storage")]),i(o,a)},$$slots:{default:!0}}),r(at);var zt=e(at,2),st=s(zt),Gt=s(st,!0);r(st);var rt=e(st),Jt=s(rt,!0);r(rt);var Bt=e(rt,2),Kt=s(Bt);ge(Kt,{color:"muted",class:"text-xs font-light font-mono",children:(o,$)=>{u();var a=f();v(()=>l(a,t(ut))),i(o,a)},$$slots:{default:!0}}),r(Bt),r(zt),r(wt),r(gt),r(pt),r(J);var It=e(J,2),Tt=s(It);D(Tt,{class:"mb-2 mt-4",fontWeight:"medium",children:(o,$)=>{u();var a=f();v(m=>l(a,m),[()=>d()("user_usage_detail")]),i(o,a)},$$slots:{default:!0}});var Qt=e(Tt,2);$e(Qt,{striped:!0,size:"small",children:(o,$)=>{var a=qe(),m=z(a);xe(m,{children:(ot,Yt)=>{var F=ze(),M=z(F);E(M,{class:"w-1/4",children:(P,L)=>{u();var _=f();v(x=>l(_,x),[()=>d()("user")]),i(P,_)},$$slots:{default:!0}});var q=e(M,2);E(q,{class:"w-1/4",children:(P,L)=>{u();var _=f();v(x=>l(_,x),[()=>d()("photos")]),i(P,_)},$$slots:{default:!0}});var c=e(q,2);E(c,{class:"w-1/4",children:(P,L)=>{u();var _=f();v(x=>l(_,x),[()=>d()("videos")]),i(P,_)},$$slots:{default:!0}});var it=e(c,2);E(it,{class:"w-1/4",children:(P,L)=>{u();var _=f();v(x=>l(_,x),[()=>d()("usage")]),i(P,_)},$$slots:{default:!0}}),i(ot,F)},$$slots:{default:!0}});var Xt=e(m,2);he(Xt,{class:"block max-h-80 overflow-y-auto",children:(ot,Yt)=>{var F=ce(),M=z(F);ue(M,17,()=>n.stats.usageByUser,q=>q.userId,(q,c)=>{ye(q,{children:(it,P)=>{var L=We(),_=z(L);N(_,{class:"w-1/4",children:(T,lt)=>{u();var g=f();v(()=>l(g,t(c).userName)),i(T,g)},$$slots:{default:!0}});var x=e(_,2);N(x,{class:"w-1/4",children:(T,lt)=>{u();var g=Be(),w=z(g),U=e(w);R(U,{get bytes(){return t(c).usagePhotos}}),u(),v(O=>l(w,`${O??""} (`),[()=>t(c).photos.toLocaleString(I())]),i(T,g)},$$slots:{default:!0}});var Ct=e(x,2);N(Ct,{class:"w-1/4",children:(T,lt)=>{u();var g=Ie(),w=z(g),U=e(w);R(U,{get bytes(){return t(c).usageVideos},precision:0}),u(),v(O=>l(w,`${O??""} (`),[()=>t(c).videos.toLocaleString(I())]),i(T,g)},$$slots:{default:!0}});var Zt=e(Ct,2);N(Zt,{class:"w-1/4",children:(T,lt)=>{var g=Ce(),w=z(g);R(w,{get bytes(){return t(c).usage},precision:0});var U=e(w,2);{var O=h=>{var S=Te(),A=e(z(S));R(A,{get bytes(){return t(c).quotaSizeInBytes},precision:0}),i(h,S)};qt(U,h=>{t(c).quotaSizeInBytes!==null&&h(O)})}var Wt=e(U,2),te=s(Wt);{var ee=h=>{var S=f();v(A=>l(S,`(${A??""})`),[()=>(t(c).quotaSizeInBytes===0?1:t(c).usage/t(c).quotaSizeInBytes).toLocaleString(I(),{style:"percent",maximumFractionDigits:0})]),i(h,S)},ae=h=>{var S=f();v(A=>l(S,`(${A??""})`),[()=>d()("unlimited")]),i(h,S)};qt(te,h=>{t(c).quotaSizeInBytes!==null&&t(c).quotaSizeInBytes>=0?h(ee):h(ae,!1)})}r(Wt),i(T,g)},$$slots:{default:!0}}),i(it,L)},$$slots:{default:!0}})}),i(ot,F)},$$slots:{default:!0}}),i(o,a)},$$slots:{default:!0}}),r(It),r(G),v((o,$,a)=>{l(Ht,o),l(Mt,n.stats.photos),l(Nt,$),l(Rt,n.stats.videos),l(Gt,a),l(Jt,t(V))},[()=>C(n.stats.photos),()=>C(n.stats.videos),()=>C(t(V))]),i(B,G),ct(),j()}function ta(B,n){vt(n,!0);let d=le(ne(n.data.stats));const I=async()=>{de(d,await Ft(),!0)};ie(()=>{const y=setInterval(()=>{I()},5e3);return()=>clearInterval(y)});{let y=p(()=>[{title:n.data.meta.title}]);ve(B,{get breadcrumbs(){return t(y)},children:(j,C)=>{Pe(j,{size:"large",center:!0,children:(k,W)=>{Ue(k,{get stats(){return t(d)}})},$$slots:{default:!0}})},$$slots:{default:!0}})}ct()}export{ta as component,Ze as universal};
