import{a as ue,u as J,p as te}from"../chunks/Cx5lmlld.js";import{g as ge,$ as L}from"../chunks/DdY9CyNE.js";import"../chunks/DsnmJJEf.js";import{s as z,b as se,d as _e,a as fe}from"../chunks/BufZg4h2.js";import{c as a,f as N,s as b,r as e,g as t,t as P,p as U,u as E,a as D,b as be,n as X,i as de,h as xe,j as he}from"../chunks/BOqQhZBJ.js";import{f as y,a as g,s as $e,t as Y,c as ke}from"../chunks/CnteGC4G.js";import{p as ae,s as I,a as A,d as ye,e as we}from"../chunks/B227BkWK.js";import{a as W,bt as Se,B as q,G as Re,ah as Ee,cC as Oe,X as Ce,ab as ze,L as Pe,bl as le,bk as Ve,dW as Te,dX as Me,dY as re,dZ as Ae,d_ as Ie,aa as Le}from"../chunks/LrV5ZTyj.js";import{g as G}from"../chunks/C4XZXykC.js";import{p as Ue}from"../chunks/DbKlvrsB.js";import"../chunks/69_IOA4Y.js";import{e as De,i as je,h as Be}from"../chunks/D4fmOnVC.js";import{F as B}from"../chunks/BbGcRfD-.js";import{S as He}from"../chunks/Ze2c3aZz.js";import{i as H}from"../chunks/QS5y7wlf.js";import{s as F}from"../chunks/FIvvbHQR.js";import{O as C}from"../chunks/DnqqNi3p.js";import{i as Q}from"../chunks/CMtyP6CA.js";import{S as Fe}from"../chunks/Cm5MqJBL.js";import{A as Ne,O as We}from"../chunks/DqQYfy5r.js";import{H as qe,m as ne}from"../chunks/C20f7eOz.js";import{S as Z}from"../chunks/CGdGWZSx.js";import{s as ce}from"../chunks/ChpjJqLK.js";import{h as Ge,S as Ke}from"../chunks/CxGI0Gwa.js";import{L as Xe}from"../chunks/Dj0AsE1j.js";import{T as oe}from"../chunks/BNLYq5HQ.js";import{t as ie}from"../chunks/DdFokm7i.js";import{bl as Ye,bm as Ze,bn as Je}from"../chunks/DeYUhNiz.js";import{R as K}from"../chunks/BeWG-__C.js";const Qe=(async({url:h})=>(await ue(h),{meta:{title:(await ge())("onboarding")}})),la=Object.freeze(Object.defineProperty({__proto__:null,load:Qe},Symbol.toStringTag,{value:"Module"}));var et=y('<a href="https://www.backblaze.com/blog/the-3-2-1-backup-strategy/" class="underline" target="_blank" rel="noreferrer"> </a>'),tt=y('<div class="flex items-start gap-6"><div class="flex-shrink-0 w-12 h-12 rounded-full bg-primary/90 flex items-center justify-center"><span class="text-light text-xl font-semibold"></span></div> <div class="leading-relaxed pt-2"><!></div></div>'),at=y('<a href="https://docs.immich.app/administration/backup-and-restore/" class="underline" target="_blank" rel="noreferrer"> </a>'),rt=y('<div class="flex items-start gap-4 p-6 my-10 bg-gray-100 dark:bg-gray-800/40 rounded-xl border border-gray-700/50"><!> <div class="text-gray-800 dark:text-gray-300 leading-relaxed"><!></div></div> <div class="space-y-1"><h2 class="mb-6"><!></h2> <div class="space-y-6"></div></div> <div class="text-sm text-gray-600 dark:text-gray-400 leading-relaxed mt-4"><p><!></p></div>',1),nt=y('<div class="flex flex-col"><!></div>');function ot(h){const d=["admin.backup_onboarding_3_description","admin.backup_onboarding_2_description","admin.backup_onboarding_1_description"];var n=nt(),v=a(n);He(v,{gap:2,children:(m,s)=>{var r=rt(),i=N(r),c=a(i);W(c,{get icon(){return Se},size:"36",class:"text-warning flex-shrink-0 mt-0.5"});var l=b(c,2),S=a(l);B(S,{key:"admin.backup_onboarding_description",children:(w,M)=>{let k=()=>M?.().message;var f=et(),u=a(f,!0);e(f),P(()=>z(u,k())),g(w,f)},$$slots:{default:!0}}),e(l),e(i);var o=b(i,2),p=a(o),$=a(p);B($,{key:"admin.backup_onboarding_parts_title"}),e(p);var R=b(p,2);De(R,5,()=>d,je,(T,w,M)=>{var k=tt(),f=a(k),u=a(f);u.textContent=3-M,e(f);var O=b(f,2),j=a(O);B(j,{get key(){return t(w)}}),e(O),e(k),g(T,k)}),e(R),e(o);var V=b(o,2),_=a(V),x=a(_);B(x,{key:"admin.backup_onboarding_footer",children:(w,M)=>{let k=()=>M?.().message;var f=at(),u=a(f,!0);e(f),P(()=>z(u,k())),g(w,f)},$$slots:{default:!0}}),e(_),e(V),g(m,r)},$$slots:{default:!0}}),e(n),g(h,n)}var it=y('<p class="text-xl text-primary font-medium"> </p>'),st=y('<div class="flex gap-2 items-center justify-center w-fit"><!> <!></div>'),dt=y("<p> </p>"),lt=y('<div class="w-full flex place-content-start"><!></div>'),ct=y('<span class="flex place-content-center place-items-center gap-2"> </span>'),pt=y('<div id="onboarding-card" class="flex w-full max-w-4xl flex-col gap-4 rounded-3xl border-2 border-gray-500 px-8 py-8 dark:border-gray-700 dark:bg-immich-dark-gray text-black dark:text-immich-dark-fg bg-gray-50"><!> <!> <div class="flex pt-4"><!> <div class="flex w-full place-content-end"><!></div></div></div>');function vt(h,d){U(d,!0);const n=()=>A(L,"$t",v),[v,m]=I();let s=ae(d,"title",3,void 0),r=ae(d,"icon",3,void 0);var i=pt(),c=a(i);{var l=_=>{var x=st(),T=a(x);{var w=f=>{W(f,{get icon(){return r()},size:"30",class:"text-primary"})};H(T,f=>{r()&&f(w)})}var M=b(T,2);{var k=f=>{var u=it(),O=a(u,!0);e(u),P(()=>z(O,s())),g(f,u)};H(M,f=>{s()&&f(k)})}e(x),g(_,x)};H(c,_=>{(s()||r())&&_(l)})}var S=b(c,2);$e(S,()=>d.children??be);var o=b(S,2),p=a(o);{var $=_=>{var x=lt(),T=a(x);q(T,{shape:"round",get leadingIcon(){return Ee},class:"flex gap-2 place-content-center",onclick:()=>{d.onLeave?.(),d.onPrevious?.()},children:(w,M)=>{var k=dt(),f=a(k,!0);e(k),P(()=>z(f,d.previousTitle)),g(w,k)},$$slots:{default:!0}}),e(x),g(_,x)};H(p,_=>{d.previousTitle&&_($)})}var R=b(p,2),V=a(R);{let _=E(()=>d.nextTitle?Oe:Ce);q(V,{shape:"round",get trailingIcon(){return t(_)},onclick:()=>{d.onLeave?.(),d.onNext?.()},children:(x,T)=>{var w=ct(),M=a(w,!0);e(w),P(k=>z(M,k),[()=>d.nextTitle??n()("done")]),g(x,w)},$$slots:{default:!0}})}e(R),e(o),e(i),Re(1,i,()=>ze,()=>({duration:250})),g(h,i),D(),m()}var mt=y('<div class="gap-4"><!> <p class="font-medium mb-6 text-6xl text-primary"> </p> <p class="text-3xl pb-6 font-light"> </p></div>');function ut(h,d){U(d,!0);const n=()=>A(J,"$user",m),v=()=>A(L,"$t",m),[m,s]=I();let r=E(()=>n().isAdmin&&!F.value.isOnboarded?C.SERVER:C.USER);var i=mt(),c=a(i);Pe(c,{variant:"icon",size:"giant",class:"mb-2"});var l=b(c,2),S=a(l,!0);e(l);var o=b(l,2),p=a(o,!0);e(o),e(i),P(($,R)=>{z(S,$),z(p,R)},[()=>v()("onboarding_welcome_user",{values:{user:n().name}}),()=>t(r)==C.SERVER?v()("onboarding_server_welcome_description"):v()("onboarding_user_welcome_description")]),g(h,i),D(),s()}var gt=y('<div class="flex flex-col gap-4"><p> </p> <!></div>');function _t(h,d){U(d,!1);const n=()=>A(L,"$t",v),[v,m]=I();Q();var s=gt(),r=a(s),i=a(r,!0);e(r);var c=b(r,2);Fe(c,{}),e(s),P(l=>z(i,l),[()=>n()("onboarding_locale_description")]),g(h,s),D(),m()}var ft=y("<!> <!>",1),bt=y("<p> </p> <!>",1);function xt(h,d){U(d,!1);const n=()=>A(L,"$t",v),[v,m]=I();Q();var s=bt(),r=N(s),i=a(r,!0);e(r);var c=b(r,2);qe(c,{children:(l,S)=>{var o=ft(),p=N(o);q(p,{size:"medium",shape:"semi-round",fullWidth:!0,onclick:()=>ne.show(Ne,{}),get leadingIcon(){return le},children:(R,V)=>{X();var _=Y();P(x=>z(_,x),[()=>n()("app_stores")]),g(R,_)},$$slots:{default:!0}});var $=b(p,2);q($,{size:"medium",shape:"semi-round",fullWidth:!0,onclick:()=>ne.show(We,{}),get leadingIcon(){return Ve},children:(R,V)=>{X();var _=Y();P(x=>z(_,x),[()=>n()("obtainium_configurator")]),g(R,_)},$$slots:{default:!0}}),g(l,o)},$$slots:{default:!0}}),P(l=>z(i,l),[()=>n()("mobile_app_download_onboarding_note")]),g(h,s),D(),m()}var ht=y('<div class="flex flex-col gap-4"><p> </p> <!> <!></div>');function $t(h,d){U(d,!0);const n=()=>A(L,"$t",v),[v,m]=I(),s=de(ce.cloneValue());se(async()=>{await Ge({map:s.map,newVersionCheck:s.newVersionCheck})});var r=ht(),i=a(r),c=a(i,!0);e(i);var l=b(i,2);{let o=E(()=>n()("admin.map_settings")),p=E(()=>n()("admin.map_implications"));Z(l,{get title(){return t(o)},get subtitle(){return t(p)},get checked(){return s.map.enabled},set checked($){s.map.enabled=$}})}var S=b(l,2);{let o=E(()=>n()("admin.version_check_settings")),p=E(()=>n()("admin.version_check_implications"));Z(S,{get title(){return t(o)},get subtitle(){return t(p)},get checked(){return s.newVersionCheck.enabled},set checked($){s.newVersionCheck.enabled=$}})}e(r),P(o=>z(c,o),[()=>n()("onboarding_privacy_description")]),g(h,r),D(),m()}var kt=y('<div class="flex flex-col"><p><!></p> <!></div>');function yt(h){const d=()=>A(J,"$user",n),[n,v]=I();var m=kt(),s=a(m),r=a(s);B(r,{key:"admin.storage_template_onboarding_description_v2",children:(S,o)=>{let p=()=>o?.().message;Xe(S,{href:"https://docs.immich.app/administration/storage-template",children:($,R)=>{X();var V=Y();P(()=>z(V,p())),g($,V)},$$slots:{default:!0}})},$$slots:{default:!0}}),e(s);var i=b(s,2);{var c=l=>{Ke(l,{minified:!0,duration:0,saveOnClose:!0})};H(i,l=>{d()&&l(c)})}e(m),g(h,m),v()}const wt="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z",St="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z",Rt="0 0 20 20",Et="0 0 20 20";var Ot=y('<div class="flex flex-col gap-4"><p> </p> <div class="flex gap-4"><button type="button" class="w-1/2 aspect-square bg-light dark:bg-dark rounded-3xl transition-all shadow-sm hover:shadow-xl border-[3px] border-immich-primary dark:border dark:border-transparent"><div class="flex flex-col place-items-center place-content-center justify-around h-full w-full text-immich-primary"><!> <p class="font-semibold text-4xl"> </p></div></button> <button type="button" class="w-1/2 aspect-square bg-dark dark:bg-light rounded-3xl transition-all shadow-sm hover:shadow-xl dark:border-[3px] dark:border-immich-dark-primary border border-transparent"><div class="flex flex-col place-items-center place-content-center justify-around h-full w-full text-immich-dark-primary"><!> <p class="font-semibold text-4xl"> </p></div></button></div></div>');function Ct(h,d){U(d,!1);const n=()=>A(L,"$t",v),[v,m]=I();Q();var s=Ot(),r=a(s),i=a(r,!0);e(r);var c=b(r,2),l=a(c);l.__click=()=>ie.setTheme(oe.LIGHT);var S=a(l),o=a(S);W(o,{get icon(){return St},get viewBox(){return Et},size:"96"});var p=b(o,2),$=a(p,!0);e(p),e(S),e(l);var R=b(l,2);R.__click=()=>ie.setTheme(oe.DARK);var V=a(R),_=a(V);W(_,{get icon(){return wt},get viewBox(){return Rt},size:"96"});var x=b(_,2),T=a(x,!0);e(x),e(V),e(R),e(c),e(s),P((w,M,k)=>{z(i,w),z($,M),z(T,k)},[()=>n()("onboarding_theme_description"),()=>n()("light"),()=>n()("dark")]),g(h,s),D(),m()}_e(["click"]);var zt=y('<div class="flex flex-col gap-4"><p> </p> <!></div>');function Pt(h,d){U(d,!0);const n=()=>A(te,"$preferences",m),v=()=>A(L,"$t",m),[m,s]=I();let r=xe(de(n()?.cast?.gCastEnabled??!1));se(async()=>{try{const o=await Ye({userPreferencesUpdateDto:{cast:{gCastEnabled:t(r)}}});ye(te,{...o})}catch(o){Be(o,v()("errors.unable_to_update_settings"))}});var i=zt(),c=a(i),l=a(c,!0);e(c);var S=b(c,2);{let o=E(()=>v()("gcast_enabled")),p=E(()=>v()("gcast_enabled_description"));Z(S,{get title(){return t(o)},get subtitle(){return t(p)},get checked(){return t(r)},set checked($){he(r,$,!0)}})}e(i),P(o=>z(l,o),[()=>v()("onboarding_privacy_description")]),g(h,i),D(),s()}var Vt=y('<section id="onboarding-page" class="min-w-dvw flex min-h-dvh p-4"><div class="flex flex-col w-full"><div class=" bg-gray-300 dark:bg-gray-600 rounded-md h-2"><div class="progress-bar bg-primary h-2 rounded-md transition-all duration-200 ease-out"></div></div> <div class="py-8 flex place-content-center place-items-center m-auto w-[min(100%,800px)]"><!></div></div></section>');function ca(h,d){U(d,!0);const n=()=>A(L,"$t",m),v=()=>A(J,"$user",m),[m,s]=I(),r=E(()=>[{name:"hello",component:ut,role:C.USER},{name:"theme",component:Ct,role:C.USER,title:n()("theme"),icon:Te},{name:"language",component:_t,role:C.USER,title:n()("language"),icon:Me},{name:"server_privacy",component:$t,role:C.SERVER,title:n()("server_privacy"),icon:re},{name:"user_privacy",component:Pt,role:C.USER,title:n()("user_privacy"),icon:re},{name:"storage_template",component:yt,role:C.SERVER,title:n()("admin.storage_template_settings"),icon:Ae},{name:"backup",component:ot,role:C.SERVER,title:n()("admin.backup_onboarding_title"),icon:Ie},{name:"mobile_app",component:xt,role:C.USER,title:n()("mobile_app"),icon:le}]),i=E(()=>{const u=Ue.url.searchParams.get("step"),O=t(r).findIndex(j=>j.name===u);return O===-1?0:O});let c=E(()=>v().isAdmin&&!F.value.isOnboarded?C.SERVER:C.USER),l=E(()=>t(r).filter(u=>o(u.role,t(c))).length),S=E(()=>t(r).filter((u,O)=>o(u.role,t(c))&&O<=t(i)).length-1);const o=(u,O)=>u===C.USER||u===C.SERVER&&O===C.SERVER&&!F.value.isOnboarded,p=E(()=>t(r).findLastIndex((u,O)=>o(u.role,t(c))&&O<t(i))),$=E(()=>t(r).findIndex((u,O)=>o(u.role,t(c))&&O>t(i))),R=async()=>{t($)==-1?(v().isAdmin&&(await Ze({adminOnboardingUpdateDto:{isOnboarded:!0}}),await F.loadServerConfig()),await Je({onboardingDto:{isOnboarded:!0}}),await G(K.photos())):await G(K.onboarding({step:t(r)[t($)].name}))},V=async()=>{t(p)!==-1&&await G(K.onboarding({step:t(r)[t(p)].name}))},_=E(()=>t(r)[t(i)].component);fe(async()=>{t(c)===C.SERVER&&await ce.init()});var x=Vt(),T=a(x),w=a(T),M=a(w);e(w);var k=b(w,2),f=a(k);{let u=E(()=>t(r)[t(p)]?.title),O=E(()=>t(r)[t($)]?.title);vt(f,{get title(){return t(r)[t(i)].title},get icon(){return t(r)[t(i)].icon},onNext:R,onPrevious:V,get previousTitle(){return t(u)},get nextTitle(){return t(O)},children:(j,Tt)=>{var ee=ke(),pe=N(ee);we(pe,()=>t(_),(ve,me)=>{me(ve,{})}),g(j,ee)},$$slots:{default:!0}})}e(k),e(T),e(x),P(()=>Le(M,`width: ${t(S)/t(l)*100}%`)),g(h,x),D(),s()}export{ca as component,la as universal};
