import{a as gt,u as mt}from"../chunks/Cx5lmlld.js";import{g as vt,$ as re}from"../chunks/DdY9CyNE.js";import{h as _t,i as pt,bF as ft,bG as it,bH as Oe,bI as Se,bJ as Re,bK as Ie,bL as Be,bM as Ue,bN as Xe,bO as Te,bP as je,aI as Le,bQ as Me,bR as bt,bS as ht}from"../chunks/DeYUhNiz.js";import"../chunks/DsnmJJEf.js";import{p as ne,g as e,u as t,c as s,s as l,t as ee,a as le,r as n,h as ge,i as he,j as oe,f as xe,n as Ve,b as $t,ar as xt}from"../chunks/BOqQhZBJ.js";import{f as A,a as E,t as qe,c as Ne,s as yt}from"../chunks/CnteGC4G.js";import{i as be}from"../chunks/QS5y7wlf.js";import{e as ze,t as nt,h as Ge,i as kt}from"../chunks/D4fmOnVC.js";import{p as de,s as se,a as ie,e as Et}from"../chunks/B227BkWK.js";import{d as lt,s as ae,e as _e}from"../chunks/BufZg4h2.js";import{a as Je,b1 as Tt,eu as Ct,G as ce,H as Ke,s as fe,ev as Lt,T as rt,B as Qe,bV as wt,ab as pe,ew as St,ae as Pt,I as Rt,V as st,f as Dt,w as ot,a0 as Mt,a8 as At,ex as qt,cF as Nt,ci as zt,c$ as Ot,ey as Ut,ez as Vt,dA as Bt,bI as Ft,eA as Qt,ep as It,en as Xt,aG as jt,eB as Ht,aI as Wt,eC as Gt,eD as Jt}from"../chunks/LrV5ZTyj.js";import{a as ue,S as Kt}from"../chunks/BLeUNmxt.js";import{S as B}from"../chunks/Dm7jOiZu.js";import{q as Ye}from"../chunks/Ze2c3aZz.js";import{S as J}from"../chunks/CGdGWZSx.js";import{a as $e,h as Yt,S as Zt,g as ea}from"../chunks/CxGI0Gwa.js";import{b as F,Q as ta}from"../chunks/BNLYq5HQ.js";import{F as Pe}from"../chunks/BbGcRfD-.js";import{f as me}from"../chunks/D5h9ps2j.js";import{s as Y}from"../chunks/ChpjJqLK.js";import{C as aa,m as We,M as ia,a as ra}from"../chunks/C20f7eOz.js";import{C as na}from"../chunks/BHgwLGQu.js";import{L as la}from"../chunks/eLOR7anR.js";import{i as Fe}from"../chunks/BzKamodV.js";import{s as Ae}from"../chunks/mpq9N9gX.js";import{aj as sa}from"../chunks/Jagi0WJL.js";import{A as oa}from"../chunks/4in-FAdc.js";import{S as da}from"../chunks/6ckOa7Ax.js";import{C as ua}from"../chunks/BCL4P6ef.js";import{C as ca}from"../chunks/WscBzvwE.js";import{A as ga}from"../chunks/BEiKRg21.js";const ma=(async({url:I})=>{await gt(I,{admin:!0});const P=await _t(),i=await pt(),Q=await vt();return{config:P,defaultConfig:i,meta:{title:Q("admin.system_settings")}}}),wr=Object.freeze(Object.defineProperty({__proto__:null,load:ma},Symbol.toStringTag,{value:"Module"}));var va=A('<div class="rounded-full bg-orange-100 px-2 text-[10px] text-orange-900"> </div>'),_a=A('<p class="immich-form-label pb-2 text-sm"> </p>'),pa=A("<option> </option>"),fa=A('<div class="mb-4 w-full"><div class="flex h-6.5 place-items-center gap-1"><label class="font-medium text-primary text-sm"> </label> <!></div> <!> <div class="grid"><!> <select class="immich-form-input w-full appearance-none row-start-1 col-start-1 pe-6!"></select></div></div>');function ve(I,P){ne(P,!0);const i=()=>ie(re,"$t",Q),[Q,X]=se();let r=de(P,"value",15),o=de(P,"label",3,""),a=de(P,"desc",3,""),d=de(P,"name",3,""),C=de(P,"isEdited",3,!1),R=de(P,"number",3,!1),L=de(P,"disabled",3,!1),M=de(P,"onSelect",3,()=>{});const S=c=>{r(c.target.value),R()&&r(Number.parseInt(r())),M()(r())};var z=fa(),f=s(z),q=s(f),D=s(q,!0);n(q);var T=l(q,2);{var w=c=>{var m=va(),$=s(m,!0);n(m),ee(N=>ae($,N),[()=>i()("unsaved_change")]),ce(3,m,()=>Ke,()=>({x:10,duration:200,easing:Ye})),E(c,m)};be(T,c=>{C()&&c(w)})}n(f);var O=l(f,2);{var h=c=>{var m=_a(),$=s(m,!0);n(m),ee(()=>{fe(m,"id",`${d()??""}-desc`),ae($,a())}),E(c,m)};be(O,c=>{a()&&c(h)})}var v=l(O,2),b=s(v);{let c=t(()=>L()?"text-immich-bg":"text-immich-fg dark:text-immich-bg");Je(b,{get icon(){return Tt},size:"1.2em","aria-hidden":!0,get class(){return`pointer-events-none end-1 relative col-start-1 row-start-1 self-center justify-self-end ${e(c)??""}`}})}var g=l(b,2);g.__change=S,ze(g,21,()=>P.options,c=>c.value,(c,m)=>{var $=pa(),N=s($,!0);n($);var U={};ee(()=>{ae(N,e(m).text),U!==(U=e(m).value)&&($.value=($.__value=e(m).value)??"")}),E(c,$)}),n(g),n(v),n(z),ee(()=>{fe(q,"for",`${d()??""}-select`),ae(D,o()),g.disabled=L(),fe(g,"aria-describedby",a()?`${d()}-desc`:void 0),fe(g,"name",d()),fe(g,"id",`${d()??""}-select`)}),Ct(g,r),E(I,z),le(),X()}lt(["change"]);var ba=A('<a href="https://docs.immich.app/administration/server-commands" rel="noreferrer" target="_blank" class="underline"> </a>'),ha=A('<div class="flex flex-col gap-4 text-center"><p> </p> <p><!></p></div>');function $a(I,P){ne(P,!0);const i=()=>ie(re,"$t",Q),[Q,X]=se();{const r=a=>{var d=ha(),C=s(d),R=s(C,!0);n(C);var L=l(C,2),M=s(L);Pe(M,{key:"admin.authentication_settings_reenable",children:(z,f)=>{let q=()=>f?.().message;var D=ba(),T=s(D,!0);n(D),ee(()=>ae(T,q())),E(z,D)},$$slots:{default:!0}}),n(L),n(d),ee(S=>ae(R,S),[()=>i()("admin.authentication_settings_disable_all")]),E(a,d)};let o=t(()=>i()("admin.disable_login"));aa(I,{get title(){return e(o)},get icon(){return Lt},size:"small",get onClose(){return P.onClose},prompt:r,$$slots:{prompt:!0}})}le(),X()}var xa=A('<a href="https://docs.immich.app/administration/oauth" class="underline" target="_blank" rel="noreferrer"> </a>'),ya=A('<hr/> <div class="flex items-center gap-2 justify-between"><!> <!></div> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!>',1),ka=A('<div class="ms-4 mt-4 flex flex-col gap-4"><!> <!> <!></div>'),Ea=A('<div class="ms-4 mt-4 flex flex-col gap-4"><div class="ms-4 mt-4 flex flex-col"><!></div></div>'),Ta=A('<div><div><form autocomplete="off"><div class="ms-4 mt-4 flex flex-col"><!> <!> <!></div></form></div></div>');function Ca(I,P){ne(P,!0);const i=()=>ie(re,"$t",Q),[Q,X]=se(),r=t(()=>me.value.configFile),o=t(()=>Y.value);let a=ge(he(Y.cloneValue()));const d=()=>{!e(a).oauth.mobileOverrideEnabled&&!e(a).oauth.mobileRedirectUri&&(e(a).oauth.mobileRedirectUri=globalThis.location.origin+"/api/oauth/mobile-redirect")},C=async()=>!(!e(a).oauth.enabled&&!e(a).passwordLogin.enabled&&!await We.show($a)),R=async()=>{if(await We.showDialog({icon:wt,title:i()("admin.unlink_all_oauth_accounts"),prompt:i()("admin.unlink_all_oauth_accounts_prompt"),confirmColor:"danger"}))try{await ft(),nt.success()}catch(w){Ge(w,i()("errors.something_went_wrong"))}};var L=Ta(),M=s(L),S=s(M),z=s(S),f=s(z);{let T=t(()=>i()("admin.oauth_settings")),w=t(()=>i()("admin.oauth_settings_description"));ue(f,{key:"oauth",get title(){return e(T)},get subtitle(){return e(w)},children:(O,h)=>{var v=ka(),b=s(v);rt(b,{size:"small",children:($,N)=>{Pe($,{key:"admin.oauth_settings_more_details",children:(x,p)=>{let u=()=>p?.().message;var _=xa(),y=s(_,!0);n(_),ee(()=>ae(y,u())),E(x,_)},$$slots:{default:!0}})},$$slots:{default:!0}});var g=l(b,2);{let $=t(()=>i()("admin.oauth_enable_description"));J(g,{get disabled(){return e(r)},get title(){return e($)},get checked(){return e(a).oauth.enabled},set checked(N){e(a).oauth.enabled=N}})}var c=l(g,2);{var m=$=>{var N=ya(),U=l(xe(N),2),x=s(U);rt(x,{size:"small",children:(W,K)=>{Ve();var G=qe();ee(te=>ae(G,te),[()=>i()("admin.unlink_all_oauth_accounts_description")]),E(W,G)},$$slots:{default:!0}});var p=l(x,2);Qe(p,{size:"small",onclick:R,children:(W,K)=>{Ve();var G=qe();ee(te=>ae(G,te),[()=>i()("admin.unlink_all_oauth_accounts")]),E(W,G)},$$slots:{default:!0}}),n(U);var u=l(U,2);{let W=t(()=>e(r)||!e(a).oauth.enabled),K=t(()=>e(a).oauth.issuerUrl!==e(o).oauth.issuerUrl);B(u,{get inputType(){return F.TEXT},label:"issuer_url",required:!0,get disabled(){return e(W)},get isEdited(){return e(K)},get value(){return e(a).oauth.issuerUrl},set value(G){e(a).oauth.issuerUrl=G}})}var _=l(u,2);{let W=t(()=>e(r)||!e(a).oauth.enabled),K=t(()=>e(a).oauth.clientId!==e(o).oauth.clientId);B(_,{get inputType(){return F.TEXT},label:"client_id",required:!0,get disabled(){return e(W)},get isEdited(){return e(K)},get value(){return e(a).oauth.clientId},set value(G){e(a).oauth.clientId=G}})}var y=l(_,2);{let W=t(()=>i()("admin.oauth_client_secret_description")),K=t(()=>e(r)||!e(a).oauth.enabled),G=t(()=>e(a).oauth.clientSecret!==e(o).oauth.clientSecret);B(y,{get inputType(){return F.TEXT},label:"client_secret",get description(){return e(W)},get disabled(){return e(K)},get isEdited(){return e(G)},get value(){return e(a).oauth.clientSecret},set value(te){e(a).oauth.clientSecret=te}})}var k=l(y,2);{var V=W=>{{let K=t(()=>e(r)||!e(a).oauth.enabled||!e(a).oauth.clientSecret),G=t(()=>e(a).oauth.tokenEndpointAuthMethod!==e(o).oauth.tokenEndpointAuthMethod),te=t(()=>[{value:it.ClientSecretPost,text:"client_secret_post"},{value:it.ClientSecretBasic,text:"client_secret_basic"}]);ve(W,{label:"token_endpoint_auth_method",get disabled(){return e(K)},get isEdited(){return e(G)},get options(){return e(te)},name:"tokenEndpointAuthMethod",get value(){return e(a).oauth.tokenEndpointAuthMethod},set value(Ee){e(a).oauth.tokenEndpointAuthMethod=Ee}})}};be(k,W=>{e(a).oauth.clientSecret&&W(V)})}var H=l(k,2);{let W=t(()=>e(r)||!e(a).oauth.enabled),K=t(()=>e(a).oauth.scope!==e(o).oauth.scope);B(H,{get inputType(){return F.TEXT},label:"scope",required:!0,get disabled(){return e(W)},get isEdited(){return e(K)},get value(){return e(a).oauth.scope},set value(G){e(a).oauth.scope=G}})}var j=l(H,2);{let W=t(()=>e(r)||!e(a).oauth.enabled),K=t(()=>e(a).oauth.signingAlgorithm!==e(o).oauth.signingAlgorithm);B(j,{get inputType(){return F.TEXT},label:"id_token_signed_response_alg",required:!0,get disabled(){return e(W)},get isEdited(){return e(K)},get value(){return e(a).oauth.signingAlgorithm},set value(G){e(a).oauth.signingAlgorithm=G}})}var Z=l(j,2);{let W=t(()=>e(r)||!e(a).oauth.enabled),K=t(()=>e(a).oauth.profileSigningAlgorithm!==e(o).oauth.profileSigningAlgorithm);B(Z,{get inputType(){return F.TEXT},label:"userinfo_signed_response_alg",required:!0,get disabled(){return e(W)},get isEdited(){return e(K)},get value(){return e(a).oauth.profileSigningAlgorithm},set value(G){e(a).oauth.profileSigningAlgorithm=G}})}var ye=l(Z,2);{let W=t(()=>i()("admin.oauth_timeout")),K=t(()=>i()("admin.oauth_timeout_description")),G=t(()=>e(r)||!e(a).oauth.enabled),te=t(()=>e(a).oauth.timeout!==e(o).oauth.timeout);B(ye,{get inputType(){return F.NUMBER},get label(){return e(W)},get description(){return e(K)},required:!0,get disabled(){return e(G)},get isEdited(){return e(te)},get value(){return e(a).oauth.timeout},set value(Ee){e(a).oauth.timeout=Ee}})}var Ce=l(ye,2);{let W=t(()=>i()("admin.oauth_storage_label_claim")),K=t(()=>i()("admin.oauth_storage_label_claim_description")),G=t(()=>e(r)||!e(a).oauth.enabled),te=t(()=>e(a).oauth.storageLabelClaim!==e(o).oauth.storageLabelClaim);B(Ce,{get inputType(){return F.TEXT},get label(){return e(W)},get description(){return e(K)},required:!0,get disabled(){return e(G)},get isEdited(){return e(te)},get value(){return e(a).oauth.storageLabelClaim},set value(Ee){e(a).oauth.storageLabelClaim=Ee}})}var ke=l(Ce,2);{let W=t(()=>i()("admin.oauth_role_claim")),K=t(()=>i()("admin.oauth_role_claim_description")),G=t(()=>e(r)||!e(a).oauth.enabled),te=t(()=>e(a).oauth.roleClaim!==e(o).oauth.roleClaim);B(ke,{get inputType(){return F.TEXT},get label(){return e(W)},get description(){return e(K)},required:!0,get disabled(){return e(G)},get isEdited(){return e(te)},get value(){return e(a).oauth.roleClaim},set value(Ee){e(a).oauth.roleClaim=Ee}})}var we=l(ke,2);{let W=t(()=>i()("admin.oauth_storage_quota_claim")),K=t(()=>i()("admin.oauth_storage_quota_claim_description")),G=t(()=>e(r)||!e(a).oauth.enabled),te=t(()=>e(a).oauth.storageQuotaClaim!==e(o).oauth.storageQuotaClaim);B(we,{get inputType(){return F.TEXT},get label(){return e(W)},get description(){return e(K)},required:!0,get disabled(){return e(G)},get isEdited(){return e(te)},get value(){return e(a).oauth.storageQuotaClaim},set value(Ee){e(a).oauth.storageQuotaClaim=Ee}})}var De=l(we,2);{let W=t(()=>i()("admin.oauth_storage_quota_default")),K=t(()=>i()("admin.oauth_storage_quota_default_description")),G=t(()=>e(r)||!e(a).oauth.enabled),te=t(()=>e(a).oauth.defaultStorageQuota!==e(o).oauth.defaultStorageQuota);B(De,{get inputType(){return F.NUMBER},get label(){return e(W)},get description(){return e(K)},required:!1,get disabled(){return e(G)},get isEdited(){return e(te)},get value(){return e(a).oauth.defaultStorageQuota},set value(Ee){e(a).oauth.defaultStorageQuota=Ee}})}var Ze=l(De,2);{let W=t(()=>i()("admin.oauth_button_text")),K=t(()=>e(r)||!e(a).oauth.enabled),G=t(()=>e(a).oauth.buttonText!==e(o).oauth.buttonText);B(Ze,{get inputType(){return F.TEXT},get label(){return e(W)},required:!1,get disabled(){return e(K)},get isEdited(){return e(G)},get value(){return e(a).oauth.buttonText},set value(te){e(a).oauth.buttonText=te}})}var et=l(Ze,2);{let W=t(()=>i()("admin.oauth_auto_register")),K=t(()=>i()("admin.oauth_auto_register_description")),G=t(()=>e(r)||!e(a).oauth.enabled);J(et,{get title(){return e(W)},get subtitle(){return e(K)},get disabled(){return e(G)},get checked(){return e(a).oauth.autoRegister},set checked(te){e(a).oauth.autoRegister=te}})}var tt=l(et,2);{let W=t(()=>i()("admin.oauth_auto_launch")),K=t(()=>i()("admin.oauth_auto_launch_description")),G=t(()=>e(r)||!e(a).oauth.enabled);J(tt,{get title(){return e(W)},get subtitle(){return e(K)},get disabled(){return e(G)},get checked(){return e(a).oauth.autoLaunch},set checked(te){e(a).oauth.autoLaunch=te}})}var at=l(tt,2);{let W=t(()=>i()("admin.oauth_mobile_redirect_uri_override")),K=t(()=>i()("admin.oauth_mobile_redirect_uri_override_description",{values:{callback:"app.immich:///oauth-callback"}})),G=t(()=>e(r)||!e(a).oauth.enabled);J(at,{get title(){return e(W)},get subtitle(){return e(K)},get disabled(){return e(G)},onToggle:()=>d(),get checked(){return e(a).oauth.mobileOverrideEnabled},set checked(te){e(a).oauth.mobileOverrideEnabled=te}})}var ut=l(at,2);{var ct=W=>{{let K=t(()=>i()("admin.oauth_mobile_redirect_uri")),G=t(()=>e(r)||!e(a).oauth.enabled),te=t(()=>e(a).oauth.mobileRedirectUri!==e(o).oauth.mobileRedirectUri);B(W,{get inputType(){return F.TEXT},get label(){return e(K)},required:!0,get disabled(){return e(G)},get isEdited(){return e(te)},get value(){return e(a).oauth.mobileRedirectUri},set value(Ee){e(a).oauth.mobileRedirectUri=Ee}})}};be(ut,W=>{e(a).oauth.mobileOverrideEnabled&&W(ct)})}E($,N)};be(c,$=>{e(a).oauth.enabled&&$(m)})}n(v),E(O,v)},$$slots:{default:!0}})}var q=l(f,2);{let T=t(()=>i()("admin.password_settings")),w=t(()=>i()("admin.password_settings_description"));ue(q,{key:"password",get title(){return e(T)},get subtitle(){return e(w)},children:(O,h)=>{var v=Ea(),b=s(v),g=s(b);{let c=t(()=>i()("admin.password_enable_description"));J(g,{get title(){return e(c)},get disabled(){return e(r)},get checked(){return e(a).passwordLogin.enabled},set checked(m){e(a).passwordLogin.enabled=m}})}n(b),n(v),E(O,v)},$$slots:{default:!0}})}var D=l(q,2);$e(D,{keys:["passwordLogin","oauth"],onBeforeSave:C,get disabled(){return e(r)},get configToEdit(){return e(a)},set configToEdit(T){oe(a,T,!0)}}),n(z),n(S),n(M),n(L),_e("submit",S,T=>T.preventDefault()),ce(1,M,()=>pe,()=>({duration:500})),E(I,L),le(),X()}var La=A('<a class="underline" target="_blank" rel="noreferrer"> <br/></a>'),wa=A('<p class="text-sm dark:text-immich-dark-fg"><!></p>'),Sa=A('<div><div><form autocomplete="off"><div class="ms-4 mt-4 flex flex-col gap-4"><!> <!> <!> <!> <!></div></form></div></div>');function Pa(I,P){ne(P,!0);const i=()=>ie(re,"$t",Q),[Q,X]=se(),r=t(()=>me.value.configFile),o=t(()=>Y.value);let a=ge(he(Y.cloneValue())),d=t(()=>[{text:i()("interval.night_at_midnight"),value:"0 0 * * *"},{text:i()("interval.night_at_twoam"),value:"0 02 * * *"},{text:i()("interval.day_at_onepm"),value:"0 13 * * *"},{text:i()("interval.hours",{values:{hours:6}}),value:"0 */6 * * *"}]);var C=Sa(),R=s(C),L=s(R),M=s(L),S=s(M);{let T=t(()=>i()("admin.backup_database_enable_description"));J(S,{get title(){return e(T)},get disabled(){return e(r)},get checked(){return e(a).backup.database.enabled},set checked(w){e(a).backup.database.enabled=w}})}var z=l(S,2);{let T=t(()=>e(r)||!e(a).backup.database.enabled),w=t(()=>i()("admin.cron_expression_presets"));ve(z,{get options(){return e(d)},get disabled(){return e(T)},name:"expression",get label(){return e(w)},get value(){return e(a).backup.database.cronExpression},set value(O){e(a).backup.database.cronExpression=O}})}var f=l(z,2);{const T=v=>{var b=wa(),g=s(b);Pe(g,{key:"admin.cron_expression_description",children:(m,$)=>{let N=()=>$?.().message;var U=La(),x=s(U);Ve(),n(U),ee(p=>{fe(U,"href",`https://crontab.guru/#${p??""}`),ae(x,`${N()??""} `)},[()=>e(a).backup.database.cronExpression.replaceAll(" ","_")]),E(m,U)},$$slots:{default:!0}}),n(b),E(v,b)};let w=t(()=>e(r)||!e(a).backup.database.enabled),O=t(()=>i()("admin.cron_expression")),h=t(()=>e(a).backup.database.cronExpression!==e(o).backup.database.cronExpression);B(f,{get inputType(){return F.TEXT},required:!0,get disabled(){return e(w)},get label(){return e(O)},get isEdited(){return e(h)},get value(){return e(a).backup.database.cronExpression},set value(v){e(a).backup.database.cronExpression=v},descriptionSnippet:T,$$slots:{descriptionSnippet:!0}})}var q=l(f,2);{let T=t(()=>i()("admin.backup_keep_last_amount")),w=t(()=>e(r)||!e(a).backup.database.enabled),O=t(()=>e(a).backup.database.keepLastAmount!==e(o).backup.database.keepLastAmount);B(q,{get inputType(){return F.NUMBER},required:!0,get label(){return e(T)},get disabled(){return e(w)},get isEdited(){return e(O)},get value(){return e(a).backup.database.keepLastAmount},set value(h){e(a).backup.database.keepLastAmount=h}})}var D=l(q,2);$e(D,{get disabled(){return e(r)},keys:["backup"],get configToEdit(){return e(a)},set configToEdit(T){oe(a,T,!0)}}),n(M),n(L),n(R),n(C),_e("submit",L,T=>T.preventDefault()),ce(1,R,()=>pe,()=>({duration:500})),E(I,C),le(),X()}var Ra=A('<div class="rounded-full bg-orange-100 px-2 text-[10px] text-orange-900"> </div>'),Da=A('<p class="immich-form-label pb-2 text-sm"> </p>'),Ma=A('<div class="flex gap-2 items-center"><!> <!></div>'),Aa=A('<div class="mb-4 w-full"><div class="flex h-6.5 place-items-center gap-1"><label class="font-medium text-primary text-sm"> </label> <!></div> <!> <div class="flex flex-col gap-2"></div></div>');function He(I,P){ne(P,!0);const i=()=>ie(re,"$t",Q),[Q,X]=se();let r=de(P,"value",15),o=de(P,"label",3,""),a=de(P,"desc",3,""),d=de(P,"name",3,""),C=de(P,"isEdited",3,!1),R=de(P,"disabled",3,!1);function L(h){r(r().includes(h)?r().filter(v=>v!==h):[...r(),h])}var M=Aa(),S=s(M),z=s(S),f=s(z,!0);n(z);var q=l(z,2);{var D=h=>{var v=Ra(),b=s(v,!0);n(v),ee(g=>ae(b,g),[()=>i()("unsaved_change")]),ce(3,v,()=>Ke,()=>({x:10,duration:200,easing:Ye})),E(h,v)};be(q,h=>{C()&&h(D)})}n(S);var T=l(S,2);{var w=h=>{var v=Da(),b=s(v,!0);n(v),ee(()=>{fe(v,"id",`${d()??""}-desc`),ae(b,a())}),E(h,v)};be(T,h=>{a()&&h(w)})}var O=l(T,2);ze(O,21,()=>P.options,h=>h.value,(h,v)=>{var b=Ma(),g=s(b);{let m=t(()=>r().includes(e(v).value));na(g,{size:"tiny",get id(){return`${e(v).value??""}-checkbox`},get checked(){return e(m)},get disabled(){return R()},onCheckedChange:()=>L(e(v).value)})}var c=l(g,2);la(c,{get label(){return e(v).text},get for(){return`${e(v).value??""}-checkbox`},size:"small"}),n(b),E(h,b)}),n(O),n(M),ee(()=>{fe(z,"for",`${d()??""}-select`),ae(f,o())}),E(I,M),le(),X()}var qa=A('<a href="https://trac.ffmpeg.org/wiki/Encode/H.264" class="underline" target="_blank" rel="noreferrer"> </a>'),Na=A('<a href="https://trac.ffmpeg.org/wiki/Encode/H.265" class="underline" target="_blank" rel="noreferrer"> </a>'),za=A('<a href="https://trac.ffmpeg.org/wiki/Encode/VP9" class="underline" target="_blank" rel="noreferrer"> </a>'),Oa=A('<div class="ms-4 mt-4 flex flex-col gap-4"><!> <!> <!> <!></div>'),Ua=A('<div class="ms-4 mt-4 flex flex-col gap-4"><!> <!> <!> <!> <!> <!> <!> <!> <!></div>'),Va=A('<div class="ms-4 mt-4 flex flex-col gap-4"><!> <!> <!> <!> <!></div>'),Ba=A('<div class="ms-4 mt-4 flex flex-col gap-4"><!> <!> <!></div>'),Fa=A('<div><div><form autocomplete="off"><div class="ms-4 mt-4 flex flex-col gap-4"><p class="text-sm dark:text-immich-dark-fg"><!> <!></p> <!> <!> <!> <!></div> <div class="ms-4"><!></div></form></div></div>');function Qa(I,P){ne(P,!0);const i=()=>ie(re,"$t",Q),[Q,X]=se(),r=t(()=>me.value.configFile),o=t(()=>Y.value);let a=ge(he(Y.cloneValue()));var d=Fa(),C=s(d),R=s(C),L=s(R),M=s(L),S=s(M);Je(S,{get icon(){return St},class:"inline",size:"15"});var z=l(S,2);Pe(z,{key:"admin.transcoding_codecs_learn_more",children:(v,b)=>{let g=()=>b?.().tag,c=()=>b?.().message;var m=Ne(),$=xe(m);{var N=p=>{var u=qa(),_=s(u,!0);n(u),ee(()=>ae(_,c())),E(p,u)},U=p=>{var u=Na(),_=s(u,!0);n(u),ee(()=>ae(_,c())),E(p,u)},x=p=>{var u=za(),_=s(u,!0);n(u),ee(()=>ae(_,c())),E(p,u)};be($,p=>{g()==="h264-link"?p(N):g()==="hevc-link"?p(U,1):g()==="vp9-link"&&p(x,2)})}E(v,m)},$$slots:{default:!0}}),n(M);var f=l(M,2);{let h=t(()=>i()("admin.transcoding_policy")),v=t(()=>i()("admin.transcoding_policy_description"));ue(f,{key:"transcoding-policy",get title(){return e(h)},get subtitle(){return e(v)},children:(b,g)=>{var c=Oa(),m=s(c);{let x=t(()=>i()("admin.transcoding_transcode_policy")),p=t(()=>i()("admin.transcoding_transcode_policy_description")),u=t(()=>[{value:Oe.All,text:i()("all_videos")},{value:Oe.Optimal,text:i()("admin.transcoding_optimal_description")},{value:Oe.Bitrate,text:i()("admin.transcoding_bitrate_description")},{value:Oe.Required,text:i()("admin.transcoding_required_description")},{value:Oe.Disabled,text:i()("admin.transcoding_disabled_description")}]),_=t(()=>e(a).ffmpeg.transcode!==e(o).ffmpeg.transcode);ve(m,{get label(){return e(x)},get disabled(){return e(r)},get desc(){return e(p)},name:"transcode",get options(){return e(u)},get isEdited(){return e(_)},get value(){return e(a).ffmpeg.transcode},set value(y){e(a).ffmpeg.transcode=y}})}var $=l(m,2);{let x=t(()=>i()("admin.transcoding_accepted_video_codecs")),p=t(()=>i()("admin.transcoding_accepted_video_codecs_description")),u=t(()=>[{value:Se.H264,text:"H.264"},{value:Se.Hevc,text:"HEVC"},{value:Se.Vp9,text:"VP9"},{value:Se.Av1,text:"AV1"}]),_=t(()=>!Fe(Ae(e(a).ffmpeg.acceptedVideoCodecs),Ae(e(o).ffmpeg.acceptedVideoCodecs)));He($,{get label(){return e(x)},get disabled(){return e(r)},get desc(){return e(p)},name:"videoCodecs",get options(){return e(u)},get isEdited(){return e(_)},get value(){return e(a).ffmpeg.acceptedVideoCodecs},set value(y){e(a).ffmpeg.acceptedVideoCodecs=y}})}var N=l($,2);{let x=t(()=>i()("admin.transcoding_accepted_audio_codecs")),p=t(()=>i()("admin.transcoding_accepted_audio_codecs_description")),u=t(()=>[{value:Re.Aac,text:"AAC"},{value:Re.Mp3,text:"MP3"},{value:Re.Libopus,text:"Opus"},{value:Re.PcmS16Le,text:"PCM (16 bit)"}]),_=t(()=>!Fe(Ae(e(a).ffmpeg.acceptedAudioCodecs),Ae(e(o).ffmpeg.acceptedAudioCodecs)));He(N,{get label(){return e(x)},get disabled(){return e(r)},get desc(){return e(p)},name:"audioCodecs",get options(){return e(u)},get isEdited(){return e(_)},get value(){return e(a).ffmpeg.acceptedAudioCodecs},set value(y){e(a).ffmpeg.acceptedAudioCodecs=y}})}var U=l(N,2);{let x=t(()=>i()("admin.transcoding_accepted_containers")),p=t(()=>i()("admin.transcoding_accepted_containers_description")),u=t(()=>[{value:Ie.Mov,text:"MOV"},{value:Ie.Ogg,text:"Ogg"},{value:Ie.Webm,text:"WebM"}]),_=t(()=>!Fe(Ae(e(a).ffmpeg.acceptedContainers),Ae(e(o).ffmpeg.acceptedContainers)));He(U,{get label(){return e(x)},get disabled(){return e(r)},get desc(){return e(p)},name:"videoContainers",get options(){return e(u)},get isEdited(){return e(_)},get value(){return e(a).ffmpeg.acceptedContainers},set value(y){e(a).ffmpeg.acceptedContainers=y}})}n(c),E(b,c)},$$slots:{default:!0}})}var q=l(f,2);{let h=t(()=>i()("admin.transcoding_encoding_options")),v=t(()=>i()("admin.transcoding_encoding_options_description"));ue(q,{key:"encoding-options",get title(){return e(h)},get subtitle(){return e(v)},children:(b,g)=>{var c=Ua(),m=s(c);{let k=t(()=>i()("admin.transcoding_video_codec")),V=t(()=>i()("admin.transcoding_video_codec_description")),H=t(()=>[{value:Se.H264,text:"h264"},{value:Se.Hevc,text:"hevc"},{value:Se.Vp9,text:"vp9"},{value:Se.Av1,text:"av1"}]),j=t(()=>e(a).ffmpeg.targetVideoCodec!==e(o).ffmpeg.targetVideoCodec);ve(m,{get label(){return e(k)},get disabled(){return e(r)},get desc(){return e(V)},get options(){return e(H)},name:"vcodec",get isEdited(){return e(j)},onSelect:()=>e(a).ffmpeg.acceptedVideoCodecs=[e(a).ffmpeg.targetVideoCodec],get value(){return e(a).ffmpeg.targetVideoCodec},set value(Z){e(a).ffmpeg.targetVideoCodec=Z}})}var $=l(m,2);{let k=t(()=>i()("admin.transcoding_audio_codec")),V=t(()=>i()("admin.transcoding_audio_codec_description")),H=t(()=>[{value:Re.Aac,text:"aac"},{value:Re.Mp3,text:"mp3"},{value:Re.Libopus,text:"opus"}]),j=t(()=>e(a).ffmpeg.targetAudioCodec!==e(o).ffmpeg.targetAudioCodec);ve($,{get label(){return e(k)},get disabled(){return e(r)},get desc(){return e(V)},get options(){return e(H)},name:"acodec",get isEdited(){return e(j)},onSelect:()=>e(a).ffmpeg.acceptedAudioCodecs.includes(e(a).ffmpeg.targetAudioCodec)?null:e(a).ffmpeg.acceptedAudioCodecs.push(e(a).ffmpeg.targetAudioCodec),get value(){return e(a).ffmpeg.targetAudioCodec},set value(Z){e(a).ffmpeg.targetAudioCodec=Z}})}var N=l($,2);{let k=t(()=>i()("admin.transcoding_target_resolution")),V=t(()=>i()("admin.transcoding_target_resolution_description")),H=t(()=>[{value:"2160",text:"4k"},{value:"1440",text:"1440p"},{value:"1080",text:"1080p"},{value:"720",text:"720p"},{value:"480",text:"480p"},{value:"original",text:i()("original")}]),j=t(()=>e(a).ffmpeg.targetResolution!==e(o).ffmpeg.targetResolution);ve(N,{get label(){return e(k)},get disabled(){return e(r)},get desc(){return e(V)},get options(){return e(H)},name:"resolution",get isEdited(){return e(j)},get value(){return e(a).ffmpeg.targetResolution},set value(Z){e(a).ffmpeg.targetResolution=Z}})}var U=l(N,2);{let k=t(()=>i()("admin.transcoding_constant_rate_factor")),V=t(()=>i()("admin.transcoding_constant_rate_factor_description")),H=t(()=>e(a).ffmpeg.crf!==e(o).ffmpeg.crf);B(U,{get inputType(){return F.NUMBER},get disabled(){return e(r)},get label(){return e(k)},get description(){return e(V)},required:!0,get isEdited(){return e(H)},get value(){return e(a).ffmpeg.crf},set value(j){e(a).ffmpeg.crf=j}})}var x=l(U,2);{let k=t(()=>i()("admin.transcoding_preset_preset")),V=t(()=>i()("admin.transcoding_preset_preset_description")),H=t(()=>e(a).ffmpeg.preset!==e(o).ffmpeg.preset);ve(x,{get label(){return e(k)},get disabled(){return e(r)},get desc(){return e(V)},name:"preset",options:[{value:"ultrafast",text:"ultrafast"},{value:"superfast",text:"superfast"},{value:"veryfast",text:"veryfast"},{value:"faster",text:"faster"},{value:"fast",text:"fast"},{value:"medium",text:"medium"},{value:"slow",text:"slow"},{value:"slower",text:"slower"},{value:"veryslow",text:"veryslow"}],get isEdited(){return e(H)},get value(){return e(a).ffmpeg.preset},set value(j){e(a).ffmpeg.preset=j}})}var p=l(x,2);{let k=t(()=>i()("admin.transcoding_max_bitrate")),V=t(()=>i()("admin.transcoding_max_bitrate_description")),H=t(()=>e(a).ffmpeg.maxBitrate!==e(o).ffmpeg.maxBitrate);B(p,{get inputType(){return F.TEXT},get disabled(){return e(r)},get label(){return e(k)},get description(){return e(V)},get isEdited(){return e(H)},get value(){return e(a).ffmpeg.maxBitrate},set value(j){e(a).ffmpeg.maxBitrate=j}})}var u=l(p,2);{let k=t(()=>i()("admin.transcoding_threads")),V=t(()=>i()("admin.transcoding_threads_description")),H=t(()=>e(a).ffmpeg.threads!==e(o).ffmpeg.threads);B(u,{get inputType(){return F.NUMBER},get disabled(){return e(r)},get label(){return e(k)},get description(){return e(V)},get isEdited(){return e(H)},get value(){return e(a).ffmpeg.threads},set value(j){e(a).ffmpeg.threads=j}})}var _=l(u,2);{let k=t(()=>i()("admin.transcoding_tone_mapping")),V=t(()=>i()("admin.transcoding_tone_mapping_description")),H=t(()=>[{value:Be.Hable,text:"Hable"},{value:Be.Mobius,text:"Mobius"},{value:Be.Reinhard,text:"Reinhard"},{value:Be.Disabled,text:i()("disabled")}]),j=t(()=>e(a).ffmpeg.tonemap!==e(o).ffmpeg.tonemap);ve(_,{get label(){return e(k)},get disabled(){return e(r)},get desc(){return e(V)},name:"tonemap",get options(){return e(H)},get isEdited(){return e(j)},get value(){return e(a).ffmpeg.tonemap},set value(Z){e(a).ffmpeg.tonemap=Z}})}var y=l(_,2);{let k=t(()=>i()("admin.transcoding_two_pass_encoding")),V=t(()=>i()("admin.transcoding_two_pass_encoding_setting_description")),H=t(()=>e(a).ffmpeg.twoPass!==e(o).ffmpeg.twoPass);J(y,{get title(){return e(k)},get disabled(){return e(r)},get subtitle(){return e(V)},get isEdited(){return e(H)},get checked(){return e(a).ffmpeg.twoPass},set checked(j){e(a).ffmpeg.twoPass=j}})}n(c),E(b,c)},$$slots:{default:!0}})}var D=l(q,2);{let h=t(()=>i()("admin.transcoding_hardware_acceleration")),v=t(()=>i()("admin.transcoding_hardware_acceleration_description"));ue(D,{key:"hardware-acceleration",get title(){return e(h)},get subtitle(){return e(v)},children:(b,g)=>{var c=Va(),m=s(c);{let p=t(()=>i()("admin.transcoding_acceleration_api")),u=t(()=>i()("admin.transcoding_acceleration_api_description")),_=t(()=>[{value:Ue.Nvenc,text:i()("admin.transcoding_acceleration_nvenc")},{value:Ue.Qsv,text:i()("admin.transcoding_acceleration_qsv")},{value:Ue.Vaapi,text:i()("admin.transcoding_acceleration_vaapi")},{value:Ue.Rkmpp,text:i()("admin.transcoding_acceleration_rkmpp")},{value:Ue.Disabled,text:i()("disabled")}]),y=t(()=>e(a).ffmpeg.accel!==e(o).ffmpeg.accel);ve(m,{get label(){return e(p)},get disabled(){return e(r)},get desc(){return e(u)},name:"accel",get options(){return e(_)},get isEdited(){return e(y)},get value(){return e(a).ffmpeg.accel},set value(k){e(a).ffmpeg.accel=k}})}var $=l(m,2);{let p=t(()=>i()("admin.transcoding_hardware_decoding")),u=t(()=>i()("admin.transcoding_hardware_decoding_setting_description")),_=t(()=>e(a).ffmpeg.accelDecode!==e(o).ffmpeg.accelDecode);J($,{get title(){return e(p)},get disabled(){return e(r)},get subtitle(){return e(u)},get isEdited(){return e(_)},get checked(){return e(a).ffmpeg.accelDecode},set checked(y){e(a).ffmpeg.accelDecode=y}})}var N=l($,2);{let p=t(()=>i()("admin.transcoding_constant_quality_mode")),u=t(()=>i()("admin.transcoding_constant_quality_mode_description")),_=t(()=>[{value:Xe.Auto,text:"Auto"},{value:Xe.Icq,text:"ICQ"},{value:Xe.Cqp,text:"CQP"}]),y=t(()=>e(a).ffmpeg.cqMode!==e(o).ffmpeg.cqMode);ve(N,{get label(){return e(p)},get desc(){return e(u)},get options(){return e(_)},get isEdited(){return e(y)},get disabled(){return e(r)},get value(){return e(a).ffmpeg.cqMode},set value(k){e(a).ffmpeg.cqMode=k}})}var U=l(N,2);{let p=t(()=>i()("admin.transcoding_temporal_aq")),u=t(()=>i()("admin.transcoding_temporal_aq_description")),_=t(()=>e(a).ffmpeg.temporalAQ!==e(o).ffmpeg.temporalAQ);J(U,{get title(){return e(p)},get disabled(){return e(r)},get subtitle(){return e(u)},get isEdited(){return e(_)},get checked(){return e(a).ffmpeg.temporalAQ},set checked(y){e(a).ffmpeg.temporalAQ=y}})}var x=l(U,2);{let p=t(()=>i()("admin.transcoding_preferred_hardware_device")),u=t(()=>i()("admin.transcoding_preferred_hardware_device_description")),_=t(()=>e(a).ffmpeg.preferredHwDevice!==e(o).ffmpeg.preferredHwDevice);B(x,{get inputType(){return F.TEXT},get label(){return e(p)},get description(){return e(u)},get isEdited(){return e(_)},get disabled(){return e(r)},get value(){return e(a).ffmpeg.preferredHwDevice},set value(y){e(a).ffmpeg.preferredHwDevice=y}})}n(c),E(b,c)},$$slots:{default:!0}})}var T=l(D,2);{let h=t(()=>i()("advanced")),v=t(()=>i()("admin.transcoding_advanced_options_description"));ue(T,{key:"advanced-options",get title(){return e(h)},get subtitle(){return e(v)},children:(b,g)=>{var c=Ba(),m=s(c);{let U=t(()=>i()("admin.transcoding_max_b_frames")),x=t(()=>i()("admin.transcoding_max_b_frames_description")),p=t(()=>e(a).ffmpeg.bframes!==e(o).ffmpeg.bframes);B(m,{get inputType(){return F.NUMBER},get label(){return e(U)},get description(){return e(x)},get isEdited(){return e(p)},get disabled(){return e(r)},get value(){return e(a).ffmpeg.bframes},set value(u){e(a).ffmpeg.bframes=u}})}var $=l(m,2);{let U=t(()=>i()("admin.transcoding_reference_frames")),x=t(()=>i()("admin.transcoding_reference_frames_description")),p=t(()=>e(a).ffmpeg.refs!==e(o).ffmpeg.refs);B($,{get inputType(){return F.NUMBER},get label(){return e(U)},get description(){return e(x)},get isEdited(){return e(p)},get disabled(){return e(r)},get value(){return e(a).ffmpeg.refs},set value(u){e(a).ffmpeg.refs=u}})}var N=l($,2);{let U=t(()=>i()("admin.transcoding_max_keyframe_interval")),x=t(()=>i()("admin.transcoding_max_keyframe_interval_description")),p=t(()=>e(a).ffmpeg.gopSize!==e(o).ffmpeg.gopSize);B(N,{get inputType(){return F.NUMBER},get label(){return e(U)},get description(){return e(x)},get isEdited(){return e(p)},get disabled(){return e(r)},get value(){return e(a).ffmpeg.gopSize},set value(u){e(a).ffmpeg.gopSize=u}})}n(c),E(b,c)},$$slots:{default:!0}})}n(L);var w=l(L,2),O=s(w);$e(O,{keys:["ffmpeg"],get disabled(){return e(r)},get configToEdit(){return e(a)},set configToEdit(h){oe(a,h,!0)}}),n(w),n(R),n(C),n(d),_e("submit",R,h=>h.preventDefault()),ce(1,C,()=>pe,()=>({duration:500})),E(I,d),le(),X()}var Ia=A("<!> <!> <!> <!>",1),Xa=A("<!> <!> <!> <!>",1),ja=A('<!> <hr class="my-4"/> <!> <!> <!>',1),Ha=A('<div><div><form autocomplete="off"><div class="ms-4 mt-4"><!> <!> <!> <div class="mt-4"><!></div> <div class="mt-4"><!></div></div> <div class="ms-4 mt-4"><!></div></form></div></div>');function Wa(I,P){ne(P,!0);const i=()=>ie(re,"$t",Q),[Q,X]=se(),r=t(()=>me.value.configFile),o=t(()=>Y.value);let a=ge(he(Y.cloneValue()));var d=Ha(),C=s(d),R=s(C),L=s(R),M=s(L);{let h=t(()=>i()("admin.image_thumbnail_title")),v=t(()=>i()("admin.image_thumbnail_description"));ue(M,{key:"thumbnail-settings",get title(){return e(h)},get subtitle(){return e(v)},children:(b,g)=>{var c=Ia(),m=xe(c);{let x=t(()=>i()("admin.image_format")),p=t(()=>i()("admin.image_format_description")),u=t(()=>[{value:Te.Jpeg,text:"JPEG"},{value:Te.Webp,text:"WebP"}]),_=t(()=>e(a).image.thumbnail.format!==e(o).image.thumbnail.format);ve(m,{get label(){return e(x)},get desc(){return e(p)},get options(){return e(u)},name:"format",get isEdited(){return e(_)},get disabled(){return e(r)},onSelect:y=>{y===Te.Webp&&(e(a).image.thumbnail.progressive=!1)},get value(){return e(a).image.thumbnail.format},set value(y){e(a).image.thumbnail.format=y}})}var $=l(m,2);{let x=t(()=>i()("admin.image_resolution")),p=t(()=>i()("admin.image_resolution_description")),u=t(()=>e(a).image.thumbnail.size!==e(o).image.thumbnail.size);ve($,{get label(){return e(x)},get desc(){return e(p)},number:!0,options:[{value:1080,text:"1080p"},{value:720,text:"720p"},{value:480,text:"480p"},{value:250,text:"250p"},{value:200,text:"200p"}],name:"resolution",get isEdited(){return e(u)},get disabled(){return e(r)},get value(){return e(a).image.thumbnail.size},set value(_){e(a).image.thumbnail.size=_}})}var N=l($,2);{let x=t(()=>i()("admin.image_quality")),p=t(()=>i()("admin.image_thumbnail_quality_description")),u=t(()=>e(a).image.thumbnail.quality!==e(o).image.thumbnail.quality);B(N,{get inputType(){return F.NUMBER},get label(){return e(x)},get description(){return e(p)},get isEdited(){return e(u)},get disabled(){return e(r)},get value(){return e(a).image.thumbnail.quality},set value(_){e(a).image.thumbnail.quality=_}})}var U=l(N,2);{let x=t(()=>i()("admin.image_progressive")),p=t(()=>i()("admin.image_progressive_description")),u=t(()=>e(a).image.thumbnail.progressive!==e(o).image.thumbnail.progressive),_=t(()=>e(r)||e(a).image.thumbnail.format===Te.Webp);J(U,{get title(){return e(x)},get subtitle(){return e(p)},get checked(){return e(a).image.thumbnail.progressive},onToggle:y=>e(a).image.thumbnail.progressive=y,get isEdited(){return e(u)},get disabled(){return e(_)}})}E(b,c)},$$slots:{default:!0}})}var S=l(M,2);{let h=t(()=>i()("admin.image_preview_title")),v=t(()=>i()("admin.image_preview_description"));ue(S,{key:"preview-settings",get title(){return e(h)},get subtitle(){return e(v)},children:(b,g)=>{var c=Xa(),m=xe(c);{let x=t(()=>i()("admin.image_format")),p=t(()=>i()("admin.image_format_description")),u=t(()=>[{value:Te.Jpeg,text:"JPEG"},{value:Te.Webp,text:"WebP"}]),_=t(()=>e(a).image.preview.format!==e(o).image.preview.format);ve(m,{get label(){return e(x)},get desc(){return e(p)},get options(){return e(u)},name:"format",get isEdited(){return e(_)},get disabled(){return e(r)},onSelect:y=>{y===Te.Webp&&(e(a).image.preview.progressive=!1)},get value(){return e(a).image.preview.format},set value(y){e(a).image.preview.format=y}})}var $=l(m,2);{let x=t(()=>i()("admin.image_resolution")),p=t(()=>i()("admin.image_resolution_description")),u=t(()=>e(a).image.preview.size!==e(o).image.preview.size);ve($,{get label(){return e(x)},get desc(){return e(p)},number:!0,options:[{value:2160,text:"4K"},{value:1440,text:"1440p"},{value:1080,text:"1080p"},{value:720,text:"720p"}],name:"resolution",get isEdited(){return e(u)},get disabled(){return e(r)},get value(){return e(a).image.preview.size},set value(_){e(a).image.preview.size=_}})}var N=l($,2);{let x=t(()=>i()("admin.image_quality")),p=t(()=>i()("admin.image_preview_quality_description")),u=t(()=>e(a).image.preview.quality!==e(o).image.preview.quality);B(N,{get inputType(){return F.NUMBER},get label(){return e(x)},get description(){return e(p)},get isEdited(){return e(u)},get disabled(){return e(r)},get value(){return e(a).image.preview.quality},set value(_){e(a).image.preview.quality=_}})}var U=l(N,2);{let x=t(()=>i()("admin.image_progressive")),p=t(()=>i()("admin.image_progressive_description")),u=t(()=>e(a).image.preview.progressive!==e(o).image.preview.progressive),_=t(()=>e(r)||e(a).image.preview.format===Te.Webp);J(U,{get title(){return e(x)},get subtitle(){return e(p)},get checked(){return e(a).image.preview.progressive},onToggle:y=>e(a).image.preview.progressive=y,get isEdited(){return e(u)},get disabled(){return e(_)}})}E(b,c)},$$slots:{default:!0}})}var z=l(S,2);{let h=t(()=>i()("admin.image_fullsize_title")),v=t(()=>i()("admin.image_fullsize_description"));ue(z,{key:"fullsize-settings",get title(){return e(h)},get subtitle(){return e(v)},children:(b,g)=>{var c=ja(),m=xe(c);{let x=t(()=>i()("admin.image_fullsize_enabled")),p=t(()=>i()("admin.image_fullsize_enabled_description")),u=t(()=>e(a).image.fullsize.enabled!==e(o).image.fullsize.enabled);J(m,{get title(){return e(x)},get subtitle(){return e(p)},get checked(){return e(a).image.fullsize.enabled},onToggle:_=>e(a).image.fullsize.enabled=_,get isEdited(){return e(u)},get disabled(){return e(r)}})}var $=l(m,4);{let x=t(()=>i()("admin.image_format")),p=t(()=>i()("admin.image_format_description")),u=t(()=>[{value:Te.Jpeg,text:"JPEG"},{value:Te.Webp,text:"WebP"}]),_=t(()=>e(a).image.fullsize.format!==e(o).image.fullsize.format),y=t(()=>e(r)||!e(a).image.fullsize.enabled);ve($,{get label(){return e(x)},get desc(){return e(p)},get options(){return e(u)},name:"format",get isEdited(){return e(_)},get disabled(){return e(y)},onSelect:k=>{k===Te.Webp&&(e(a).image.fullsize.progressive=!1)},get value(){return e(a).image.fullsize.format},set value(k){e(a).image.fullsize.format=k}})}var N=l($,2);{let x=t(()=>i()("admin.image_quality")),p=t(()=>i()("admin.image_fullsize_quality_description")),u=t(()=>e(a).image.fullsize.quality!==e(o).image.fullsize.quality),_=t(()=>e(r)||!e(a).image.fullsize.enabled);B(N,{get inputType(){return F.NUMBER},get label(){return e(x)},get description(){return e(p)},get isEdited(){return e(u)},get disabled(){return e(_)},get value(){return e(a).image.fullsize.quality},set value(y){e(a).image.fullsize.quality=y}})}var U=l(N,2);{let x=t(()=>i()("admin.image_progressive")),p=t(()=>i()("admin.image_progressive_description")),u=t(()=>e(a).image.fullsize.progressive!==e(o).image.fullsize.progressive),_=t(()=>e(r)||!e(a).image.fullsize.enabled||e(a).image.fullsize.format===Te.Webp);J(U,{get title(){return e(x)},get subtitle(){return e(p)},get checked(){return e(a).image.fullsize.progressive},onToggle:y=>e(a).image.fullsize.progressive=y,get isEdited(){return e(u)},get disabled(){return e(_)}})}E(b,c)},$$slots:{default:!0}})}var f=l(z,2),q=s(f);{let h=t(()=>i()("admin.image_prefer_wide_gamut")),v=t(()=>i()("admin.image_prefer_wide_gamut_setting_description")),b=t(()=>e(a).image.colorspace===je.P3),g=t(()=>e(a).image.colorspace!==e(o).image.colorspace);J(q,{get title(){return e(h)},get subtitle(){return e(v)},get checked(){return e(b)},onToggle:c=>e(a).image.colorspace=c?je.P3:je.Srgb,get isEdited(){return e(g)},get disabled(){return e(r)}})}n(f);var D=l(f,2),T=s(D);{let h=t(()=>i()("admin.image_prefer_embedded_preview")),v=t(()=>i()("admin.image_prefer_embedded_preview_setting_description")),b=t(()=>e(a).image.extractEmbedded!==e(o).image.extractEmbedded);J(T,{get title(){return e(h)},get subtitle(){return e(v)},get checked(){return e(a).image.extractEmbedded},onToggle:()=>e(a).image.extractEmbedded=!e(a).image.extractEmbedded,get isEdited(){return e(b)},get disabled(){return e(r)}})}n(D),n(L);var w=l(L,2),O=s(w);$e(O,{keys:["image"],get disabled(){return e(r)},get configToEdit(){return e(a)},set configToEdit(h){oe(a,h,!0)}}),n(w),n(R),n(C),n(d),_e("submit",R,h=>h.preventDefault()),ce(1,C,()=>pe,()=>({duration:500})),E(I,d),le(),X()}var Ga=A('<div class="ms-4 mt-4 flex flex-col gap-4"><!></div>'),Ja=A('<div><div><form autocomplete="off"><!> <div class="ms-4"><!></div></form></div></div>');function Ka(I,P){ne(P,!0);const i=()=>ie(re,"$t",X),Q=()=>ie(sa,"$getQueueName",X),[X,r]=se(),o=t(()=>me.value.configFile),a=t(()=>Y.value);let d=ge(he(Y.cloneValue()));const C=[Le.ThumbnailGeneration,Le.MetadataExtraction,Le.Library,Le.Sidecar,Le.SmartSearch,Le.FaceDetection,Le.FacialRecognition,Le.VideoConversion,Le.StorageTemplateMigration,Le.Migration,Le.Ocr];function R(D){return D in e(d).job}var L=Ja(),M=s(L),S=s(M),z=s(S);ze(z,16,()=>C,D=>D,(D,T)=>{var w=Ga(),O=s(w);{var h=g=>{{let c=t(()=>i()("admin.job_concurrency",{values:{job:Q()(T)}})),m=t(()=>e(d).job[T].concurrency!=e(a).job[T].concurrency);B(g,{get inputType(){return F.NUMBER},get disabled(){return e(o)},get label(){return e(c)},description:"",required:!0,get isEdited(){return e(m)},get value(){return e(d).job[T].concurrency},set value($){e(d).job[T].concurrency=$}})}},v=t(()=>R(T)),b=g=>{{let c=t(()=>i()("admin.job_concurrency",{values:{job:Q()(T)}})),m=t(()=>i()("admin.job_not_concurrency_safe"));B(g,{get inputType(){return F.NUMBER},get label(){return e(c)},description:"",value:1,disabled:!0,get title(){return e(m)}})}};be(O,g=>{e(v)?g(h):g(b,!1)})}n(w),E(D,w)});var f=l(z,2),q=s(f);$e(q,{keys:["job"],get disabled(){return e(o)},get configToEdit(){return e(d)},set configToEdit(D){oe(d,D,!0)}}),n(f),n(S),n(M),n(L),_e("submit",S,D=>D.preventDefault()),ce(1,M,()=>pe,()=>({duration:500})),E(I,L),le(),r()}var Ya=A('<div class="ms-4 mt-4 flex flex-col gap-4"><!></div>'),Za=A('<a class="underline" target="_blank" rel="noreferrer"> </a>'),ei=A('<p class="text-sm dark:text-immich-dark-fg"><!></p>'),ti=A('<div class="ms-4 mt-4 flex flex-col gap-4"><!> <!> <!></div>'),ai=A('<div><div><form autocomplete="off"><div class="ms-4 mt-4 flex flex-col gap-4"><!> <!> <!></div></form></div></div>');function ii(I,P){ne(P,!0);const i=()=>ie(re,"$t",Q),[Q,X]=se(),r=t(()=>me.value.configFile),o=t(()=>Y.value);let a=ge(he(Y.cloneValue())),d=t(()=>[{text:i()("interval.night_at_midnight"),value:"0 0 * * *"},{text:i()("interval.night_at_twoam"),value:"0 2 * * *"},{text:i()("interval.day_at_onepm"),value:"0 13 * * *"},{text:i()("interval.hours",{values:{hours:6}}),value:"0 */6 * * *"}]);var C=ai(),R=s(C),L=s(R),M=s(L),S=s(M);{let q=t(()=>i()("admin.library_watching_settings")),D=t(()=>i()("admin.library_watching_settings_description"));ue(S,{key:"library-watching",get title(){return e(q)},get subtitle(){return e(D)},children:(T,w)=>{var O=Ya(),h=s(O);{let v=t(()=>i()("admin.library_watching_enable_description"));J(h,{get title(){return e(v)},get disabled(){return e(r)},get checked(){return e(a).library.watch.enabled},set checked(b){e(a).library.watch.enabled=b}})}n(O),E(T,O)},$$slots:{default:!0}})}var z=l(S,2);{let q=t(()=>i()("admin.library_scanning")),D=t(()=>i()("admin.library_scanning_description"));ue(z,{key:"library-scanning",get title(){return e(q)},get subtitle(){return e(D)},children:(T,w)=>{var O=ti(),h=s(O);{let g=t(()=>i()("admin.library_scanning_enable_description"));J(h,{get title(){return e(g)},get disabled(){return e(r)},get checked(){return e(a).library.scan.enabled},set checked(c){e(a).library.scan.enabled=c}})}var v=l(h,2);{let g=t(()=>e(r)||!e(a).library.scan.enabled),c=t(()=>i()("admin.cron_expression_presets"));ve(v,{get options(){return e(d)},get disabled(){return e(g)},name:"expression",get label(){return e(c)},get value(){return e(a).library.scan.cronExpression},set value(m){e(a).library.scan.cronExpression=m}})}var b=l(v,2);{const g=N=>{var U=ei(),x=s(U);Pe(x,{key:"admin.cron_expression_description",children:(u,_)=>{let y=()=>_?.().message;var k=Za(),V=s(k,!0);n(k),ee(H=>{fe(k,"href",`https://crontab.guru/#${H??""}`),ae(V,y())},[()=>e(a).library.scan.cronExpression.replaceAll(" ","_")]),E(u,k)},$$slots:{default:!0}}),n(U),E(N,U)};let c=t(()=>e(r)||!e(a).library.scan.enabled),m=t(()=>i()("admin.cron_expression")),$=t(()=>e(a).library.scan.cronExpression!==e(o).library.scan.cronExpression);B(b,{get inputType(){return F.TEXT},required:!0,get disabled(){return e(c)},get label(){return e(m)},get isEdited(){return e($)},get value(){return e(a).library.scan.cronExpression},set value(N){e(a).library.scan.cronExpression=N},descriptionSnippet:g,$$slots:{descriptionSnippet:!0}})}n(O),E(T,O)},$$slots:{default:!0}})}var f=l(z,2);$e(f,{keys:["library"],get disabled(){return e(r)},get configToEdit(){return e(a)},set configToEdit(q){oe(a,q,!0)}}),n(M),n(L),n(R),n(C),_e("submit",L,q=>q.preventDefault()),ce(1,R,()=>pe,()=>({duration:500})),E(I,C),le(),X()}var ri=A('<div><div><form autocomplete="off"><div class="ms-4 mt-4 flex flex-col gap-4"><!> <!> <!></div></form></div></div>');function ni(I,P){ne(P,!0);const i=()=>ie(re,"$t",Q),[Q,X]=se(),r=t(()=>me.value.configFile),o=t(()=>Y.value);let a=ge(he(Y.cloneValue()));var d=ri(),C=s(d),R=s(C),L=s(R),M=s(L);{let f=t(()=>i()("admin.logging_enable_description"));J(M,{get title(){return e(f)},get disabled(){return e(r)},get checked(){return e(a).logging.enabled},set checked(q){e(a).logging.enabled=q}})}var S=l(M,2);{let f=t(()=>i()("level")),q=t(()=>i()("admin.logging_level_description")),D=t(()=>[{value:Me.Fatal,text:"Fatal"},{value:Me.Error,text:"Error"},{value:Me.Warn,text:"Warn"},{value:Me.Log,text:"Log"},{value:Me.Debug,text:"Debug"},{value:Me.Verbose,text:"Verbose"}]),T=t(()=>e(a).logging.level!==e(o).logging.level),w=t(()=>e(r)||!e(a).logging.enabled);ve(S,{get label(){return e(f)},get desc(){return e(q)},get options(){return e(D)},name:"level",get isEdited(){return e(T)},get disabled(){return e(w)},get value(){return e(a).logging.level},set value(O){e(a).logging.level=O}})}var z=l(S,2);$e(z,{keys:["logging"],get disabled(){return e(r)},get configToEdit(){return e(a)},set configToEdit(f){oe(a,f,!0)}}),n(L),n(R),n(C),n(d),_e("submit",R,f=>f.preventDefault()),ce(1,C,()=>pe,()=>({duration:500})),E(I,d),le(),X()}var li=A('<div class="ms-4 mt-4 flex flex-col gap-4"><!> <hr/> <!> <!></div>'),si=A('<a target="_blank" href="https://huggingface.co/immich-app"><u> </u></a>'),oi=A('<p class="immich-form-label pb-2 text-sm"><!></p>'),di=A('<div class="ms-4 mt-4 flex flex-col gap-4"><!> <hr/> <!></div>'),ui=A('<div class="ms-4 mt-4 flex flex-col gap-4"><!> <hr/> <!></div>'),ci=A('<div class="ms-4 mt-4 flex flex-col gap-4"><!> <hr/> <!> <!> <!> <!></div>'),gi=A('<div class="ml-4 mt-4 flex flex-col gap-4"><!> <hr/> <!> <!> <!> <!></div>'),mi=A('<div class="mt-2"><div><form autocomplete="off" class="mx-4 mt-4"><div class="flex flex-col gap-4"><!> <hr/> <div></div> <div class="flex justify-end"><!></div></div> <!> <!> <!> <!> <!> <!></form></div></div>');function vi(I,P){ne(P,!0);const i=()=>ie(re,"$t",Q),[Q,X]=se(),r=t(()=>me.value.configFile),o=t(()=>Y.value);let a=ge(he(Y.cloneValue()));var d=mi(),C=s(d),R=s(C),L=s(R),M=s(L);{let v=t(()=>i()("admin.machine_learning_enabled")),b=t(()=>i()("admin.machine_learning_enabled_description"));J(M,{get title(){return e(v)},get subtitle(){return e(b)},get disabled(){return e(r)},get checked(){return e(a).machineLearning.enabled},set checked(g){e(a).machineLearning.enabled=g}})}var S=l(M,4);ze(S,21,()=>e(a).machineLearning.urls,kt,(v,b,g)=>{{const c=x=>{var p=Ne(),u=xe(p);{var _=y=>{Rt(y,{"aria-label":"",onclick:()=>e(a).machineLearning.urls.splice(g,1),get icon(){return st},color:"danger"})};be(u,y=>{e(a).machineLearning.urls.length>1&&y(_)})}E(x,p)};let m=t(()=>g===0?i()("url"):void 0),$=t(()=>g===0?i()("admin.machine_learning_url_description"):void 0),N=t(()=>e(r)||!e(a).machineLearning.enabled),U=t(()=>g===0&&!Fe(e(a).machineLearning.urls,e(o).machineLearning.urls));B(v,{get inputType(){return F.TEXT},get label(){return e(m)},get description(){return e($)},required:g===0,get disabled(){return e(N)},get isEdited(){return e(U)},get value(){return e(a).machineLearning.urls[g]},set value(x){e(a).machineLearning.urls[g]=x},trailingSnippet:c,$$slots:{trailingSnippet:!0}})}}),n(S);var z=l(S,2),f=s(z);{let v=t(()=>e(r)||!e(a).machineLearning.enabled);Qe(f,{class:"mb-2",size:"small",shape:"round",get leadingIcon(){return Pt},onclick:()=>e(a).machineLearning.urls.push(""),get disabled(){return e(v)},children:(b,g)=>{Ve();var c=qe();ee(m=>ae(c,m),[()=>i()("add_url")]),E(b,c)},$$slots:{default:!0}})}n(z),n(L);var q=l(L,2);{let v=t(()=>i()("admin.machine_learning_availability_checks")),b=t(()=>i()("admin.machine_learning_availability_checks_description"));ue(q,{key:"availability-checks",get title(){return e(v)},get subtitle(){return e(b)},children:(g,c)=>{var m=li(),$=s(m);{let x=t(()=>i()("admin.machine_learning_availability_checks_enabled")),p=t(()=>e(r)||!e(a).machineLearning.enabled);J($,{get title(){return e(x)},get disabled(){return e(p)},get checked(){return e(a).machineLearning.availabilityChecks.enabled},set checked(u){e(a).machineLearning.availabilityChecks.enabled=u}})}var N=l($,4);{let x=t(()=>i()("admin.machine_learning_availability_checks_interval")),p=t(()=>i()("admin.machine_learning_availability_checks_interval_description")),u=t(()=>e(r)||!e(a).machineLearning.enabled||!e(a).machineLearning.availabilityChecks.enabled),_=t(()=>e(a).machineLearning.availabilityChecks.interval!==e(o).machineLearning.availabilityChecks.interval);B(N,{get inputType(){return F.NUMBER},get label(){return e(x)},get description(){return e(p)},get disabled(){return e(u)},get isEdited(){return e(_)},get value(){return e(a).machineLearning.availabilityChecks.interval},set value(y){e(a).machineLearning.availabilityChecks.interval=y}})}var U=l(N,2);{let x=t(()=>i()("admin.machine_learning_availability_checks_timeout")),p=t(()=>i()("admin.machine_learning_availability_checks_timeout_description")),u=t(()=>e(r)||!e(a).machineLearning.enabled||!e(a).machineLearning.availabilityChecks.enabled),_=t(()=>e(a).machineLearning.availabilityChecks.timeout!==e(o).machineLearning.availabilityChecks.timeout);B(U,{get inputType(){return F.NUMBER},get label(){return e(x)},get description(){return e(p)},get disabled(){return e(u)},get isEdited(){return e(_)},get value(){return e(a).machineLearning.availabilityChecks.timeout},set value(y){e(a).machineLearning.availabilityChecks.timeout=y}})}n(m),E(g,m)},$$slots:{default:!0}})}var D=l(q,2);{let v=t(()=>i()("admin.machine_learning_smart_search")),b=t(()=>i()("admin.machine_learning_smart_search_description"));ue(D,{key:"smart-search",get title(){return e(v)},get subtitle(){return e(b)},children:(g,c)=>{var m=di(),$=s(m);{let U=t(()=>i()("admin.machine_learning_smart_search_enabled")),x=t(()=>i()("admin.machine_learning_smart_search_enabled_description")),p=t(()=>e(r)||!e(a).machineLearning.enabled);J($,{get title(){return e(U)},get subtitle(){return e(x)},get disabled(){return e(p)},get checked(){return e(a).machineLearning.clip.enabled},set checked(u){e(a).machineLearning.clip.enabled=u}})}var N=l($,4);{const U=_=>{var y=oi(),k=s(y);Pe(k,{key:"admin.machine_learning_clip_model_description",children:(H,j)=>{let Z=()=>j?.().message;var ye=si(),Ce=s(ye),ke=s(Ce,!0);n(Ce),n(ye),ee(()=>ae(ke,Z())),E(H,ye)},$$slots:{default:!0}}),n(y),E(_,y)};let x=t(()=>i()("admin.machine_learning_clip_model")),p=t(()=>e(r)||!e(a).machineLearning.enabled||!e(a).machineLearning.clip.enabled),u=t(()=>e(a).machineLearning.clip.modelName!==e(o).machineLearning.clip.modelName);B(N,{get inputType(){return F.TEXT},get label(){return e(x)},required:!0,get disabled(){return e(p)},get isEdited(){return e(u)},get value(){return e(a).machineLearning.clip.modelName},set value(_){e(a).machineLearning.clip.modelName=_},descriptionSnippet:U,$$slots:{descriptionSnippet:!0}})}n(m),E(g,m)},$$slots:{default:!0}})}var T=l(D,2);{let v=t(()=>i()("admin.machine_learning_duplicate_detection")),b=t(()=>i()("admin.machine_learning_duplicate_detection_setting_description"));ue(T,{key:"duplicate-detection",get title(){return e(v)},get subtitle(){return e(b)},children:(g,c)=>{var m=ui(),$=s(m);{let U=t(()=>i()("admin.machine_learning_duplicate_detection_enabled")),x=t(()=>i()("admin.machine_learning_duplicate_detection_enabled_description")),p=t(()=>e(r)||!e(a).machineLearning.enabled||!e(a).machineLearning.clip.enabled);J($,{get title(){return e(U)},get subtitle(){return e(x)},get disabled(){return e(p)},get checked(){return e(a).machineLearning.duplicateDetection.enabled},set checked(u){e(a).machineLearning.duplicateDetection.enabled=u}})}var N=l($,4);{let U=t(()=>i()("admin.machine_learning_max_detection_distance")),x=t(()=>i()("admin.machine_learning_max_detection_distance_description")),p=t(()=>e(r)||!me.value.duplicateDetection),u=t(()=>e(a).machineLearning.duplicateDetection.maxDistance!==e(o).machineLearning.duplicateDetection.maxDistance);B(N,{get inputType(){return F.NUMBER},get label(){return e(U)},step:"0.0005",min:.001,max:.1,get description(){return e(x)},get disabled(){return e(p)},get isEdited(){return e(u)},get value(){return e(a).machineLearning.duplicateDetection.maxDistance},set value(_){e(a).machineLearning.duplicateDetection.maxDistance=_}})}n(m),E(g,m)},$$slots:{default:!0}})}var w=l(T,2);{let v=t(()=>i()("admin.machine_learning_facial_recognition")),b=t(()=>i()("admin.machine_learning_facial_recognition_description"));ue(w,{key:"facial-recognition",get title(){return e(v)},get subtitle(){return e(b)},children:(g,c)=>{var m=ci(),$=s(m);{let u=t(()=>i()("admin.machine_learning_facial_recognition_setting")),_=t(()=>i()("admin.machine_learning_facial_recognition_setting_description")),y=t(()=>e(r)||!e(a).machineLearning.enabled);J($,{get title(){return e(u)},get subtitle(){return e(_)},get disabled(){return e(y)},get checked(){return e(a).machineLearning.facialRecognition.enabled},set checked(k){e(a).machineLearning.facialRecognition.enabled=k}})}var N=l($,4);{let u=t(()=>i()("admin.machine_learning_facial_recognition_model")),_=t(()=>i()("admin.machine_learning_facial_recognition_model_description")),y=t(()=>e(r)||!e(a).machineLearning.enabled||!e(a).machineLearning.facialRecognition.enabled),k=t(()=>e(a).machineLearning.facialRecognition.modelName!==e(o).machineLearning.facialRecognition.modelName);ve(N,{get label(){return e(u)},get desc(){return e(_)},name:"facial-recognition-model",options:[{value:"antelopev2",text:"antelopev2"},{value:"buffalo_l",text:"buffalo_l"},{value:"buffalo_m",text:"buffalo_m"},{value:"buffalo_s",text:"buffalo_s"}],get disabled(){return e(y)},get isEdited(){return e(k)},get value(){return e(a).machineLearning.facialRecognition.modelName},set value(V){e(a).machineLearning.facialRecognition.modelName=V}})}var U=l(N,2);{let u=t(()=>i()("admin.machine_learning_min_detection_score")),_=t(()=>i()("admin.machine_learning_min_detection_score_description")),y=t(()=>e(r)||!e(a).machineLearning.enabled||!e(a).machineLearning.facialRecognition.enabled),k=t(()=>e(a).machineLearning.facialRecognition.minScore!==e(o).machineLearning.facialRecognition.minScore);B(U,{get inputType(){return F.NUMBER},get label(){return e(u)},get description(){return e(_)},step:"0.01",min:.1,max:1,get disabled(){return e(y)},get isEdited(){return e(k)},get value(){return e(a).machineLearning.facialRecognition.minScore},set value(V){e(a).machineLearning.facialRecognition.minScore=V}})}var x=l(U,2);{let u=t(()=>i()("admin.machine_learning_max_recognition_distance")),_=t(()=>i()("admin.machine_learning_max_recognition_distance_description")),y=t(()=>e(r)||!e(a).machineLearning.enabled||!e(a).machineLearning.facialRecognition.enabled),k=t(()=>e(a).machineLearning.facialRecognition.maxDistance!==e(o).machineLearning.facialRecognition.maxDistance);B(x,{get inputType(){return F.NUMBER},get label(){return e(u)},get description(){return e(_)},step:"0.01",min:.1,max:2,get disabled(){return e(y)},get isEdited(){return e(k)},get value(){return e(a).machineLearning.facialRecognition.maxDistance},set value(V){e(a).machineLearning.facialRecognition.maxDistance=V}})}var p=l(x,2);{let u=t(()=>i()("admin.machine_learning_min_recognized_faces")),_=t(()=>i()("admin.machine_learning_min_recognized_faces_description")),y=t(()=>e(r)||!e(a).machineLearning.enabled||!e(a).machineLearning.facialRecognition.enabled),k=t(()=>e(a).machineLearning.facialRecognition.minFaces!==e(o).machineLearning.facialRecognition.minFaces);B(p,{get inputType(){return F.NUMBER},get label(){return e(u)},get description(){return e(_)},step:"1",min:1,get disabled(){return e(y)},get isEdited(){return e(k)},get value(){return e(a).machineLearning.facialRecognition.minFaces},set value(V){e(a).machineLearning.facialRecognition.minFaces=V}})}n(m),E(g,m)},$$slots:{default:!0}})}var O=l(w,2);{let v=t(()=>i()("admin.machine_learning_ocr")),b=t(()=>i()("admin.machine_learning_ocr_description"));ue(O,{key:"ocr",get title(){return e(v)},get subtitle(){return e(b)},children:(g,c)=>{var m=gi(),$=s(m);{let u=t(()=>i()("admin.machine_learning_ocr_enabled")),_=t(()=>i()("admin.machine_learning_ocr_enabled_description")),y=t(()=>e(r)||!e(a).machineLearning.enabled);J($,{get title(){return e(u)},get subtitle(){return e(_)},get disabled(){return e(y)},get checked(){return e(a).machineLearning.ocr.enabled},set checked(k){e(a).machineLearning.ocr.enabled=k}})}var N=l($,4);{let u=t(()=>i()("admin.machine_learning_ocr_model")),_=t(()=>i()("admin.machine_learning_ocr_model_description")),y=t(()=>e(r)||!e(a).machineLearning.enabled||!e(a).machineLearning.ocr.enabled),k=t(()=>e(a).machineLearning.ocr.modelName!==e(o).machineLearning.ocr.modelName);ve(N,{get label(){return e(u)},get desc(){return e(_)},name:"ocr-model",options:[{text:"PP-OCRv5_server (Chinese, Japanese and English)",value:"PP-OCRv5_server"},{text:"PP-OCRv5_mobile (Chinese, Japanese and English)",value:"PP-OCRv5_mobile"},{text:"PP-OCRv5_mobile (English-only)",value:"EN__PP-OCRv5_mobile"},{text:"PP-OCRv5_mobile (Greek and English)",value:"EL__PP-OCRv5_mobile"},{text:"PP-OCRv5_mobile (Korean and English)",value:"KOREAN__PP-OCRv5_mobile"},{text:"PP-OCRv5_mobile (Latin script languages)",value:"LATIN__PP-OCRv5_mobile"},{text:"PP-OCRv5_mobile (Russian, Belarusian, Ukrainian and English)",value:"ESLAV__PP-OCRv5_mobile"},{text:"PP-OCRv5_mobile (Thai and English)",value:"TH__PP-OCRv5_mobile"}],get disabled(){return e(y)},get isEdited(){return e(k)},get value(){return e(a).machineLearning.ocr.modelName},set value(V){e(a).machineLearning.ocr.modelName=V}})}var U=l(N,2);{let u=t(()=>i()("admin.machine_learning_ocr_min_detection_score")),_=t(()=>i()("admin.machine_learning_ocr_min_detection_score_description")),y=t(()=>e(r)||!e(a).machineLearning.enabled||!e(a).machineLearning.ocr.enabled),k=t(()=>e(a).machineLearning.ocr.minDetectionScore!==e(o).machineLearning.ocr.minDetectionScore);B(U,{get inputType(){return F.NUMBER},get label(){return e(u)},get description(){return e(_)},step:"0.1",min:.1,max:1,get disabled(){return e(y)},get isEdited(){return e(k)},get value(){return e(a).machineLearning.ocr.minDetectionScore},set value(V){e(a).machineLearning.ocr.minDetectionScore=V}})}var x=l(U,2);{let u=t(()=>i()("admin.machine_learning_ocr_min_recognition_score")),_=t(()=>i()("admin.machine_learning_ocr_min_score_recognition_description")),y=t(()=>e(r)||!e(a).machineLearning.enabled||!e(a).machineLearning.ocr.enabled),k=t(()=>e(a).machineLearning.ocr.minRecognitionScore!==e(o).machineLearning.ocr.minRecognitionScore);B(x,{get inputType(){return F.NUMBER},get label(){return e(u)},get description(){return e(_)},step:"0.1",min:.1,max:1,get disabled(){return e(y)},get isEdited(){return e(k)},get value(){return e(a).machineLearning.ocr.minRecognitionScore},set value(V){e(a).machineLearning.ocr.minRecognitionScore=V}})}var p=l(x,2);{let u=t(()=>i()("admin.machine_learning_ocr_max_resolution")),_=t(()=>i()("admin.machine_learning_ocr_max_resolution_description")),y=t(()=>e(r)||!e(a).machineLearning.enabled||!e(a).machineLearning.ocr.enabled),k=t(()=>e(a).machineLearning.ocr.maxResolution!==e(o).machineLearning.ocr.maxResolution);B(p,{get inputType(){return F.NUMBER},get label(){return e(u)},get description(){return e(_)},min:1,get disabled(){return e(y)},get isEdited(){return e(k)},get value(){return e(a).machineLearning.ocr.maxResolution},set value(V){e(a).machineLearning.ocr.maxResolution=V}})}n(m),E(g,m)},$$slots:{default:!0}})}var h=l(O,2);$e(h,{keys:["machineLearning"],get disabled(){return e(r)},get configToEdit(){return e(a)},set configToEdit(v){oe(a,v,!0)}}),n(R),n(C),n(d),_e("submit",R,v=>v.preventDefault()),ce(1,C,()=>pe,()=>({duration:500})),E(I,d),le(),X()}var _i=A('<div class="ms-4 mt-4 flex flex-col gap-4"><!> <hr/> <!> <!></div>'),pi=A('<a href="https://docs.immich.app/features/reverse-geocoding" class="underline" target="_blank" rel="noreferrer"> </a>'),fi=A('<p class="text-sm dark:text-immich-dark-fg"><!></p>'),bi=A('<div class="ms-4 mt-4 flex flex-col gap-4"><!></div>'),hi=A('<div class="mt-2"><div><form autocomplete="off"><div class="flex flex-col gap-4"><!> <!> <!></div></form></div></div>');function $i(I,P){ne(P,!0);const i=()=>ie(re,"$t",Q),[Q,X]=se(),r=t(()=>me.value.configFile),o=t(()=>Y.value);let a=ge(he(Y.cloneValue()));var d=hi(),C=s(d),R=s(C),L=s(R),M=s(L);{let f=t(()=>i()("admin.map_settings")),q=t(()=>i()("admin.map_settings_description"));ue(M,{key:"map",get title(){return e(f)},get subtitle(){return e(q)},children:(D,T)=>{var w=_i(),O=s(w);{let b=t(()=>i()("admin.map_enable_description")),g=t(()=>i()("admin.map_implications"));J(O,{get title(){return e(b)},get subtitle(){return e(g)},get disabled(){return e(r)},get checked(){return e(a).map.enabled},set checked(c){e(a).map.enabled=c}})}var h=l(O,4);{let b=t(()=>i()("admin.map_light_style")),g=t(()=>i()("admin.map_style_description")),c=t(()=>e(r)||!e(a).map.enabled),m=t(()=>e(a).map.lightStyle!==e(o).map.lightStyle);B(h,{get inputType(){return F.TEXT},get label(){return e(b)},get description(){return e(g)},get disabled(){return e(c)},get isEdited(){return e(m)},get value(){return e(a).map.lightStyle},set value($){e(a).map.lightStyle=$}})}var v=l(h,2);{let b=t(()=>i()("admin.map_dark_style")),g=t(()=>i()("admin.map_style_description")),c=t(()=>e(r)||!e(a).map.enabled),m=t(()=>e(a).map.darkStyle!==e(o).map.darkStyle);B(v,{get inputType(){return F.TEXT},get label(){return e(b)},get description(){return e(g)},get disabled(){return e(c)},get isEdited(){return e(m)},get value(){return e(a).map.darkStyle},set value($){e(a).map.darkStyle=$}})}n(w),E(D,w)},$$slots:{default:!0}})}var S=l(M,2);{const f=D=>{var T=fi(),w=s(T);Pe(w,{key:"admin.map_manage_reverse_geocoding_settings",children:(h,v)=>{let b=()=>v?.().message;var g=pi(),c=s(g,!0);n(g),ee(()=>ae(c,b())),E(h,g)},$$slots:{default:!0}}),n(T),E(D,T)};let q=t(()=>i()("admin.map_reverse_geocoding_settings"));ue(S,{key:"reverse-geocoding",get title(){return e(q)},subtitleSnippet:f,children:(D,T)=>{var w=bi(),O=s(w);{let h=t(()=>i()("admin.map_reverse_geocoding_enable_description"));J(O,{get title(){return e(h)},get disabled(){return e(r)},get checked(){return e(a).reverseGeocoding.enabled},set checked(v){e(a).reverseGeocoding.enabled=v}})}n(w),E(D,w)},$$slots:{subtitleSnippet:!0,default:!0}})}var z=l(S,2);$e(z,{keys:["map","reverseGeocoding"],get disabled(){return e(r)},get configToEdit(){return e(a)},set configToEdit(f){oe(a,f,!0)}}),n(L),n(R),n(C),n(d),_e("submit",R,f=>f.preventDefault()),ce(1,C,()=>pe,()=>({duration:500})),E(I,d),le(),X()}var xi=A('<div class="mt-2"><div><form autocomplete="off" class="mx-4 mt-4"><div class="ms-4 mt-4 flex flex-col gap-4"><!></div> <!></form></div></div>');function yi(I,P){ne(P,!0);const i=()=>ie(re,"$t",Q),[Q,X]=se(),r=t(()=>me.value.configFile);let o=ge(he(Y.cloneValue()));var a=xi(),d=s(a),C=s(d),R=s(C),L=s(R);{let S=t(()=>i()("admin.metadata_faces_import_setting")),z=t(()=>i()("admin.metadata_faces_import_setting_description"));J(L,{get title(){return e(S)},get subtitle(){return e(z)},get disabled(){return e(r)},get checked(){return e(o).metadata.faces.import},set checked(f){e(o).metadata.faces.import=f}})}n(R);var M=l(R,2);$e(M,{keys:["metadata"],get disabled(){return e(r)},get configToEdit(){return e(o)},set configToEdit(S){oe(o,S,!0)}}),n(C),n(d),n(a),_e("submit",C,S=>S.preventDefault()),ce(1,d,()=>pe,()=>({duration:500})),E(I,a),le(),X()}var ki=A('<div><div><form autocomplete="off"><div class="ms-4 mt-4"><!> <!></div></form></div></div>');function Ei(I,P){ne(P,!0);const i=()=>ie(re,"$t",Q),[Q,X]=se(),r=t(()=>me.value.configFile);let o=ge(he(Y.cloneValue()));var a=ki(),d=s(a),C=s(d),R=s(C),L=s(R);{let S=t(()=>i()("admin.version_check_enabled_description")),z=t(()=>i()("admin.version_check_implications"));J(L,{get title(){return e(S)},get subtitle(){return e(z)},get disabled(){return e(r)},get checked(){return e(o).newVersionCheck.enabled},set checked(f){e(o).newVersionCheck.enabled=f}})}var M=l(L,2);$e(M,{keys:["newVersionCheck"],get disabled(){return e(r)},get configToEdit(){return e(o)},set configToEdit(S){oe(o,S,!0)}}),n(R),n(C),n(d),n(a),_e("submit",C,S=>S.preventDefault()),ce(1,d,()=>pe,()=>({duration:500})),E(I,a),le(),X()}var Ti=A('<div class="mt-2"><div><form autocomplete="off" class="mx-4 mt-4"><div class="ms-4 mt-4 flex flex-col gap-4"><!> <!> <!> <!> <!> <!></div> <!></form></div></div>');function Ci(I,P){ne(P,!0);const i=()=>ie(re,"$t",Q),[Q,X]=se(),r=t(()=>me.value.configFile),o=t(()=>Y.value);let a=ge(he(Y.cloneValue()));var d=Ti(),C=s(d),R=s(C),L=s(R),M=s(L);{let w=t(()=>i()("admin.nightly_tasks_start_time_setting")),O=t(()=>i()("admin.nightly_tasks_start_time_setting_description")),h=t(()=>e(a).nightlyTasks.startTime!==e(o).nightlyTasks.startTime);B(M,{get inputType(){return F.TEXT},get label(){return e(w)},get description(){return e(O)},required:!0,get disabled(){return e(r)},get isEdited(){return e(h)},get value(){return e(a).nightlyTasks.startTime},set value(v){e(a).nightlyTasks.startTime=v}})}var S=l(M,2);{let w=t(()=>i()("admin.nightly_tasks_database_cleanup_setting")),O=t(()=>i()("admin.nightly_tasks_database_cleanup_setting_description"));J(S,{get title(){return e(w)},get subtitle(){return e(O)},get disabled(){return e(r)},get checked(){return e(a).nightlyTasks.databaseCleanup},set checked(h){e(a).nightlyTasks.databaseCleanup=h}})}var z=l(S,2);{let w=t(()=>i()("admin.nightly_tasks_missing_thumbnails_setting")),O=t(()=>i()("admin.nightly_tasks_missing_thumbnails_setting_description"));J(z,{get title(){return e(w)},get subtitle(){return e(O)},get disabled(){return e(r)},get checked(){return e(a).nightlyTasks.missingThumbnails},set checked(h){e(a).nightlyTasks.missingThumbnails=h}})}var f=l(z,2);{let w=t(()=>i()("admin.nightly_tasks_cluster_new_faces_setting")),O=t(()=>i()("admin.nightly_tasks_cluster_faces_setting_description"));J(f,{get title(){return e(w)},get subtitle(){return e(O)},get disabled(){return e(r)},get checked(){return e(a).nightlyTasks.clusterNewFaces},set checked(h){e(a).nightlyTasks.clusterNewFaces=h}})}var q=l(f,2);{let w=t(()=>i()("admin.nightly_tasks_generate_memories_setting")),O=t(()=>i()("admin.nightly_tasks_generate_memories_setting_description"));J(q,{get title(){return e(w)},get subtitle(){return e(O)},get disabled(){return e(r)},get checked(){return e(a).nightlyTasks.generateMemories},set checked(h){e(a).nightlyTasks.generateMemories=h}})}var D=l(q,2);{let w=t(()=>i()("admin.nightly_tasks_sync_quota_usage_setting")),O=t(()=>i()("admin.nightly_tasks_sync_quota_usage_setting_description"));J(D,{get title(){return e(w)},get subtitle(){return e(O)},get disabled(){return e(r)},get checked(){return e(a).nightlyTasks.syncQuotaUsage},set checked(h){e(a).nightlyTasks.syncQuotaUsage=h}})}n(L);var T=l(L,2);$e(T,{keys:["nightlyTasks"],get disabled(){return e(r)},get configToEdit(){return e(a)},set configToEdit(w){oe(a,w,!0)}}),n(R),n(C),n(d),_e("submit",R,w=>w.preventDefault()),ce(1,C,()=>pe,()=>({duration:500})),E(I,d),le(),X()}var Li=A('<div class="text-red-400">*</div>'),wi=A('<div class="rounded-full bg-orange-100 px-2 text-[10px] text-orange-900"> </div>'),Si=A('<p class="immich-form-label pb-2 text-sm"> </p>'),Pi=A('<div class="mb-4 w-full"><div class="flex h-6.5 place-items-center gap-1"><label class="font-medium text-primary text-sm"> </label> <!> <!></div> <!> <textarea class="immich-form-input w-full pb-2"></textarea></div>');function dt(I,P){ne(P,!0);const i=()=>ie(re,"$t",Q),[Q,X]=se();let r=de(P,"value",15),o=de(P,"label",3,""),a=de(P,"description",3,""),d=de(P,"required",3,!1),C=de(P,"disabled",3,!1),R=de(P,"isEdited",3,!1);const L=g=>{r(g.target.value)};var M=Pi(),S=s(M),z=s(S),f=s(z,!0);n(z);var q=l(z,2);{var D=g=>{var c=Li();E(g,c)};be(q,g=>{d()&&g(D)})}var T=l(q,2);{var w=g=>{var c=wi(),m=s(c,!0);n(c),ee($=>ae(m,$),[()=>i()("unsaved_change")]),ce(3,c,()=>Ke,()=>({x:10,duration:200,easing:Ye})),E(g,c)};be(T,g=>{R()&&g(w)})}n(S);var O=l(S,2);{var h=g=>{var c=Si(),m=s(c,!0);n(c),ee(()=>{fe(c,"id",`${o()??""}-desc`),ae(m,a())}),E(g,c)},v=g=>{var c=Ne(),m=xe(c);yt(m,()=>P.descriptionSnippet??$t),E(g,c)};be(O,g=>{a()?g(h):g(v,!1)})}var b=l(O,2);xt(b),b.__input=L,n(M),ee(()=>{fe(z,"for",o()),ae(f,o()),fe(b,"aria-describedby",a()?`${o()}-desc`:void 0),fe(b,"aria-labelledby",`${o()??""}-label`),fe(b,"id",o()),fe(b,"name",o()),b.required=d(),Dt(b,r()),b.disabled=C()}),E(I,M),le(),X()}lt(["input"]);var Ri=A('<div class="relative w-full h-240 overflow-hidden"><iframe class="absolute top-0 left-0 w-full h-full border-none"></iframe></div>');function Di(I,P){ne(P,!0);const i=()=>ie(re,"$t",Q),[Q,X]=se();{let r=t(()=>i()("admin.template_email_preview"));ia(I,{get title(){return e(r)},get onClose(){return P.onClose},size:"giant",children:(o,a)=>{ra(o,{children:(d,C)=>{var R=Ri(),L=s(R);n(R),ee(M=>{fe(L,"title",M),fe(L,"srcdoc",P.html)},[()=>i()("admin.template_email_preview")]),E(d,R)},$$slots:{default:!0}})},$$slots:{default:!0}})}le(),X()}var Mi=A("<!> ",1),Ai=A('<!> <div class="flex justify-between"><!></div>',1),qi=A('<div class="ms-4 mt-4 flex flex-col gap-4"><p class="text-sm dark:text-immich-dark-fg"><!></p> <hr/> <!> <!></div>'),Ni=A('<div><form autocomplete="off" class="mt-4"><div class="flex flex-col gap-4"><!></div></form></div>');function zi(I,P){ne(P,!0);const i=()=>ie(re,"$t",Q),[Q,X]=se();let r=de(P,"config",15),o=ge(!1);const a=async(f,q)=>{try{oe(o,!0);const{html:D}=await bt({name:f,templateDto:{template:q}});await We.show(Di,{html:D})}catch(D){Ge(D,"Could not load template.")}finally{oe(o,!1)}},d=[{label:i()("admin.template_email_welcome"),templateKey:"welcomeTemplate",descriptionTags:"{username}, {password}, {displayName}, {baseUrl}",templateName:"welcome"},{label:i()("admin.template_email_invite_album"),templateKey:"albumInviteTemplate",descriptionTags:"{senderName}, {recipientName}, {albumId}, {albumName}, {baseUrl}",templateName:"album-invite"},{label:i()("admin.template_email_update_album"),templateKey:"albumUpdateTemplate",descriptionTags:"{recipientName}, {albumId}, {albumName}, {baseUrl}",templateName:"album-update"}],C=f=>r().templates.email[f]!==Y.value.templates.email[f],R=f=>{f.preventDefault()};var L=Ni(),M=s(L),S=s(M),z=s(S);{let f=t(()=>i()("admin.template_email_settings")),q=t(()=>i()("admin.template_settings_description"));ue(z,{key:"templates",get title(){return e(f)},get subtitle(){return e(q)},children:(D,T)=>{var w=qi(),O=s(w),h=s(O);Pe(h,{key:"admin.template_email_if_empty",children:(c,m)=>{Ve();var $=qe();ee(N=>ae($,N),[()=>i()("admin.template_email_if_empty")]),E(c,$)},$$slots:{default:!0}}),n(O);var v=l(O,4);{var b=c=>{ot(c,{})};be(v,c=>{e(o)&&c(b)})}var g=l(v,2);ze(g,17,()=>d,({label:c,templateKey:m,descriptionTags:$,templateName:N})=>m,(c,m)=>{let $=()=>e(m).label,N=()=>e(m).templateKey,U=()=>e(m).descriptionTags,x=()=>e(m).templateName;var p=Ai(),u=xe(p);{let k=t(()=>i()("admin.template_email_available_tags",{values:{tags:U()}})),V=t(()=>C(N())),H=t(()=>!r().notifications.smtp.enabled);dt(u,{get label(){return $()},get description(){return e(k)},get isEdited(){return e(V)},get disabled(){return e(H)},get value(){return r().templates.email[N()]},set value(j){r(r().templates.email[N()]=j,!0)}})}var _=l(u,2),y=s(_);{let k=t(()=>i()("admin.template_email_preview"));Qe(y,{size:"small",shape:"round",onclick:()=>a(x(),r().templates.email[N()]),get title(){return e(k)},children:(V,H)=>{var j=Mi(),Z=xe(j);Je(Z,{get icon(){return Mt},class:"me-1"});var ye=l(Z);ee(Ce=>ae(ye,` ${Ce??""}`),[()=>i()("admin.template_email_preview")]),E(V,j)},$$slots:{default:!0}})}n(_),E(c,p)}),n(w),E(D,w)},$$slots:{default:!0}})}n(S),n(M),n(L),_e("submit",M,R),ce(1,L,()=>pe,()=>({duration:500})),E(I,L),le(),X()}var Oi=A('<div class="ms-4 mt-4 flex flex-col gap-4"><!> <hr/> <!> <!> <!> <!> <!> <!> <hr/> <!> <div class="flex gap-2 place-items-center"><!> <!></div></div>'),Ui=A('<div><div><form autocomplete="off" class="mt-4"><div class="flex flex-col gap-4"><!></div></form></div> <!> <!></div>');function Vi(I,P){ne(P,!0);const i=()=>ie(re,"$t",X),Q=()=>ie(mt,"$user",X),[X,r]=se(),o=t(()=>me.value.configFile),a=t(()=>Y.value);let d=ge(he(Y.cloneValue())),C=ge(!1);const R=async()=>{if(!e(C)){oe(C,!0);try{await ht({systemConfigSmtpDto:{enabled:e(d).notifications.smtp.enabled,transport:{host:e(d).notifications.smtp.transport.host,port:e(d).notifications.smtp.transport.port,secure:e(d).notifications.smtp.transport.secure,username:e(d).notifications.smtp.transport.username,password:e(d).notifications.smtp.transport.password,ignoreCert:e(d).notifications.smtp.transport.ignoreCert},from:e(d).notifications.smtp.from,replyTo:e(d).notifications.smtp.from}}),nt.success(i()("admin.notification_email_test_email_sent",{values:{email:Q().email}})),e(o)||await Yt({notifications:e(d).notifications})}catch(T){Ge(T,i()("admin.notification_email_test_email_failed"))}finally{oe(C,!1)}}};var L=Ui(),M=s(L),S=s(M),z=s(S),f=s(z);{let T=t(()=>i()("email")),w=t(()=>i()("admin.notification_email_setting_description"));ue(f,{key:"email",get title(){return e(T)},get subtitle(){return e(w)},children:(O,h)=>{var v=Oi(),b=s(v);{let k=t(()=>i()("admin.notification_enable_email_notifications"));J(b,{get title(){return e(k)},get disabled(){return e(o)},get checked(){return e(d).notifications.smtp.enabled},set checked(V){e(d).notifications.smtp.enabled=V}})}var g=l(b,4);{let k=t(()=>i()("host")),V=t(()=>i()("admin.notification_email_host_description")),H=t(()=>e(o)||!e(d).notifications.smtp.enabled),j=t(()=>e(d).notifications.smtp.transport.host!==e(a).notifications.smtp.transport.host);B(g,{get inputType(){return F.TEXT},required:!0,get label(){return e(k)},get description(){return e(V)},get disabled(){return e(H)},get isEdited(){return e(j)},get value(){return e(d).notifications.smtp.transport.host},set value(Z){e(d).notifications.smtp.transport.host=Z}})}var c=l(g,2);{let k=t(()=>i()("port")),V=t(()=>i()("admin.notification_email_port_description")),H=t(()=>e(o)||!e(d).notifications.smtp.enabled),j=t(()=>e(d).notifications.smtp.transport.port!==e(a).notifications.smtp.transport.port);B(c,{get inputType(){return F.NUMBER},required:!0,get label(){return e(k)},get description(){return e(V)},get disabled(){return e(H)},get isEdited(){return e(j)},get value(){return e(d).notifications.smtp.transport.port},set value(Z){e(d).notifications.smtp.transport.port=Z}})}var m=l(c,2);{let k=t(()=>i()("username")),V=t(()=>i()("admin.notification_email_username_description")),H=t(()=>e(o)||!e(d).notifications.smtp.enabled),j=t(()=>e(d).notifications.smtp.transport.username!==e(a).notifications.smtp.transport.username);B(m,{get inputType(){return F.TEXT},get label(){return e(k)},get description(){return e(V)},get disabled(){return e(H)},get isEdited(){return e(j)},get value(){return e(d).notifications.smtp.transport.username},set value(Z){e(d).notifications.smtp.transport.username=Z}})}var $=l(m,2);{let k=t(()=>i()("password")),V=t(()=>i()("admin.notification_email_password_description")),H=t(()=>e(o)||!e(d).notifications.smtp.enabled),j=t(()=>e(d).notifications.smtp.transport.password!==e(a).notifications.smtp.transport.password);B($,{get inputType(){return F.PASSWORD},get label(){return e(k)},get description(){return e(V)},get disabled(){return e(H)},get isEdited(){return e(j)},get value(){return e(d).notifications.smtp.transport.password},set value(Z){e(d).notifications.smtp.transport.password=Z}})}var N=l($,2);{let k=t(()=>i()("admin.notification_email_secure")),V=t(()=>i()("admin.notification_email_secure_description")),H=t(()=>e(o)||!e(d).notifications.smtp.enabled);J(N,{get title(){return e(k)},get subtitle(){return e(V)},get disabled(){return e(H)},get checked(){return e(d).notifications.smtp.transport.secure},set checked(j){e(d).notifications.smtp.transport.secure=j}})}var U=l(N,2);{let k=t(()=>i()("admin.notification_email_ignore_certificate_errors")),V=t(()=>i()("admin.notification_email_ignore_certificate_errors_description")),H=t(()=>e(o)||!e(d).notifications.smtp.enabled);J(U,{get title(){return e(k)},get subtitle(){return e(V)},get disabled(){return e(H)},get checked(){return e(d).notifications.smtp.transport.ignoreCert},set checked(j){e(d).notifications.smtp.transport.ignoreCert=j}})}var x=l(U,4);{let k=t(()=>i()("admin.notification_email_from_address")),V=t(()=>i()("admin.notification_email_from_address_description")),H=t(()=>e(o)||!e(d).notifications.smtp.enabled),j=t(()=>e(d).notifications.smtp.from!==e(a).notifications.smtp.from);B(x,{get inputType(){return F.TEXT},required:!0,get label(){return e(k)},get description(){return e(V)},get disabled(){return e(H)},get isEdited(){return e(j)},get value(){return e(d).notifications.smtp.from},set value(Z){e(d).notifications.smtp.from=Z}})}var p=l(x,2),u=s(p);{let k=t(()=>!e(d).notifications.smtp.enabled);Qe(u,{size:"small",shape:"round",get disabled(){return e(k)},onclick:R,children:(V,H)=>{var j=Ne(),Z=xe(j);{var ye=ke=>{var we=qe();ee(De=>ae(we,De),[()=>i()("admin.notification_email_test_email")]),E(ke,we)},Ce=ke=>{var we=qe();ee(De=>ae(we,De),[()=>i()("admin.notification_email_sent_test_email_button")]),E(ke,we)};be(Z,ke=>{e(o)?ke(ye):ke(Ce,!1)})}E(V,j)},$$slots:{default:!0}})}var _=l(u,2);{var y=k=>{ot(k,{})};be(_,k=>{e(C)&&k(y)})}n(p),n(v),E(O,v)},$$slots:{default:!0}})}n(z),n(S),n(M);var q=l(M,2);zi(q,{get config(){return e(d)},set config(T){oe(d,T,!0)}});var D=l(q,2);$e(D,{keys:["notifications","templates"],get disabled(){return e(o)},get configToEdit(){return e(d)},set configToEdit(T){oe(d,T,!0)}}),n(L),_e("submit",S,T=>T.preventDefault()),ce(1,M,()=>pe,()=>({duration:500})),E(I,L),le(),r()}var Bi=A('<div><div><form autocomplete="off"><div class="mt-4 ms-4"><!> <!> <!> <div class="ms-4"><!></div></div></form></div></div>');function Fi(I,P){ne(P,!0);const i=()=>ie(re,"$t",Q),[Q,X]=se(),r=t(()=>me.value.configFile),o=t(()=>Y.value);let a=ge(he(Y.cloneValue()));var d=Bi(),C=s(d),R=s(C),L=s(R),M=s(L);{let D=t(()=>i()("admin.server_external_domain_settings")),T=t(()=>i()("admin.server_external_domain_settings_description")),w=t(()=>e(a).server.externalDomain!==e(o).server.externalDomain);B(M,{get inputType(){return F.TEXT},get label(){return e(D)},get description(){return e(T)},get isEdited(){return e(w)},get value(){return e(a).server.externalDomain},set value(O){e(a).server.externalDomain=O}})}var S=l(M,2);{let D=t(()=>i()("admin.server_welcome_message")),T=t(()=>i()("admin.server_welcome_message_description")),w=t(()=>e(a).server.loginPageMessage!==e(o).server.loginPageMessage);B(S,{get inputType(){return F.TEXT},get label(){return e(D)},get description(){return e(T)},get isEdited(){return e(w)},get value(){return e(a).server.loginPageMessage},set value(O){e(a).server.loginPageMessage=O}})}var z=l(S,2);{let D=t(()=>i()("admin.server_public_users")),T=t(()=>i()("admin.server_public_users_description"));J(z,{get title(){return e(D)},get subtitle(){return e(T)},get disabled(){return e(r)},get checked(){return e(a).server.publicUsers},set checked(w){e(a).server.publicUsers=w}})}var f=l(z,2),q=s(f);$e(q,{keys:["server"],get disabled(){return e(r)},get configToEdit(){return e(a)},set configToEdit(D){oe(a,D,!0)}}),n(f),n(L),n(R),n(C),n(d),_e("submit",R,D=>D.preventDefault()),ce(1,C,()=>pe,()=>({duration:500})),E(I,d),le(),X()}var Qi=A('<div><div><form autocomplete="off"><div class="ms-4 mt-4 flex flex-col gap-4"><!> <!></div></form></div></div>');function Ii(I,P){ne(P,!0);const i=()=>ie(re,"$t",Q),[Q,X]=se(),r=t(()=>me.value.configFile),o=t(()=>Y.value);let a=ge(he(Y.cloneValue()));var d=Qi(),C=s(d),R=s(C),L=s(R),M=s(L);{let z=t(()=>i()("admin.theme_custom_css_settings")),f=t(()=>i()("admin.theme_custom_css_settings_description")),q=t(()=>e(a).theme.customCss!==e(o).theme.customCss);dt(M,{get disabled(){return e(r)},get label(){return e(z)},get description(){return e(f)},get isEdited(){return e(q)},get value(){return e(a).theme.customCss},set value(D){e(a).theme.customCss=D}})}var S=l(M,2);$e(S,{keys:["theme"],get disabled(){return e(r)},get configToEdit(){return e(a)},set configToEdit(z){oe(a,z,!0)}}),n(L),n(R),n(C),n(d),_e("submit",R,z=>z.preventDefault()),ce(1,C,()=>pe,()=>({duration:500})),E(I,d),le(),X()}var Xi=A('<div><div><form autocomplete="off"><div class="ms-4 mt-4 flex flex-col gap-4"><!> <hr/> <!> <!></div></form></div></div>');function ji(I,P){ne(P,!0);const i=()=>ie(re,"$t",Q),[Q,X]=se(),r=t(()=>me.value.configFile),o=t(()=>Y.value);let a=ge(he(Y.cloneValue()));var d=Xi(),C=s(d),R=s(C),L=s(R),M=s(L);{let f=t(()=>i()("admin.trash_enabled_description"));J(M,{get title(){return e(f)},get disabled(){return e(r)},get checked(){return e(a).trash.enabled},set checked(q){e(a).trash.enabled=q}})}var S=l(M,4);{let f=t(()=>i()("admin.trash_number_of_days")),q=t(()=>i()("admin.trash_number_of_days_description")),D=t(()=>e(r)||!e(a).trash.enabled),T=t(()=>e(a).trash.days!==e(o).trash.days);B(S,{get inputType(){return F.NUMBER},get label(){return e(f)},get description(){return e(q)},required:!0,get disabled(){return e(D)},get isEdited(){return e(T)},get value(){return e(a).trash.days},set value(w){e(a).trash.days=w}})}var z=l(S,2);$e(z,{keys:["trash"],get disabled(){return e(r)},get configToEdit(){return e(a)},set configToEdit(f){oe(a,f,!0)}}),n(L),n(R),n(C),n(d),_e("submit",R,f=>f.preventDefault()),ce(1,C,()=>pe,()=>({duration:500})),E(I,d),le(),X()}var Hi=A('<div><div><form autocomplete="off"><div class="ms-4 mt-4 flex flex-col gap-4"><!></div> <div class="ms-4"><!></div></form></div></div>');function Wi(I,P){ne(P,!0);const i=()=>ie(re,"$t",Q),[Q,X]=se(),r=t(()=>me.value.configFile),o=t(()=>Y.value);let a=ge(he(Y.cloneValue()));var d=Hi(),C=s(d),R=s(C),L=s(R),M=s(L);{let f=t(()=>i()("admin.user_delete_delay_settings")),q=t(()=>i()("admin.user_delete_delay_settings_description")),D=t(()=>e(a).user.deleteDelay!==e(o).user.deleteDelay);B(M,{get inputType(){return F.NUMBER},min:1,get label(){return e(f)},get description(){return e(q)},get isEdited(){return e(D)},get value(){return e(a).user.deleteDelay},set value(T){e(a).user.deleteDelay=T}})}n(L);var S=l(L,2),z=s(S);$e(z,{keys:["user"],get disabled(){return e(r)},get configToEdit(){return e(a)},set configToEdit(f){oe(a,f,!0)}}),n(S),n(R),n(C),n(d),_e("submit",R,f=>f.preventDefault()),ce(1,C,()=>pe,()=>({duration:500})),E(I,d),le(),X()}var Gi=A("<!> <div><!></div> <!>",1),Ji=A("<!> <!>",1);function Sr(I,P){ne(P,!0);const i=()=>ie(re,"$t",Q),[Q,X]=se(),r=[{component:Ca,title:i()("admin.authentication_settings"),subtitle:i()("admin.authentication_settings_description"),key:"authentication",icon:At},{component:Pa,title:i()("admin.backup_settings"),subtitle:i()("admin.backup_settings_description"),key:"backup",icon:qt},{component:Wa,title:i()("admin.image_settings"),subtitle:i()("admin.image_settings_description"),key:"image",icon:Nt},{component:Ka,title:i()("admin.job_settings"),subtitle:i()("admin.job_settings_description"),key:"job",icon:zt},{component:ii,title:i()("admin.library_settings"),subtitle:i()("admin.library_settings_description"),key:"external-library",icon:Ot},{component:ni,title:i()("admin.logging_settings"),subtitle:i()("admin.manage_log_settings"),key:"logging",icon:Ut},{component:vi,title:i()("admin.machine_learning_settings"),subtitle:i()("admin.machine_learning_settings_description"),key:"machine-learning",icon:Vt},{component:$i,title:i()("admin.map_gps_settings"),subtitle:i()("admin.map_gps_settings_description"),key:"location",icon:Bt},{component:yi,title:i()("admin.metadata_settings"),subtitle:i()("admin.metadata_settings_description"),key:"metadata",icon:Ft},{component:Ci,title:i()("admin.nightly_tasks_settings"),subtitle:i()("admin.nightly_tasks_settings_description"),key:"nightly-tasks",icon:Qt},{component:Vi,title:i()("admin.notification_settings"),subtitle:i()("admin.notification_settings_description"),key:"notifications",icon:It},{component:Fi,title:i()("admin.server_settings"),subtitle:i()("admin.server_settings_description"),key:"server",icon:Xt},{component:Zt,title:i()("admin.storage_template_settings"),subtitle:i()("admin.storage_template_settings_description"),key:"storage-template",icon:jt},{component:Ii,title:i()("admin.theme_settings"),subtitle:i()("admin.theme_settings_description"),key:"theme",icon:Ht},{component:ji,title:i()("admin.trash_settings"),subtitle:i()("admin.trash_settings_description"),key:"trash",icon:st},{component:Wi,title:i()("admin.user_settings"),subtitle:i()("admin.user_settings_description"),key:"user-settings",icon:Wt},{component:Ei,title:i()("admin.version_check_settings"),subtitle:i()("admin.version_check_settings_description"),key:"version-check",icon:Gt},{component:Qa,title:i()("admin.transcoding_settings"),subtitle:i()("admin.transcoding_settings_description"),key:"video-transcoding",icon:Jt}];let o=ge(""),a=t(()=>r.filter(({title:f,subtitle:q})=>{const D=e(o).toLowerCase();return f.toLowerCase().includes(D)||q.toLowerCase().includes(D)}));const d=t(()=>ea(i(),me.value,Y.value)),C=t(()=>e(d).CopyToClipboard),R=t(()=>e(d).Upload),L=t(()=>e(d).Download);var M=Ji(),S=xe(M);{let f=t(()=>i()("admin.system_settings")),q=t(()=>[e(C),e(R),e(L)]);ua(S,{get name(){return e(f)},get actions(){return e(q)}})}var z=l(S,2);{let f=t(()=>[{title:P.data.meta.title}]),q=t(()=>[e(C),e(L),e(R)]);oa(z,{get breadcrumbs(){return e(f)},get actions(){return e(q)},children:(D,T)=>{ca(D,{size:"large",center:!0,children:(w,O)=>{var h=Gi(),v=xe(h);{var b=$=>{{let N=t(()=>i()("admin.config_set_by_file"));ga($,{color:"warning",class:"text-dark my-4",get title(){return e(N)}})}};be(v,$=>{me.value.configFile&&$(b)})}var g=l(v,2),c=s(g);{let $=t(()=>i()("search_settings"));da(c,{get placeholder(){return e($)},showLoadingSpinner:!1,get name(){return e(o)},set name(N){oe(o,N,!0)}})}n(g);var m=l(g,2);Kt(m,{get queryParam(){return ta.IS_OPEN},children:($,N)=>{var U=Ne(),x=xe(U);ze(x,17,()=>e(a),({component:p,title:u,subtitle:_,key:y,icon:k})=>y,(p,u)=>{let _=()=>e(u).component,y=()=>e(u).title,k=()=>e(u).subtitle,V=()=>e(u).key,H=()=>e(u).icon;ue(p,{get title(){return y()},get subtitle(){return k()},get key(){return V()},get icon(){return H()},children:(j,Z)=>{var ye=Ne(),Ce=xe(ye);Et(Ce,_,(ke,we)=>{we(ke,{})}),E(j,ye)},$$slots:{default:!0}})}),E($,U)},$$slots:{default:!0}}),E(w,h)},$$slots:{default:!0}})},$$slots:{default:!0}})}E(I,M),le(),X()}export{Sr as component,wr as universal};
