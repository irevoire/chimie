import{a as P}from"../chunks/C2I_EQjW.js";import{a as D}from"../chunks/Cx5lmlld.js";import{g as F,$ as A}from"../chunks/DdY9CyNE.js";import{g as T,a as q,P as B,b as E}from"../chunks/CWUfCk5h.js";import"../chunks/DsnmJJEf.js";import{p as S,g as f,u as z,c as $,s as g,t as G,a as k,r as y,f as H,h as I,j as J}from"../chunks/BOqQhZBJ.js";import{f as w,a as x}from"../chunks/CnteGC4G.js";import{i as d}from"../chunks/QS5y7wlf.js";import{p as b,a as K,s as j}from"../chunks/B227BkWK.js";import{g as N}from"../chunks/C4XZXykC.js";import{U as Q}from"../chunks/CwTmTzRk.js";import{s as V}from"../chunks/BufZg4h2.js";import{L as W,u as X,bt as Y}from"../chunks/LrV5ZTyj.js";import{R as Z}from"../chunks/BeWG-__C.js";import{C as tt}from"../chunks/WscBzvwE.js";import{S as et}from"../chunks/Ze2c3aZz.js";import{A as at}from"../chunks/BEiKRg21.js";const rt=(async({url:s})=>{await D(s);const e=await F(),a=s.searchParams.get("licenseKey");let r=s.searchParams.get("activationKey"),o;try{a&&!r&&(r=await T(a)),a&&r&&(await q(a,r)).activatedAt!==""&&(o=!0,P.isPurchased=!0)}catch(i){o=!1,console.log("error navigating to /buy",i)}return{meta:{title:e("buy")},isActivated:o}}),St=Object.freeze(Object.defineProperty({__proto__:null,load:rt},Symbol.toStringTag,{value:"Module"}));var st=w('<div><!> <p class="dark:text-gray-100 svelte-11mhrst"> </p></div>');function ot(s,e){S(e,!0);const a=()=>K(A,"$t",r),[r,o]=j();let i=b(e,"centered",3,!1),p=b(e,"logoSize",3,"sm");var n=st();let l;var u=$(n);{let c=z(()=>p()==="sm"?"tiny":"small");W(u,{variant:"icon",get size(){return f(c)}})}var m=g(u,2),v=$(m,!0);y(m),y(n),G(c=>{l=X(n,1,"flex gap-1 mt-2 place-items-center dark:bg-immich-dark-primary/10 bg-gray-200/50 p-2 rounded-lg bg-clip-padding border border-transparent relative supporter-effect svelte-11mhrst",null,l,{"place-content-center":i()}),V(v,c)},[()=>a()("purchase_account_info")]),x(s,n),k(),o()}var it=w("<!> <!> <!>",1);function zt(s,e){S(e,!0);const a=()=>K(A,"$t",r),[r,o]=j();let i=I(!1);Q(s,{get title(){return e.data.meta.title},children:(p,n)=>{tt(p,{size:"medium",center:!0,children:(l,u)=>{et(l,{gap:4,class:"mt-4",children:(m,v)=>{var c=it(),_=H(c);{var C=t=>{{let U=z(()=>a()("purchase_failed_activation"));at(t,{get icon(){return Y},color:"danger",get title(){return f(U)}})}};d(_,t=>{e.data.isActivated===!1&&t(C)})}var h=g(_,2);{var L=t=>{ot(t,{logoSize:"lg",centered:!0})};d(h,t=>{P.isPurchased&&t(L)})}var O=g(h,2);{var M=t=>{B(t,{onDone:()=>N(Z.photos(),{replaceState:!1})})},R=t=>{E(t,{onActivate:()=>{J(i,!0)}})};d(O,t=>{f(i)||e.data.isActivated===!0?t(M):t(R,!1)})}x(m,c)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}}),k(),o()}export{zt as component,St as universal};
