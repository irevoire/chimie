import{a as oe,u as le,c as D}from"../chunks/Cx5lmlld.js";import{g as ne,$ as ie}from"../chunks/DdY9CyNE.js";import"../chunks/DsnmJJEf.js";import{p as ue,f as I,j as p,g as e,u as t,s as i,t as P,a as me,n as w}from"../chunks/BOqQhZBJ.js";import{s as x}from"../chunks/BufZg4h2.js";import{f as U,a as f,t as Q}from"../chunks/CnteGC4G.js";import{i as W}from"../chunks/QS5y7wlf.js";import{s as de,a as H}from"../chunks/B227BkWK.js";import{g as $e}from"../chunks/C4XZXykC.js";import{R as J}from"../chunks/BeWG-__C.js";import{b as ce}from"../chunks/52C7z9ON.js";import{E as K,F,G as pe}from"../chunks/Jagi0WJL.js";import{T as V,aB as fe}from"../chunks/LrV5ZTyj.js";import{F as _e}from"../chunks/C0Ca_l_S.js";import{F as _}from"../chunks/DzmAA-7p.js";import{I as k}from"../chunks/BJT5MMCK.js";import{N as ge}from"../chunks/D-O87UL4.js";import{L as ve}from"../chunks/Dj0AsE1j.js";import{S as he}from"../chunks/rybNiN9i.js";const be=(async({url:g})=>(await oe(g,{admin:!0}),{meta:{title:(await ne())("admin.user_details")}})),De=Object.freeze(Object.defineProperty({__proto__:null,load:be},Symbol.toStringTag,{value:"Module"}));var ye=U("<!> <!>",1),ze=U(" <!>",1),Se=U("<!> <!> <!> <!> <!> <!>",1);function Qe(g,v){ue(v,!0);const s=()=>H(ie,"$t",A),X=()=>H(le,"$authUser",A),[A,Y]=de(),o=t(()=>v.data.user);let h=t(()=>e(o).isAdmin),b=t(()=>e(o).name),y=t(()=>e(o).email),z=t(()=>e(o).storageLabel||"");const Z=t(()=>e(o).quotaSizeInBytes);let u=t(()=>typeof e(o).quotaSizeInBytes=="number"?pe(e(o).quotaSizeInBytes,F.GiB):void 0);const S=t(()=>typeof e(u)=="number"?K(e(u),F.GiB):null);let ee=t(()=>e(Z)!==e(S)&&!!e(S)&&D.serverInfo&&e(S)>D.serverInfo.diskSizeRaw);const L=async()=>{await $e(J.viewUser(e(o)))},te=async q=>{q.preventDefault(),await ce(e(o),{email:e(y),name:e(b),storageLabel:e(z),quotaSizeInBytes:typeof e(u)=="number"?K(e(u),F.GiB):null,isAdmin:e(h)})&&await L()};{let q=t(()=>s()("edit_user"));_e(g,{get title(){return e(q)},size:"small",get icon(){return fe},onClose:L,onSubmit:te,children:(j,qe)=>{var G=Se(),T=I(G);{let r=t(()=>s()("email"));_(T,{get label(){return e(r)},required:!0,children:(l,n)=>{k(l,{type:"email",get value(){return e(y)},set value(a){p(y,a)}})},$$slots:{default:!0}})}var O=i(T,2);{let r=t(()=>s()("name"));_(O,{get label(){return e(r)},required:!0,class:"mt-4",children:(l,n)=>{k(l,{get value(){return e(b)},set value(a){p(b,a)}})},$$slots:{default:!0}})}var R=i(O,2);{let r=t(()=>s()("admin.quota_size_gib"));_(R,{get label(){return e(r)},class:"mt-4",children:(l,n)=>{var a=ye(),m=I(a);{let d=t(()=>s()("unlimited"));ge(m,{min:"0",step:"1",get placeholder(){return e(d)},get value(){return e(u)},set value($){p(u,$)}})}var c=i(m,2);{var B=d=>{V(d,{size:"small",color:"danger",children:($,N)=>{w();var C=Q();P(se=>x(C,se),[()=>s()("errors.quota_higher_than_disk_size")]),f($,C)},$$slots:{default:!0}})};W(c,d=>{e(ee)&&d(B)})}f(l,a)},$$slots:{default:!0}})}var E=i(R,2);{let r=t(()=>s()("storage_label"));_(E,{get label(){return e(r)},class:"mt-4",children:(l,n)=>{k(l,{get value(){return e(z)},set value(a){p(z,a)}})},$$slots:{default:!0}})}var M=i(E,2);V(M,{size:"small",class:"mt-2",color:"muted",children:(r,l)=>{w();var n=ze(),a=I(n),m=i(a);{let c=t(()=>J.queues());ve(m,{get href(){return e(c)},children:(B,d)=>{w();var $=Q();P(N=>x($,N),[()=>s()("admin.storage_template_migration_job")]),f(B,$)},$$slots:{default:!0}})}P(c=>x(a,`${c??""} `),[()=>s()("admin.note_apply_storage_label_previous_assets")]),f(r,n)},$$slots:{default:!0}});var re=i(M,2);{var ae=r=>{{let l=t(()=>s()("admin.admin_user"));_(r,{get label(){return e(l)},children:(n,a)=>{he(n,{class:"mt-4",get checked(){return e(h)},set checked(m){p(h,m)}})},$$slots:{default:!0}})}};W(re,r=>{e(o).id!==X().id&&r(ae)})}f(j,G)},$$slots:{default:!0}})}me(),Y()}export{Qe as component,De as universal};
