import{a as sr,u as or,p as nr}from"../chunks/Cx5lmlld.js";import{a0 as je,ay as Je,b9 as ir,A as lr,aw as $e}from"../chunks/DeYUhNiz.js";import"../chunks/DsnmJJEf.js";import{s as he,e as ur,d as cr,b as dr}from"../chunks/BufZg4h2.js";import{p as Ie,f as N,a as xe,b as mr,g as e,u as a,c as y,r as E,t as ye,e as vr,j as U,h as Re,i as _r,P as ut,s as o,n as gr}from"../chunks/BOqQhZBJ.js";import{i as l}from"../chunks/QS5y7wlf.js";import{h as Ee,t as St,e as fr}from"../chunks/D4fmOnVC.js";import{c as Ke,a as u,f,t as Be}from"../chunks/CnteGC4G.js";import{cm as pr,cn as br,r as hr,u as Ar,s as ct,cE as wr,I as Ae,a1 as yt,a as Sr,ae as dt,af as Fe,cF as mt,G as yr,H as Er,Y as $r,ah as Cr,cG as Tr,bG as Ir,a4 as xr,cH as kr,cI as Lr,cJ as Ur}from"../chunks/LrV5ZTyj.js";import{a as Et}from"../chunks/4T_x9N89.js";import{p as Te,s as ke,a as re,d as Mr}from"../chunks/B227BkWK.js";import{o as Or,g as vt}from"../chunks/C4XZXykC.js";import{a as Nr}from"../chunks/_KdZ2AIy.js";import{U as _t,A as He,g as Dr}from"../chunks/Bp2HQ4kn.js";import{$ as Le}from"../chunks/DdY9CyNE.js";import{T as Vr}from"../chunks/BXaFREg4.js";import{a as $t}from"../chunks/_U16pX41.js";import{A as Pr,a as Rr}from"../chunks/Di5YHdw_.js";import{b as Br}from"../chunks/eLOR7anR.js";import{a as le,A as Fr,b as Hr}from"../chunks/B6A-PVC5.js";import{H as gt}from"../chunks/Bj7pQby1.js";import{O as zr}from"../chunks/Di6OVBka.js";import{B as ze}from"../chunks/Ydc33-3A.js";import{M as we}from"../chunks/ClWsMFS7.js";import{C as We}from"../chunks/C9fqHGV9.js";import{C as Wr,A as ft}from"../chunks/D3TI8oak.js";import{A as Gr,F as jr}from"../chunks/CJ8Y9ewd.js";import{C as Jr,a as Kr}from"../chunks/Td-V8-DQ.js";import{C as Yr,T as qr}from"../chunks/BgebDwf7.js";import{D as Qr}from"../chunks/DbL3L5r_.js";import{D as Xr}from"../chunks/CAJBNUk5.js";import{g as Zr}from"../chunks/Dw326QmB.js";import{m as Se}from"../chunks/C20f7eOz.js";import{S as ea}from"../chunks/KeI0xpXW.js";import{S as ta}from"../chunks/P5k8Owjv.js";import{A as ra}from"../chunks/DYbeYGSx.js";import{T as aa}from"../chunks/-MdfcuX_.js";import{e as i}from"../chunks/BNLYq5HQ.js";import{a as pt}from"../chunks/Bc5ULZvy.js";import{f as sa}from"../chunks/D5h9ps2j.js";import{b as bt,c as oa}from"../chunks/C2I_EQjW.js";import{h as ht,a as na}from"../chunks/Jagi0WJL.js";import{a as At,A as Ce,b as ia,c as la,h as ua}from"../chunks/BTiqhowq.js";import{S as ca}from"../chunks/LRhZRw-S.js";import{R as Ge}from"../chunks/BeWG-__C.js";import{A as wt}from"../chunks/DeL_lkPB.js";import{a as da}from"../chunks/ngppk3MK.js";import{S as ma,a as va,s as _a}from"../chunks/y_IyUkeW.js";import{C as ga}from"../chunks/BCL4P6ef.js";const fa=(async({params:K,url:g})=>{await sr(g);const s=await je({id:K.albumId,withoutAssets:!0});return{album:s,meta:{title:s.albumName}}}),Ds=Object.freeze(Object.defineProperty({__proto__:null,load:fa},Symbol.toStringTag,{value:"Module"}));var pa=f('<p class="wrap-break-words whitespace-pre-line w-full text-black dark:text-white text-base"> </p>');function ba(K,g){Ie(g,!0);const s=()=>re(Le,"$t",ue),[ue,W]=ke();let p=Te(g,"description",15);const G=async()=>{try{await Je({id:g.id,updateAlbumDto:{description:p()}})}catch(R){Ee(R,s()("errors.unable_to_save_album"))}};var Y=Ke(),b=N(Y);{var A=R=>{{let q=a(()=>s()("add_a_description"));Vr(R,{class:"outline-none border-b max-h-32 border-transparent pl-0 bg-transparent ring-0 focus:ring-0 resize-none focus:border-b-2 focus:border-immich-primary dark:focus:border-immich-dark-primary dark:bg-transparent",rows:1,grow:!0,shape:"rectangle",onfocusout:G,get placeholder(){return e(q)},"data-testid":"autogrow-textarea",[br()]:Q=>(pr($t,()=>({shortcut:{key:"Enter",ctrl:!0},onShortcut:z=>z.currentTarget.blur()}))||mr)(Q),get value(){return p()},set value(Q){p(Q)}})}},j=R=>{var q=pa(),Q=y(q,!0);E(q),ye(()=>he(Q,p())),u(R,q)};l(b,R=>{g.isOwned?R(A):p()&&R(j,1)})}u(K,Y),xe(),W()}var ha=f('<input type="text"/>');function Aa(K,g){Ie(g,!0);const s=()=>re(Le,"$t",ue),[ue,W]=ke();let p=Te(g,"albumName",15),G=a(p);const Y=async()=>{if(e(G)!==p())try{await(async A=>{p(A.albumName)})(await Je({id:g.id,updateAlbumDto:{albumName:e(G)}})),g.onUpdate(p())}catch(A){Ee(A,s()("errors.unable_to_save_album"));return}};var b=ha();hr(b),Et(b,(A,j)=>$t?.(A,j),()=>({shortcut:{key:"Enter"},onShortcut:A=>A.currentTarget.blur()})),vr(()=>Br(b,()=>e(G),A=>U(G,A))),ye((A,j)=>{Ar(b,1,`w-[99%] mb-2 border-b-2 border-transparent text-2xl md:text-4xl lg:text-6xl text-primary outline-none transition-all ${g.isOwned?"hover:border-gray-400":"hover:border-transparent"} focus:border-b-2 focus:border-immich-primary focus:outline-none bg-light dark:focus:border-immich-dark-primary dark:focus:bg-immich-dark-gray placeholder:text-primary/90`),b.disabled=!g.isOwned,ct(b,"title",A),ct(b,"placeholder",j)},[()=>s()("edit_title"),()=>s()("add_a_title")]),ur("blur",b,Y),u(K,b),xe(),W()}function wa(K,g){Ie(g,!0);const s=()=>re(Le,"$t",ue),[ue,W]=ke();let p=Te(g,"album",15),G=Te(g,"menuItem",3,!1);const{getAssets:Y,clearSelect:b}=Zr(),A=async()=>{if(await Se.showDialog({prompt:s()("remove_assets_album_confirmation",{values:{count:Y().length}})}))try{const B=[...Y()].map(ve=>ve.id),n=await ir({id:p().id,bulkIdsDto:{ids:B}});p(await je({id:p().id})),g.onRemove?.(B);const $=n.filter(({success:ve})=>ve).length;St.success(s()("assets_removed_count",{values:{count:$}})),b()}catch(B){Ee(B,s()("errors.error_removing_assets_from_album"))}};var j=Ke(),R=N(j);{var q=z=>{{let B=a(()=>s()("remove_from_album"));we(z,{get text(){return e(B)},get icon(){return wr},onClick:A})}},Q=z=>{{let B=a(()=>s()("remove_from_album"));Ae(z,{shape:"round",color:"secondary",variant:"ghost",get"aria-label"(){return e(B)},get icon(){return yt},onclick:A})}};l(R,z=>{G()?z(q):z(Q,!1)})}u(K,j),xe(),W()}var Sa=f('<button type="button" class="svelte-pnort"><!></button>'),ya=f('<div class="my-3 flex gap-x-1 svelte-pnort"><!> <button type="button" class="svelte-pnort"><!></button> <!> <!> <!></div>'),Ea=f('<section class="pt-8 md:pt-24 svelte-pnort"><!> <!> <!> <!></section>'),$a=f('<section id="empty-album" class=" mt-50 flex place-content-center place-items-center svelte-pnort"><div class="w-75 svelte-pnort"><p class="uppercase text-xs dark:text-immich-dark-fg svelte-pnort"> </p> <button type="button" class="mt-5 bg-subtle flex w-full place-items-center gap-6 rounded-2xl border px-8 py-8 text-immich-fg transition-all hover:bg-gray-100 dark:hover:bg-gray-500/20 hover:text-immich-primary dark:border-none dark:text-immich-dark-fg dark:hover:text-immich-dark-primary svelte-pnort"><span class="text-primary svelte-pnort"><!></span> <span class="text-lg svelte-pnort"> </span></button></div></section>'),Ca=f("<!> <!>",1),Ta=f('<div class="absolute z-2 bottom-0 end-0 mb-6 me-6 justify-self-end svelte-pnort"><!></div>'),Ia=f("<!> <!>",1),xa=f("<!> <!> <!> <!> <!> <!>",1),ka=f("<!> <!> <!> <!> <!>",1),La=f("<!> <!> <!> <!> <!>",1),Ua=f("<!> <!>",1),Ma=f("<!> <!>",1),Oa=f("<!> <!> <!>",1),Na=f("<!> <!> <!> <!> <!> <!>",1),Da=f('<p class="text-lg dark:text-immich-dark-fg svelte-pnort"><!></p>'),Va=f("<!> <!>",1),Pa=f("<!> <!> <!>",1),Ra=f('<div class="flex svelte-pnort"><div id="activity-panel" class="z-2 w-90 md:w-115 overflow-y-auto transition-all dark:border-l dark:border-s-immich-dark-gray svelte-pnort" translate="yes"><!></div></div>'),Ba=f('<!> <!> <div class="flex overflow-hidden svelte-pnort"><div class="relative w-full shrink svelte-pnort"><main class="relative h-dvh overflow-hidden px-2 md:px-6 max-md:pt-(--navbar-height-md) pt-(--navbar-height) svelte-pnort"><!> <!></main> <!></div> <!></div>',1);function Vs(K,g){Ie(g,!0);const s=()=>re(Le,"$t",b),ue=()=>re(z,"$slideshowNavigation",b),W=()=>re(j,"$showAssetViewer",b),p=()=>re(or,"$user",b),G=()=>re(nr,"$preferences",b),Y=()=>re(q,"$gridScrollTarget",b),[b,A]=ke();let{isViewing:j,setAssetId:R,gridScrollTarget:q}=da,{slideshowState:Q,slideshowNavigation:z}=_a,B=Re(void 0),n=Re(_r(i.VIEW)),$=Re(void 0),ve=a(()=>e($)?.showAssetOwners??!1);const h=new wt,_e=new wt,Ct=async()=>{try{await le.toggleLike()}catch(r){Ee(r,s()("errors.cant_change_asset_favorite"))}},Tt=async()=>{const r=ue()===ma.Shuffle?await e($).getRandomAsset():e($).months[0]?.dayGroups[0]?.viewerAssets[0]?.asset;r&&ht(R(r.id).then(()=>Mr(Q,va.PlaySlideshow)))},It=async()=>{if(e($).suspendTransitions=!0,e(n)===i.SELECT_THUMBNAIL){U(n,i.VIEW,!0);return}if(e(n)===i.SELECT_ASSETS){await Ye();return}if(e(n)===i.OPTIONS){U(n,i.VIEW,!0);return}if(!W()&&h.selectionActive){na(h);return}},ce=async()=>{U(t,await je({id:e(t).id,withoutAssets:!0}))},Ue=async()=>{e($).suspendTransitions=!0,U(n,i.VIEW,!0),await bt({targetRoute:"current",assetId:null,assetGridRouteSearchParams:{at:e(B)?.at}},{replaceState:!0,forceNavigate:!0}),U(B,null)},Ye=async()=>{_e.clearMultiselect(),await Ue()},xt=r=>{e($).removeAssets(r),h.clearMultiselect()},qe=async r=>{e($).removeAssets(r),await ce()},kt=async r=>{e($).upsertAssets(r),await ce()},Lt=async r=>{e(n)===i.SELECT_THUMBNAIL&&(await Qe(r),U(n,i.VIEW,!0),h.clearMultiselect())},Ut=async()=>{if(h.selectedAssets.length===1){const[r]=h.selectedAssets;h.clearMultiselect(),await Qe(r.id)}},Qe=async r=>{try{await Je({id:e(t).id,updateAlbumDto:{albumThumbnailAssetId:r}}),St.success(s()("album_cover_updated"))}catch(d){Ee(d,s()("errors.unable_to_update_album_cover"))}};Or(async({to:r})=>{!oa(r?.route.id)&&e(t).assetCount===0&&!e(t).albumName&&await At(e(t),{notify:!1,prompt:!1})});let t=a(()=>g.data.album),Xe=a(()=>e(t).id);const Me=a(()=>e(t)?.shared&&e(t).albumUsers.some(({role:r})=>r===$e.Editor)),Mt=a(()=>e(ve)&&e(Me)?[e(t).owner,...e(t).albumUsers.map(({user:r})=>r)]:[]);ut(()=>{!e(t).isActivityEnabled&&le.commentCount===0&&pt.closeActivityPanel()});const Ot=a(()=>e(n)===i.SELECT_ASSETS?{visibility:lr.Timeline,withPartners:!0,timelineAlbumId:e(Xe)}:{albumId:e(Xe),order:e(t).order}),Ze=a(()=>e(n)===i.SELECT_ASSETS?!1:e(t).albumUsers.length>0);ut(()=>{W()||!e(Ze)||ht(le.init(e(t).id))}),dr(()=>le.reset());let ae=a(()=>p().id==e(t).ownerId),Nt=a(()=>e(t).albumUsers.length>0&&!W()&&(e(t).isActivityEnabled||le.commentCount>0)),Dt=a(()=>e(t).albumUsers.find(({user:{id:r}})=>r===p().id)?.role===$e.Editor||e(t).ownerId===p().id),Vt=a(()=>e(t).albumUsers.some(({role:r})=>r===$e.Viewer));const Pt=a(()=>e(n)===i.SELECT_ASSETS?!0:e(n)===i.SELECT_THUMBNAIL),Rt=a(()=>e(n)===i.SELECT_ASSETS?!1:e(n)===i.SELECT_THUMBNAIL),Bt=a(()=>e(n)!==i.SELECT_ASSETS),Ft=({id:r})=>{e(n)!==i.SELECT_ASSETS&&Lt(r)},Ht=a(()=>e(n)===i.SELECT_ASSETS?_e:h),zt=async()=>{await ce()},Wt=async({id:r})=>{r===e(t).id&&(await vt(Ge.albums()),U(n,i.VIEW,!0))},Gt=async()=>{await ce(),_e.clearMultiselect(),await Ue()},jt=async()=>{await ce(),await Ue()},Jt=({albumId:r,userId:d,role:F})=>{r===e(t).id&&(e(t).albumUsers=e(t).albumUsers.map(M=>M.user.id===d?{...M,role:F}:M))},Kt=a(()=>Dr(s())),Yt=a(()=>e(Kt).Cast),et=a(()=>la(s(),e(t),e(n))),tt=a(()=>e(et).Share),qt=a(()=>e(et).Close),rt=a(()=>ia(s(),e(t),_e.selectedAssets)),at=a(()=>e(rt).AddAssets),st=a(()=>e(rt).Upload);var ot=Ba(),nt=N(ot);zr(nt,{onSharedLinkCreate:zt,onSharedLinkDelete:ce,onAlbumDelete:Wt,onAlbumAddAssets:Gt,onAlbumShare:jt,onAlbumUserUpdate:Jt,onAlbumUserDelete:ce,onAlbumUpdate:r=>U(t,r)});var it=o(nt,2);{let r=a(()=>s()("album")),d=a(()=>[e(at),e(st),e(qt)]);ga(it,{get name(){return e(r)},get actions(){return e(d)}})}var Oe=o(it,2),Ne=y(Oe),De=y(Ne),lt=y(De);{let r=a(()=>e(n)!==i.SELECT_ASSETS);aa(lt,{get enableRouting(){return e(r)},get album(){return e(t)},get albumUsers(){return e(Mt)},get options(){return e(Ot)},get assetInteraction(){return e(Ht)},get isShared(){return e(Ze)},get isSelectionMode(){return e(Pt)},get singleSelect(){return e(Rt)},get showArchiveIcon(){return e(Bt)},onSelect:Ft,onEscape:It,get timelineManager(){return e($)},set timelineManager(d){U($,d,!0)},children:(d,F)=>{var M=Ke(),X=N(M);{var ge=se=>{var de=Ca(),x=N(de);{var fe=m=>{var v=Ea(),T=y(v);Aa(T,{get id(){return e(t).id},get albumName(){return e(t).albumName},get isOwned(){return e(ae)},onUpdate:w=>e(t).albumName=w});var k=o(T,2);{var O=w=>{Pr(w,{get album(){return e(t)}})};l(k,w=>{e(t).assetCount>0&&w(O)})}var I=o(k,2);{var V=w=>{var Z=ya(),_=y(Z);{var c=S=>{{let ee=a(()=>s()("create_link_to_share"));Ae(S,{get"aria-label"(){return e(ee)},color:"secondary",size:"medium",shape:"round",get icon(){return $r},onclick:()=>Se.show(ca,{albumId:e(t).id})})}};l(_,S=>{e(t).hasSharedLink&&e(ae)&&S(c)})}var P=o(_,2);P.__click=()=>Se.show(Ce,{album:e(t)});var me=y(P);_t(me,{get user(){return e(t).owner},size:"md"}),E(P);var H=o(P,2);fr(H,17,()=>e(t).albumUsers.filter(({role:S})=>S===$e.Editor),({user:S})=>S.id,(S,ee,ie,L)=>{let J=()=>e(ee).user;var te=Sa();te.__click=()=>Se.show(Ce,{album:e(t)});var Ve=y(te);_t(Ve,{get user(){return J()},size:"md"}),E(te),u(S,te)});var ne=o(H,2);{var pe=S=>{{let ee=a(()=>s()("view_all_users"));Ae(S,{shape:"round",get"aria-label"(){return e(ee)},color:"secondary",size:"medium",get icon(){return Fe},onclick:()=>Se.show(Ce,{album:e(t)})})}};l(ne,S=>{e(Vt)&&S(pe)})}var be=o(ne,2);He(be,{get action(){return e(tt)}}),E(Z),u(w,Z)};l(I,w=>{(e(t).albumUsers.length>0||e(t).hasSharedLink&&e(ae))&&w(V)})}var oe=o(I,2);ba(oe,{get id(){return e(t).id},get isOwned(){return e(ae)},get description(){return e(t).description},set description(w){e(t).description=w}}),E(v),u(m,v)};l(x,m=>{e(n)!==i.SELECT_THUMBNAIL&&m(fe)})}var D=o(x,2);{var C=m=>{var v=$a(),T=y(v),k=y(T),O=y(k,!0);E(k);var I=o(k,2);I.__click=()=>U(n,i.SELECT_ASSETS,!0);var V=y(I),oe=y(V);Sr(oe,{get icon(){return dt},size:"24"}),E(V);var w=o(V,2),Z=y(w,!0);E(w),E(I),E(T),E(v),ye((_,c)=>{he(O,_),he(Z,c)},[()=>s()("add_photos"),()=>s()("select_photos")]),u(m,v)};l(D,m=>{e(t).assetCount===0&&m(C)})}u(se,de)};l(X,se=>{e(n)!==i.SELECT_ASSETS&&se(ge)})}u(d,M)},$$slots:{default:!0}})}var Qt=o(lt,2);{var Xt=r=>{var d=Ta(),F=y(d);{let M=a(()=>!e(t).isActivityEnabled);Fr(F,{get disabled(){return e(M)},get isLiked(){return le.isLiked},get numberOfComments(){return le.commentCount},numberOfLikes:void 0,onFavorite:Ct})}E(d),u(r,d)};l(Qt,r=>{e(Nt)&&!le.isLoading&&r(Xt)})}E(De);var Zt=o(De,2);{var er=r=>{ra(r,{get assets(){return h.selectedAssets},clearSelect:()=>h.clearMultiselect(),children:(d,F)=>{var M=La(),X=N(M);Wr(X,{});var ge=o(X,2);ea(ge,{get timelineManager(){return e($)},get assetInteraction(){return h}});var se=o(ge,2);{let D=a(()=>s()("add_to"));ze(se,{get icon(){return dt},get title(){return e(D)},children:(C,m)=>{var v=Ia(),T=N(v);ft(T,{});var k=o(T,2);ft(k,{shared:!0}),u(C,v)},$$slots:{default:!0}})}var de=o(se,2);{var x=D=>{jr(D,{get removeFavorite(){return h.isAllFavorite},onFavorite:(C,m)=>e($).update(C,v=>v.isFavorite=m)})};l(de,D=>{h.isAllUserOwned&&D(x)})}var fe=o(de,2);{let D=a(()=>s()("menu"));ze(fe,{get icon(){return Fe},get title(){return e(D)},offset:{x:175,y:25},children:(C,m)=>{var v=ka(),T=N(v);Xr(T,{menuItem:!0,get filename(){return`${e(t).albumName??""}.zip`}});var k=o(T,2);{var O=c=>{var P=xa(),me=N(P);Jr(me,{menuItem:!0});var H=o(me,2);Yr(H,{menuItem:!0});var ne=o(H,2);Kr(ne,{menuItem:!0});var pe=o(ne,2);{var be=ie=>{{let L=a(()=>s()("set_as_album_cover"));we(ie,{get text(){return e(L)},get icon(){return mt},onClick:()=>Ut()})}};l(pe,ie=>{h.selectedAssets.length===1&&ie(be)})}var S=o(pe,2);Gr(S,{menuItem:!0,get unarchive(){return h.isAllArchived},onArchive:(ie,L)=>e($).update(ie,J=>J.visibility=L)});var ee=o(S,2);ta(ee,{menuItem:!0,onVisibilitySet:xt}),u(c,P)};l(k,c=>{h.isAllUserOwned&&c(O)})}var I=o(k,2);{var V=c=>{qr(c,{menuItem:!0})};l(I,c=>{G().tags.enabled&&h.isAllUserOwned&&c(V)})}var oe=o(I,2);{var w=c=>{wa(c,{menuItem:!0,onRemove:qe,get album(){return e(t)},set album(P){U(t,P)}})};l(oe,c=>{(e(ae)||h.isAllUserOwned)&&c(w)})}var Z=o(oe,2);{var _=c=>{Qr(c,{menuItem:!0,onAssetDelete:qe,onUndoDelete:kt})};l(Z,c=>{h.isAllUserOwned&&c(_)})}u(C,v)},$$slots:{default:!0}})}u(d,M)},$$slots:{default:!0}})},tr=r=>{var d=Pa(),F=N(d);{var M=x=>{We(x,{showBackButton:!0,get backIcon(){return Cr},onClose:()=>vt(Ge.albums()),trailing:D=>{var C=Na(),m=N(C);He(m,{get action(){return e(Yt)}});var v=o(m,2);{var T=_=>{{let c=a(()=>s()("add_photos"));Ae(_,{variant:"ghost",shape:"round",color:"secondary",get"aria-label"(){return e(c)},onclick:async()=>{e($).suspendTransitions=!0,U(n,i.SELECT_ASSETS,!0),U(B,{at:Y()?.at},!0),await bt({targetRoute:"current",assetId:null,assetGridRouteSearchParams:{at:null}},{replaceState:!0})},get icon(){return Tr}})}};l(v,_=>{e(Dt)&&_(T)})}var k=o(v,2);He(k,{get action(){return e(tt)}});var O=o(k,2);{var I=_=>{Rr(_,{get album(){return e(t)}})};l(O,_=>{sa.value.map&&_(I)})}var V=o(O,2);{var oe=_=>{var c=Ua(),P=N(c);{let H=a(()=>s()("slideshow"));Ae(P,{shape:"round",variant:"ghost",color:"secondary",get"aria-label"(){return e(H)},onclick:Tt,get icon(){return Ir}})}var me=o(P,2);{let H=a(()=>s()("download"));Ae(me,{shape:"round",variant:"ghost",color:"secondary",get"aria-label"(){return e(H)},onclick:()=>ua(e(t)),get icon(){return xr}})}u(_,c)};l(V,_=>{e(t).assetCount>0&&_(oe)})}var w=o(V,2);{var Z=_=>{{let c=a(()=>s()("album_options"));ze(_,{get icon(){return Fe},get title(){return e(c)},color:"secondary",offset:{x:175,y:25},children:(P,me)=>{var H=Oa(),ne=N(H);{var pe=L=>{{let J=a(()=>e(ve)?Lr:Ur),te=a(()=>s()("view_asset_owners"));we(L,{get icon(){return e(J)},get text(){return e(te)},onClick:()=>e($).toggleShowAssetOwners()})}};l(ne,L=>{e(Me)&&L(pe)})}var be=o(ne,2);{var S=L=>{var J=Ma(),te=N(J);{let Pe=a(()=>s()("select_album_cover"));we(te,{get icon(){return mt},get text(){return e(Pe)},onClick:()=>U(n,i.SELECT_THUMBNAIL,!0)})}var Ve=o(te,2);{let Pe=a(()=>s()("options"));we(Ve,{get icon(){return kr},get text(){return e(Pe)},onClick:()=>Se.show(Ce,{album:e(t)})})}u(L,J)};l(be,L=>{e(ae)&&e(t).assetCount>0&&L(S)})}var ee=o(be,2);{var ie=L=>{{let J=a(()=>s()("delete_album"));we(L,{get icon(){return yt},get text(){return e(J)},onClick:()=>At(e(t))})}};l(ee,L=>{e(ae)&&L(ie)})}u(P,H)},$$slots:{default:!0}})}};l(w,_=>{(e(ae)||e(Me))&&_(Z)})}u(D,C)},$$slots:{trailing:!0}})};l(F,x=>{e(n)===i.VIEW&&x(M)})}var X=o(F,2);{var ge=x=>{We(x,{onClose:Ye,leading:C=>{var m=Da(),v=y(m);{var T=O=>{var I=Be();ye(V=>he(I,V),[()=>s()("add_to_album")]),u(O,I)},k=O=>{var I=Be();ye(V=>he(I,V),[()=>s()("selected_count",{values:{count:_e.selectedAssets.length}})]),u(O,I)};l(v,O=>{_e.selectionActive?O(k,!1):O(T)})}E(m),u(C,m)},trailing:C=>{var m=Va(),v=N(m);gt(v,{get action(){return e(st)}});var T=o(v,2);gt(T,{get action(){return e(at)}}),u(C,m)},$$slots:{leading:!0,trailing:!0}})};l(X,x=>{e(n)===i.SELECT_ASSETS&&x(ge)})}var se=o(X,2);{var de=x=>{We(x,{onClose:()=>U(n,i.VIEW,!0),leading:D=>{gr();var C=Be();ye(m=>he(C,m),[()=>s()("select_album_cover")]),u(D,C)},$$slots:{leading:!0}})};l(se,x=>{e(n)===i.SELECT_THUMBNAIL&&x(de)})}u(r,d)};l(Zt,r=>{h.selectionActive?r(er):r(tr,!1)})}E(Ne);var rr=o(Ne,2);{var ar=r=>{var d=Ra(),F=y(d),M=y(F);{let X=a(()=>!e(t).isActivityEnabled);Hr(M,{get user(){return p()},get disabled(){return e(X)},get albumOwnerId(){return e(t).ownerId},get albumId(){return e(t).id}})}E(F),E(d),yr(3,F,()=>Er,()=>({duration:150})),u(r,d)};l(rr,r=>{e(t).albumUsers.length>0&&e(t)&&pt.isShowActivityPanel&&p()&&!W()&&r(ar)})}E(Oe),Et(Oe,(r,d)=>Nr?.(r,d),()=>({routeStartsWith:Ge.albums()})),u(K,ot),xe(),A()}cr(["click"]);export{Vs as component,Ds as universal};
