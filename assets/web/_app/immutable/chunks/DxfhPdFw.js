class l extends Map{value;path;parent;hasAssets;id;color;_parents;_children;constructor(t,e,r){super(),this.value=t,this.parent=r,this.path=e,this.hasAssets=!1}static fromPaths(t){const e=new l("","",null);for(const r of t){const n=e.add(r);n.hasAssets=!0}return e}static fromTags(t){const e=new l("","",null);for(const r of t){const n=e.add(r.value);n.hasAssets=!0,n.id=r.id,n.color=r.color}return e}traverse(t){const e=u(t);let r=this,n=null;for(const i of e){n=n===null?i:a(n,i);const o=r.get(n);o&&(r=o,n=null)}return r}collapse(){if(this.size===1&&!this.hasAssets&&this.parent!==null){const t=this.values().next().value;t.value=a(this.value,t.value),t.parent=this.parent;const e=Array.from(this.parent.entries());this.parent.clear();for(const[r,n]of e)r===this.value?this.parent.set(t.value,t):this.parent.set(r,n)}for(const t of this.values())t.collapse()}add(t){let e=this;for(const r of u(t)){let n=e.get(r);n===void 0&&(n=new l(r,a(e.path,r),e),e.set(r,n)),e=n}return e}get parents(){if(this._parents)return this._parents;const t=[];let e=this.parent;for(;e!==null&&e.parent!==null;)t.push(e),e=e.parent;return this._parents=t.reverse()}get children(){return this._children??=Array.from(this.values())}}const c=s=>s.length>1&&s[s.length-1]==="/"?s.slice(0,-1):s;function u(s){const t=s.split("/");return s[0]==="/"&&(t[0]="/"),s[s.length-1]==="/"&&t.pop(),t}function a(s,t){return s?t?s[s.length-1]==="/"?s+t:s+"/"+t:s:t}function h(s){const t=c(s),e=t.lastIndexOf("/");return e>0?t.slice(0,e):e===0?"/":t}export{l as T,h as g,a as j};
