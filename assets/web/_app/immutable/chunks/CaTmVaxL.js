import"./DsnmJJEf.js";import{as as A,p as E,f as H,a as K,e as V,t as j}from"./BOqQhZBJ.js";import{d as z}from"./BufZg4h2.js";import{c as D,a as b,f as F}from"./CnteGC4G.js";import{i as G}from"./QS5y7wlf.js";import{a as J}from"./4T_x9N89.js";import{r as M,u as O,q as Q,s as U}from"./LrV5ZTyj.js";import{b as X}from"./eLOR7anR.js";import{p as o,a as Y,s as Z}from"./B227BkWK.js";import{i as $}from"./DFvk55M8.js";import{m as C,a as ee}from"./BNLYq5HQ.js";import{S as ae}from"./6ckOa7Ax.js";import{h as te}from"./D4fmOnVC.js";import{$ as x}from"./DdY9CyNE.js";import{K as re}from"./DeYUhNiz.js";const oe=(s,e,n,d)=>s.includes(" ")?e.filter(c=>c.name.toLowerCase().startsWith(s.toLowerCase())).slice(0,n):e.filter(c=>c.name.split(" ").some(u=>u.toLowerCase().startsWith(s.toLowerCase()))).slice(0,n),Le=A(x,s=>(e,n)=>s("person_hidden",{values:{name:e,hidden:n}}));var se=F('<input type="text"/>');function we(s,e){E(e,!0);const n=()=>Y(x,"$t",d),[d,c]=Z();let m=[],u,l=null,i=null;const _=()=>{v(oe(t(),m,y()))},g=()=>{v([]),P(),L()()},P=()=>{l&&(l.abort(),l=null),i&&(clearTimeout(i),i=null)};let t=o(e,"searchName",15),v=o(e,"searchedPeopleLocal",15),y=o(e,"numberPeopleToSearch",3,C),R=o(e,"inputClass",3,"w-full gap-2"),h=o(e,"showLoadingSpinner",15,!1),S=o(e,"placeholder",19,()=>n()("name_or_nickname")),L=o(e,"onReset",3,()=>{}),T=o(e,"onSearch",3,()=>{});const W=()=>{g(),L()()};async function p(r,a){if(t(a??t()),T()(),t()===""){g();return}if(!r&&m.length<C&&t().startsWith(u)){_();return}P(),l=new AbortController,i=setTimeout(()=>h(!0),ee);try{m=await re({name:t()},{signal:l?.signal}),u=t()}catch(f){te(f,n()("errors.cant_search_people"))}finally{clearTimeout(i),i=null,l=null,h(!1),_()}}var N={searchPeople:p},w=D(),B=H(w);{var k=r=>{ae(r,{get showLoadingSpinner(){return h()},get placeholder(){return S()},onReset:W,onSearch:({force:a})=>p(a??!1),get name(){return t()},set name(a){t(a)}})},q=r=>{var a=se();M(a),a.__input=()=>p(!1),V(()=>X(a,t)),J(a,f=>$?.(f)),j(()=>{O(a,1,Q(R())),U(a,"placeholder",S())}),b(r,a)};G(B,r=>{e.type==="searchBar"?r(k):r(q,!1)})}b(s,w);var I=K(N);return c(),I}z(["input"]);export{we as P,Le as g};
