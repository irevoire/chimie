import"./DeYUhNiz.js";import{i as Ee}from"./B_VXSWsl.js";import{F as j,w as Te,g as _,ae as Se,_ as oe,ai as De,aD as ae,bp as Ae,aF as Ie,bq as he,a0 as le,v as ze,C as $,br as Ne,bs as Oe,bt as Me,x as F,I as He,y as Fe,bb as te,m as Pe,z as Re,A as Ke,B as de,D as ee,M as X,J as Be,bf as Le,bu as D,aA as me,aC as be,bv as re,Z as qe,K as Je,bw as Ve,bx as We,be as Xe,aB as Ye,p as U,f as S,b as W,a as Z,c as R,r as O,u as V,s as Y,t as Ge,h as Ue,i as Ze}from"./BOqQhZBJ.js";import{s as Qe,m as je,u as $e}from"./BufZg4h2.js";import"./DsnmJJEf.js";import{c as A,s as K,a as C,f as Q,t as er}from"./CnteGC4G.js";import{i as M}from"./QS5y7wlf.js";import{p as T,e as _e,r as ie,b as G}from"./B227BkWK.js";import{dK as rr,cd as P,n as ne,p as pe,h as ye,i as we,G as fe,ab as ar,H as nr,a as sr,T as ce,y as tr,z as ir,X as or,cD as lr,dL as dr,dM as fr,dN as ue,J as cr,l as B,cK as ur}from"./LrV5ZTyj.js";function Lr(r,e){return e}function vr(r,e,a){for(var o=[],u=e.length,l,s=e.length,i=0;i<u;i++){let m=e[i];be(m,()=>{if(l){if(l.pending.delete(m),l.done.add(m),l.pending.size===0){var g=r.outrogroups;se(te(l.done)),g.delete(l),g.size===0&&(r.outrogroups=null)}}else s-=1},!1)}if(s===0){var t=o.length===0&&a!==null;if(t){var f=a,d=f.parentNode;Xe(d),d.append(f),r.items.clear()}se(e,!t)}else l={pending:new Set(e),done:new Set},(r.outrogroups??=new Set).add(l)}function se(r,e=!0){for(var a=0;a<r.length;a++)Ye(r[a],e)}var ve;function gr(r,e,a,o,u,l=null){var s=r,i=new Map,t=(e&he)!==0;if(t){var f=r;s=F?$(He(f)):f.appendChild(j())}F&&Fe();var d=null,m=Se(()=>{var c=a();return Pe(c)?c:c==null?[]:te(c)}),g,h=!0;function p(){n.fallback=d,hr(n,g,s,e,o),d!==null&&(g.length===0?(d.f&D)===0?me(d):(d.f^=D,J(d,null,s)):be(d,()=>{d=null}))}var k=Te(()=>{g=_(m);var c=g.length;let E=!1;if(F){var I=Re(s)===Ke;I!==(c===0)&&(s=de(),$(s),ee(!1),E=!0)}for(var v=new Set,b=De,x=Ie(),w=0;w<c;w+=1){F&&X.nodeType===Be&&X.data===Le&&(s=X,E=!0,ee(!1));var N=g[w],H=o(N,w),y=h?null:i.get(H);y?(y.v&&oe(y.v,N),y.i&&oe(y.i,w),x&&b.unskip_effect(y.e)):(y=mr(i,h?s:ve??=j(),N,H,w,u,e,a),h||(y.e.f|=D),i.set(H,y)),v.add(H)}if(c===0&&l&&!d&&(h?d=ae(()=>l(s)):(d=ae(()=>l(ve??=j())),d.f|=D)),c>v.size&&Ae(),F&&c>0&&$(de()),!h)if(x){for(const[ke,xe]of i)v.has(ke)||b.skip_effect(xe.e);b.oncommit(p),b.ondiscard(()=>{})}else p();E&&ee(!0),_(m)}),n={effect:k,items:i,outrogroups:null,fallback:d};h=!1,F&&(s=X)}function L(r){for(;r!==null&&(r.f&Ve)===0;)r=r.next;return r}function hr(r,e,a,o,u){var l=(o&We)!==0,s=e.length,i=r.items,t=L(r.effect.first),f,d=null,m,g=[],h=[],p,k,n,c;if(l)for(c=0;c<s;c+=1)p=e[c],k=u(p,c),n=i.get(k).e,(n.f&D)===0&&(n.nodes?.a?.measure(),(m??=new Set).add(n));for(c=0;c<s;c+=1){if(p=e[c],k=u(p,c),n=i.get(k).e,r.outrogroups!==null)for(const y of r.outrogroups)y.pending.delete(n),y.done.delete(n);if((n.f&D)!==0)if(n.f^=D,n===t)J(n,null,a);else{var E=d?d.next:t;n===r.effect.last&&(r.effect.last=n.prev),n.prev&&(n.prev.next=n.next),n.next&&(n.next.prev=n.prev),z(r,d,n),z(r,n,E),J(n,E,a),d=n,g=[],h=[],t=L(d.next);continue}if((n.f&re)!==0&&(me(n),l&&(n.nodes?.a?.unfix(),(m??=new Set).delete(n))),n!==t){if(f!==void 0&&f.has(n)){if(g.length<h.length){var I=h[0],v;d=I.prev;var b=g[0],x=g[g.length-1];for(v=0;v<g.length;v+=1)J(g[v],I,a);for(v=0;v<h.length;v+=1)f.delete(h[v]);z(r,b.prev,x.next),z(r,d,b),z(r,x,I),t=I,d=x,c-=1,g=[],h=[]}else f.delete(n),J(n,t,a),z(r,n.prev,n.next),z(r,n,d===null?r.effect.first:d.next),z(r,d,n),d=n;continue}for(g=[],h=[];t!==null&&t!==n;)(f??=new Set).add(t),h.push(t),t=L(t.next);if(t===null)continue}(n.f&D)===0&&g.push(n),d=n,t=L(n.next)}if(r.outrogroups!==null){for(const y of r.outrogroups)y.pending.size===0&&(se(te(y.done)),r.outrogroups?.delete(y));r.outrogroups.size===0&&(r.outrogroups=null)}if(t!==null||f!==void 0){var w=[];if(f!==void 0)for(n of f)(n.f&re)===0&&w.push(n);for(;t!==null;)(t.f&re)===0&&t!==r.fallback&&w.push(t),t=L(t.next);var N=w.length;if(N>0){var H=(o&he)!==0&&s===0?a:null;if(l){for(c=0;c<N;c+=1)w[c].nodes?.a?.measure();for(c=0;c<N;c+=1)w[c].nodes?.a?.fix()}vr(r,w,H)}}l&&qe(()=>{if(m!==void 0)for(n of m)n.nodes?.a?.apply()})}function mr(r,e,a,o,u,l,s,i){var t=(s&Oe)!==0?(s&Me)===0?ze(a,!1,!1):le(a):null,f=(s&Ne)!==0?le(u):null;return{v:t,i:f,e:ae(()=>(l(e,t??a,f??u,i),()=>{r.delete(o)}))}}function J(r,e,a){if(r.nodes)for(var o=r.nodes.start,u=r.nodes.end,l=e&&(e.f&D)===0?e.nodes.start:a;o!==null;){var s=Je(o);if(l.before(o),o===u)return;o=s}}function z(r,e,a){e===null?r.effect.first=a:e.next=a,a===null?r.effect.last=e:a.prev=e}function br(r,e){U(e,!0);let a=T(e,"delayDuration",3,700),o=T(e,"disableCloseOnTriggerClick",3,!1),u=T(e,"disableHoverableContent",3,!1),l=T(e,"disabled",3,!1),s=T(e,"ignoreNonKeyboardFocus",3,!1),i=T(e,"skipDelayDuration",3,300);rr.create({delayDuration:P(()=>a()),disableCloseOnTriggerClick:P(()=>o()),disableHoverableContent:P(()=>u()),disabled:P(()=>l()),ignoreNonKeyboardFocus:P(()=>s()),skipDelayDuration:P(()=>i())});var t=A(),f=S(t);K(f,()=>e.children??W),C(r,t),Z()}function _r(r,e){var a=A(),o=S(a);_e(o,()=>br,(u,l)=>{l(u,{disableCloseOnTriggerClick:!0,ignoreNonKeyboardFocus:!0,get delayDuration(){return e.delayDuration},children:(s,i)=>{var t=A(),f=S(t);K(f,()=>e.children??W),C(s,t)},$$slots:{default:!0}})}),C(r,a)}var pr=Q("<div><!></div>");function yr(r,e){U(e,!0);let a=T(e,"color",3,"primary"),o=T(e,"shape",3,"semi-round"),u=T(e,"size",3,"medium"),l=ie(e,["$$slots","$$events","$$legacy","color","shape","size","class","children"]);const s=ne({base:"bg-light text-dark overflow-hidden border py-1.5 shadow-xs transition-all",variants:{color:{primary:"border-primary-100 bg-primary-50 dark:bg-primary-100 dark:border-primary-200",secondary:"border-light-200 bg-light-100 dark:bg-light-200 dark:border-light-300",success:"border-success-100 bg-success-50 dark:bg-success-100 dark:border-success-200",info:"border-info-100 bg-info-50 dark:bg-info-100 dark:border-info-200",warning:"border-warning-100 bg-warning-50 dark:bg-warning-100 dark:border-warning-200",danger:"border-danger-100 bg-danger-50 dark:bg-danger-100 dark:border-danger-200"},shape:pe.shape,size:{tiny:"w-64",small:"w-72",medium:"w-xs",large:"w-sm",giant:"w-lg",full:"w-full"},roundedSize:{tiny:"rounded-lg",small:"rounded-lg",medium:"rounded-xl",large:"rounded-xl",giant:"rounded-2xl"}}});var i=pr();ye(i,f=>({class:f,...l}),[()=>we(s({shape:o(),size:u(),color:a(),roundedSize:o()==="semi-round"?"medium":void 0}),e.class)]);var t=R(i);K(t,()=>e.children??W),O(i),fe(6,i,()=>ar,()=>({duration:100})),fe(5,i,()=>nr,()=>({y:200,duration:250})),C(r,i),Z()}const ge=(r,e=W)=>{var a=A(),o=S(a);{var u=s=>{var i=er();Ge(()=>Qe(i,e())),C(s,i)},l=s=>{var i=A(),t=S(i);K(t,e),C(s,i)};M(o,s=>{typeof e()=="string"?s(u):s(l,!1)})}C(r,a)};var wr=Q('<div class="flex items-center"><!></div>'),Cr=Q('<div class="flex items-center px-3"><div class="flex items-center"><!></div> <div class="ms-1 flex grow justify-between"><div class="flex flex-col p-2"><!> <!></div> <!></div></div> <!>',1);function kr(r,e){U(e,!0);let a=T(e,"color",3,"primary");const o=V(()=>ir({icons:{primary:ue,danger:fr,info:dr,warning:lr,success:or},color:a(),override:e.icon,fallback:ue})),u=ne({base:"h-8 w-8 shrink-0 rounded-xl py-1.75 text-white",variants:{color:{primary:"bg-primary dark:bg-primary-200",secondary:"bg-dark dark:bg-light-300",success:"bg-success dark:bg-success-200",info:"bg-info dark:text-info-50",warning:"bg-warning dark:text-warning-50",danger:"bg-danger dark:text-danger-50"}}}),l=ne({variants:{color:pe.textColor}});var s=Cr(),i=S(s),t=R(i),f=R(t);{var d=v=>{{let b=V(()=>u({color:a()}));sr(v,{get icon(){return _(o)},get class(){return _(b)},size:"18"})}};M(f,v=>{_(o)&&v(d)})}O(t);var m=Y(t,2),g=R(m),h=R(g);{var p=v=>{{let b=V(()=>l({color:a()}));ce(v,{fontWeight:"semi-bold",get class(){return _(b)},children:(x,w)=>{ge(x,()=>e.title)},$$slots:{default:!0}})}};M(h,v=>{e.title&&v(p)})}var k=Y(h,2);{var n=v=>{ce(v,{size:"small",children:(b,x)=>{ge(b,()=>e.description)},$$slots:{default:!0}})};M(k,v=>{e.description&&v(n)})}O(g);var c=Y(g,2);{var E=v=>{var b=wr(),x=R(b);tr(x,{color:"secondary",variant:"ghost",get onclick(){return e.onClose}}),O(b),C(v,b)};M(c,v=>{e.onClose&&v(E)})}O(m),O(i);var I=Y(i,2);K(I,()=>e.children??W),C(r,s),Z()}function xr(r,e){let a=ie(e,["$$slots","$$events","$$legacy","children","title","description","icon","onClose"]);yr(r,G(()=>a,{children:(o,u)=>{var l=A(),s=S(l);{var i=f=>{var d=A(),m=S(d);K(m,()=>e.children),C(f,d)},t=f=>{kr(f,G({get title(){return e.title},get description(){return e.description},get icon(){return e.icon},get onClose(){return e.onClose}},()=>a))};M(s,f=>{e.children?f(i):e.title&&f(t,1)})}C(o,l)},$$slots:{default:!0}}))}const Ce=r=>!!r.component,q=r=>typeof r=="string"?{description:r}:r??{};class Er{#r;#e=Ue(Ze({items:[]}));show(e,a){return this.open(e,a)}custom(e,a){return this.open(e,a)}setOptions(e){Object.assign(_(this.#e),e)}open(e,a){const{timeout:o=3e3,closable:u=!0,id:l=cr()}=a||{},s=e;if(s.id=l,u){const i=()=>this.remove(s);Ce(e)?e.props.onClose=i:e.onClose=i}_(this.#e).items.push(s),this.mount(),o&&setTimeout(()=>this.remove(s),o)}async mount(){this.#r||(this.#r=await je(Dr,{target:document.body,props:_(this.#e)}))}async unmount(){this.#r&&await $e(this.#r)}primary(e,a){this.show({title:B("toast_success_title"),color:"primary",...q(e)},a)}success(e,a){this.show({title:B("toast_success_title"),color:"success",...q(e)},a)}info(e,a){this.show({title:B("toast_info_title"),color:"info",...q(e)},a)}warning(e,a){this.show({title:B("toast_warning_title"),color:"warning",...q(e)},a)}danger(e,a){this.show({title:B("toast_danger_title"),color:"danger",...q(e)},a)}remove(e){_(this.#e).items=_(this.#e).items.filter(a=>a.id!==e.id)}}const Tr=new Er;var Sr=Q("<div></div>");function Dr(r,e){U(e,!0);const a=ie(e,["$$slots","$$events","$$legacy","items","class"]),o=V(()=>e.items.length===0);_r(r,{children:(u,l)=>{var s=Sr();ye(s,i=>({class:i,...a}),[()=>we(_(o)?"hidden":"absolute top-0 right-0 flex flex-col items-end justify-end gap-2 p-4",ur.ToastPanel,e.class)]),gr(s,21,()=>e.items,i=>i.id,(i,t)=>{var f=A(),d=S(f);{var m=p=>{var k=A(),n=S(k);_e(n,()=>_(t).component,(c,E)=>{E(c,G(()=>_(t).props))}),C(p,k)},g=V(()=>Ce(_(t))),h=p=>{xr(p,G(()=>_(t)))};M(d,p=>{_(g)?p(m):p(h,!1)})}C(i,f)}),O(s),C(u,s)}}),Z()}function Ar(r){if(!Ee(r))return;let e=r.data;if(typeof e=="string")try{e=JSON.parse(e)}catch{}return e?.message||r.message}function Ir(r){return r instanceof Error?r:new Error(String(r))}function zr(r,e){const a=Ir(r);if(a.name!=="AbortError"){console.error(`[handleError]: ${a}`,r,a.stack);try{let o=Ar(r);o&&(o=`${String(o).slice(0,75)}
(Immich Server Error)`);const u=o||e;return Tr.danger(u),u}catch(o){return console.error(o),e}}}async function qr(r,e){try{return await r()}catch(a){zr(a,e);return}}export{_r as T,qr as a,yr as b,kr as c,gr as e,Ar as g,zr as h,Lr as i,Tr as t};
