const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["_app/immutable/chunks/BEfn6cqG.js","_app/immutable/chunks/DsnmJJEf.js","_app/immutable/chunks/BufZg4h2.js","_app/immutable/chunks/BOqQhZBJ.js","_app/immutable/chunks/DIeogL5L.js","_app/immutable/chunks/CnteGC4G.js","_app/immutable/chunks/QS5y7wlf.js","_app/immutable/chunks/D4fmOnVC.js","_app/immutable/chunks/DeYUhNiz.js","_app/immutable/chunks/B_VXSWsl.js","_app/immutable/chunks/B227BkWK.js","_app/immutable/chunks/LrV5ZTyj.js","_app/immutable/chunks/C4XZXykC.js","_app/immutable/chunks/BUApaBEI.js","_app/immutable/assets/Logo.BzPWps5k.css","_app/immutable/chunks/4T_x9N89.js","_app/immutable/chunks/CKQ4VlI3.js","_app/immutable/chunks/De1sTUmb.js","_app/immutable/chunks/BNLYq5HQ.js","_app/immutable/chunks/Jagi0WJL.js","_app/immutable/chunks/C2I_EQjW.js","_app/immutable/chunks/DbKlvrsB.js","_app/immutable/chunks/ytu5q_IM.js","_app/immutable/chunks/BeWG-__C.js","_app/immutable/chunks/DdY9CyNE.js","_app/immutable/chunks/Cx5lmlld.js","_app/immutable/chunks/_U16pX41.js","_app/immutable/chunks/Bp2HQ4kn.js","_app/immutable/chunks/CT-ELVN-.js","_app/immutable/chunks/ClWsMFS7.js","_app/immutable/chunks/Bz1BELIr.js","_app/immutable/chunks/eLOR7anR.js","_app/immutable/chunks/Clv0aeC8.js","_app/immutable/chunks/DFvk55M8.js","_app/immutable/chunks/DsCc9Mx1.js","_app/immutable/chunks/CsUlL5WR.js","_app/immutable/chunks/CYAb_6oJ.js","_app/immutable/chunks/CS-10t6W.js","_app/immutable/chunks/BihPMor6.js","_app/immutable/chunks/C20f7eOz.js","_app/immutable/chunks/Ze2c3aZz.js","_app/immutable/chunks/Vqhp0wrh.js","_app/immutable/chunks/BIB7ntQe.js","_app/immutable/chunks/BjCgVxgW.js","_app/immutable/chunks/DnqqNi3p.js","_app/immutable/chunks/D5h9ps2j.js","_app/immutable/chunks/CH9-R8qO.js","_app/immutable/chunks/C9pIfr-B.js","_app/immutable/chunks/BbGcRfD-.js","_app/immutable/chunks/BHgwLGQu.js","_app/immutable/chunks/69_IOA4Y.js","_app/immutable/chunks/CMtyP6CA.js","_app/immutable/chunks/CRYXttfP.js","_app/immutable/chunks/9i_j0jQI.js","_app/immutable/chunks/1WjNB9m1.js","_app/immutable/chunks/Bc5ULZvy.js","_app/immutable/chunks/C0Ca_l_S.js","_app/immutable/chunks/LRhZRw-S.js","_app/immutable/chunks/CBNU4HUx.js","_app/immutable/chunks/DzmAA-7p.js","_app/immutable/chunks/BJT5MMCK.js","_app/immutable/assets/Input.DUYXNfxO.css","_app/immutable/chunks/DHEjuV7w.js","_app/immutable/chunks/rybNiN9i.js","_app/immutable/chunks/CaDSsDA9.js","_app/immutable/chunks/FIvvbHQR.js","_app/immutable/chunks/yWuLE-qO.js","_app/immutable/chunks/izWpGtDw.js","_app/immutable/chunks/ngppk3MK.js","_app/immutable/chunks/BSBkdVh4.js","_app/immutable/chunks/BTHsrYEL.js","_app/immutable/chunks/y_IyUkeW.js","_app/immutable/chunks/Ydc33-3A.js","_app/immutable/chunks/ClLqiWoK.js","_app/immutable/chunks/BmZTbFl5.js","_app/immutable/chunks/BCL4P6ef.js","_app/immutable/chunks/SuizJy8Y.js","_app/immutable/chunks/Di6OVBka.js","_app/immutable/chunks/B6A-PVC5.js","_app/immutable/chunks/BXaFREg4.js","_app/immutable/assets/Textarea.M6eTxvbo.css","_app/immutable/assets/activity-viewer.CwxlvmcY.css","_app/immutable/chunks/B1PyaZbq.js","_app/immutable/assets/thumbnail.Di7rqjOL.css","_app/immutable/chunks/ghntbn61.js","_app/immutable/chunks/6ckOa7Ax.js","_app/immutable/chunks/Bj7pQby1.js","_app/immutable/chunks/Dj0AsE1j.js","_app/immutable/chunks/zKTaOrsI.js","_app/immutable/chunks/DxfhPdFw.js","_app/immutable/chunks/CaTmVaxL.js","_app/immutable/chunks/CsIzZJ43.js","_app/immutable/chunks/8PJ7VpFA.js","_app/immutable/chunks/BzKamodV.js","_app/immutable/chunks/D-O87UL4.js","_app/immutable/chunks/o4H9mija.js","_app/immutable/assets/asset-viewer.CSooJwqO.css"])))=>i.map(i=>d[i]);
import{_ as $e,A as N}from"./BNLYq5HQ.js";import"./DsnmJJEf.js";import{p as et,P as p,g as t,u as c,h as L,$ as S,j as M,f as k,s as ae,a as tt,t as G,c as ne,r as K}from"./BOqQhZBJ.js";import{e as C,s as st}from"./BufZg4h2.js";import{f as H,a as m,c as j}from"./CnteGC4G.js";import{a as ot}from"./yWuLE-qO.js";import{i as D}from"./QS5y7wlf.js";import{e as at,h as nt}from"./D4fmOnVC.js";import{p as d,a as T,s as rt,e as it}from"./B227BkWK.js";import{a as ct}from"./4T_x9N89.js";import{aa as re}from"./LrV5ZTyj.js";import{g as ie}from"./C4XZXykC.js";import{T as lt}from"./B1PyaZbq.js";import{P as dt,m as ce}from"./De1sTUmb.js";import{f as ut}from"./D5h9ps2j.js";import{A as ft,d as ht}from"./CH9-R8qO.js";import{S as mt}from"./AHWy_irw.js";import{R as le}from"./BeWG-__C.js";import{a as de}from"./ngppk3MK.js";import{n as z,h as ue,g as gt,f as vt,a as At,j as wt,s as It}from"./Jagi0WJL.js";import{g as St}from"./DeL_lkPB.js";import{b as _t}from"./C2I_EQjW.js";import{t as J,i as yt}from"./BIB7ntQe.js";import{A as fe}from"./DeYUhNiz.js";import{$ as xt}from"./DdY9CyNE.js";import{d as bt}from"./Bc85SLlq.js";import{s as pt}from"./_U16pX41.js";import{m as he}from"./C20f7eOz.js";var Mt=H('<div class="absolute text-center p-1 text-xs font-mono font-semibold w-full bottom-0 bg-linear-to-t bg-slate-50/75 dark:bg-slate-800/75 overflow-clip text-ellipsis whitespace-pre-wrap"> </div>'),kt=H('<div class="absolute"><!> <!></div>'),Ct=H("<div></div>"),Dt=H("<!> <!>",1);function as(me,s){et(s,!0);const ge=()=>T(It,"$showDeleteModal",_),U=()=>T(pe,"$isViewerOpen",_),ve=()=>T(xt,"$t",_),E=()=>T(Me,"$viewingAsset",_),[_,Ae]=rt();let n=d(s,"assets",15),we=d(s,"disableAssetSelect",3,!1),Ie=d(s,"showArchiveIcon",3,!1),Se=d(s,"onIntersected",3,void 0),_e=d(s,"showAssetName",3,!1),ye=d(s,"onReload",3,void 0),q=d(s,"slidingWindowOffset",3,0),xe=d(s,"pageHeaderOffset",3,0),be=d(s,"arrowNavigation",3,!0),{isViewing:pe,asset:Me}=de;const A=c(()=>s.viewerAssets??n()),u=c(()=>St(n(),{spacing:2,heightTolerance:.5,rowHeight:Math.floor(s.viewport.width)<850?100:235,rowWidth:Math.floor(s.viewport.width)})),ke=e=>{const o=t(u);return`top: ${o.getTop(e)}px; left: ${o.getLeft(e)}px; width: ${o.getWidth(e)}px; height: ${o.getHeight(e)}px;`},Ce=e=>{const o=t(u),a=t(Q),r=o.getTop(e);return r+xe()<a.bottom&&r+o.getHeight(e)>a.top};let g=L(!1),y=L(null),B=L(0),Q=c(()=>{const e=(t(B)||0)-q(),o=e+s.viewport.height+q();return{top:e,bottom:o}});const De=e=>{const o=n().findIndex(a=>a.id===e.id);n(n()[o]=e,!0)},Te=()=>M(B,document.scrollingElement?.scrollTop??0,!0),He=bt(()=>Se()?.(),750,{maxWait:100,leading:!0});let X=0;p(()=>{if(t(u).containerHeight-t(Q).bottom<=s.viewport.height){const e=t(u).containerHeight;X!==e&&(He(),X=e)}});const Ee=()=>{s.assetInteraction.selectAssets(n().map(e=>J(e)))},O=()=>{At(s.assetInteraction)},Oe=e=>{e.key==="Shift"&&(e.preventDefault(),M(g,!0))},Ve=e=>{e.key==="Shift"&&(e.preventDefault(),M(g,!1))},Y=e=>{if(!e)return;const o=s.assetInteraction.hasSelectedAsset(e.id);if(o){for(const a of s.assetInteraction.assetSelectionCandidates)s.assetInteraction.removeAssetFromMultiselectGroup(a.id);s.assetInteraction.removeAssetFromMultiselectGroup(e.id)}else{for(const a of s.assetInteraction.assetSelectionCandidates)s.assetInteraction.selectAsset(a);s.assetInteraction.selectAsset(e)}s.assetInteraction.clearAssetSelectionCandidates(),s.assetInteraction.setAssetSelectionStart(o?null:e)},Re=e=>{e&&Z(e),M(y,e,!0)},Z=e=>{if(!t(g))return;const o=s.assetInteraction.assetSelectionStart;if(!o)return;let a=n().findIndex(i=>i.id===o.id),r=n().findIndex(i=>i.id===e.id);a>r&&([a,r]=[r,a]),s.assetInteraction.setAssetSelectionCandidates(n().slice(a,r+1).map(i=>J(i)))},We=e=>{s.assetInteraction.selectionActive&&t(g)&&e.preventDefault()},Pe=()=>{const e=s.assetInteraction.selectedAssets.some(o=>o.isTrashed);ue($(e))},$=async(e=!1)=>{const o=e||!ut.value.trash,a=s.assetInteraction.selectedAssets;ge()&&o&&!await he.show(ft,{size:a.length})||(await ht(o,r=>n(n().filter(i=>!r.includes(i.id))),a,ye()),s.assetInteraction.clearMultiselect())},Fe=async()=>{const e=await wt(s.assetInteraction.selectedAssets,s.assetInteraction.isAllArchived?fe.Timeline:fe.Archive);e&&(n(n().filter(o=>!e.includes(o.id))),O())},Ne=()=>ce(e=>e.dataset.thumbnailFocusContainer!==void 0,"next"),Le=()=>ce(e=>e.dataset.thumbnailFocusContainer!==void 0,"previous");let V=!1;const Ge=async()=>{V||(V=!0,await he.show(mt,{}),V=!1)},Ke=c(()=>(()=>{if(U())return[];const e=[{shortcut:{key:"?",shift:!0},onShortcut:Ge},{shortcut:{key:"/"},onShortcut:()=>ie(le.explore())},{shortcut:{key:"A",ctrl:!0},onShortcut:()=>Ee()},...be()?[{shortcut:{key:"ArrowRight"},preventDefault:!1,onShortcut:Ne},{shortcut:{key:"ArrowLeft"},preventDefault:!1,onShortcut:Le}]:[]];return s.assetInteraction.selectionActive&&e.push({shortcut:{key:"Escape"},onShortcut:O},{shortcut:{key:"Delete"},onShortcut:Pe},{shortcut:{key:"Delete",shift:!0},onShortcut:()=>$(!0)},{shortcut:{key:"D",ctrl:!0},onShortcut:()=>O()},{shortcut:{key:"a",shift:!0},onShortcut:Fe}),e})()),je=async()=>{if(t(A).length!==0)try{const e=Math.floor(Math.random()*t(A).length),o=t(A)[e];return await z(o),o}catch(e){nt(e,ve()("errors.cannot_navigate_next_asset"));return}},ze=async e=>{switch(e.type){case N.ARCHIVE:case N.DELETE:case N.TRASH:{const o=t(R).nextAsset??t(R).previousAsset;if(n().splice(n().findIndex(a=>a.id===e.asset.id),1),n().length===0)return await ie(le.photos());o&&await z(o);break}}},Je=e=>{s.assetInteraction.selectionActive&&Re(e)};p(()=>{t(y)||s.assetInteraction.clearAssetSelectionCandidates()}),p(()=>{t(g)||s.assetInteraction.clearAssetSelectionCandidates()}),p(()=>{t(g)&&t(y)&&Z(t(y))});const R=c(()=>({current:E(),nextAsset:vt(t(A),E()),previousAsset:gt(t(A),E())}));var ee=Dt();C("keydown",S,Oe),C("keyup",S,Ve),C("selectstart",S,We),ct(S,(e,o)=>pt?.(e,o),()=>t(Ke)),C("scroll",S,()=>Te());var te=k(ee);{var Ue=e=>{var o=Ct();let a;at(o,23,n,(r,i)=>r.id+"-"+i,(r,i,f)=>{var x=j(),W=k(x);{var P=w=>{const l=c(()=>J(t(i)));var v=kt();let se;var oe=ne(v);{let h=c(()=>s.assetInteraction.hasSelectedAsset(t(l).id)),I=c(()=>s.assetInteraction.hasSelectionCandidate(t(l).id)),F=c(()=>t(u).getWidth(t(f))),Ze=c(()=>t(u).getHeight(t(f)));lt(oe,{get readonly(){return we()},onClick:()=>{if(s.assetInteraction.selectionActive){Y(t(l));return}z(t(i))},onSelect:()=>Y(t(l)),onMouseEvent:()=>Je(t(l)),get showArchiveIcon(){return Ie()},get asset(){return t(l)},get selected(){return t(h)},get selectionCandidate(){return t(I)},get thumbnailWidth(){return t(F)},get thumbnailHeight(){return t(Ze)}})}var Qe=ae(oe,2);{var Xe=h=>{var I=Mt(),F=ne(I,!0);K(I),G(()=>st(F,t(i).originalFileName)),m(h,I)},Ye=c(()=>_e()&&!yt(t(i)));D(Qe,h=>{t(Ye)&&h(Xe)})}K(v),G(h=>se=re(v,h,se,{overflow:"clip"}),[()=>ke(t(f))]),m(w,v)},b=c(()=>Ce(t(f)));D(W,w=>{t(b)&&w(P)})}m(r,x)}),K(o),G(()=>a=re(o,"",a,{position:"relative",height:t(u).containerHeight+"px",width:t(u).containerWidth+"px"})),m(e,o)};D(te,e=>{n().length>0&&e(Ue)})}var qe=ae(te,2);{var Be=e=>{dt(e,{target:"body",children:(o,a)=>{var r=j(),i=k(r);ot(i,()=>$e(()=>import("./BEfn6cqG.js").then(f=>f.a),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96])),null,(f,x)=>{var W=c(()=>{var{default:l}=t(x);return{AssetViewer:l}}),P=c(()=>t(W).AssetViewer),b=j(),w=k(b);it(w,()=>t(P),(l,v)=>{v(l,{get cursor(){return t(R)},onAction:ze,onRandom:je,onAssetChange:De,onClose:()=>{de.showAssetViewer(!1),ue(_t({targetRoute:"current",assetId:null}))}})}),m(f,b)}),m(o,r)},$$slots:{default:!0}})};D(qe,e=>{U()&&e(Be)})}m(me,ee),tt(),Ae()}export{as as G};
