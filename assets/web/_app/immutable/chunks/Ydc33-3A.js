import"./DsnmJJEf.js";import{p as tt,h as m,i as et,P as nt,g as t,a7 as ot,$ as rt,c as b,r as C,s as it,a as at,j as u,f as st,b as ct,u as M}from"./BOqQhZBJ.js";import{e as w}from"./BufZg4h2.js";import{f as O,a as x,c as ut,s as lt}from"./CnteGC4G.js";import{i as dt}from"./QS5y7wlf.js";import{a as E}from"./4T_x9N89.js";import{h as ft,I as gt}from"./LrV5ZTyj.js";import{p as a,d as y,c as mt,s as vt,a as ht,r as pt}from"./B227BkWK.js";import{g as _t,C as bt,l as Ct,a as xt,c as yt}from"./ClLqiWoK.js";import{o as kt,s as k}from"./ClWsMFS7.js";import{g as It}from"./Bz1BELIr.js";import{s as zt}from"./_U16pX41.js";var Bt=O("<div><!></div>"),Pt=O("<div><div><!></div> <!></div>");function Nt(R,n){tt(n,!0);const I=()=>ht(k,"$selectedIdStore",A),[A,F]=vt();let s=a(n,"align",3,"top-left"),T=a(n,"direction",3,"right"),j=a(n,"color",3,"secondary"),q=a(n,"size",3,void 0),L=a(n,"variant",3,"ghost"),N=a(n,"buttonClass",3,void 0),V=a(n,"hideContent",3,!1),G=pt(n,["$$slots","$$events","$$legacy","icon","title","align","direction","color","size","variant","buttonClass","hideContent","children","offset"]),o=m(!1),d=m(et({x:0,y:0})),f=m(void 0),c=m(void 0);const z=It(),v=`context-menu-button-${z}`,B=`context-menu-${z}`,P=e=>{let r=s();Ct.rtl&&(s().includes("left")?r=s().replace("left","right"):s().includes("right")&&(r=s().replace("right","left"))),u(d,xt(e,r),!0),u(o,!0),t(f)?.focus()},H=e=>{if(t(o)){i();return}P(e)},J=e=>{t(o)&&e.stopPropagation(),i()},S=()=>{!t(o)||!t(c)||u(d,_t(t(c).getBoundingClientRect(),s()),!0)},i=()=>{t(o)&&(U(),u(o,!1),y(k,void 0))},K=()=>{i()},Q=e=>{if(!t(o))return;const r=e.target;t(c)?.contains(r)||i()},U=()=>{t(c)?.querySelector(`#${v}`)?.focus()};nt(()=>{t(o)&&y(kt,K)});var l=Pt();w("resize",ot,S),w("click",rt,Q),ft(l,()=>({onresize:S,...G}));var g=b(l),W=b(g);gt(W,{get color(){return j()},get icon(){return n.icon},get size(){return q()},shape:"round",get variant(){return L()},get"aria-label"(){return n.title},get"aria-controls"(){return B},get"aria-expanded"(){return t(o)},"aria-haspopup":!0,get class(){return N()},get id(){return v},onclick:H}),C(g),mt(g,e=>u(c,e),()=>t(c));var X=it(g,2);{var Y=e=>{var r=Bt(),Z=b(r);{let h=M(()=>t(d).x-(n.offset?.x??0)),p=M(()=>t(d).y+(n.offset?.y??0));bt(Z,{get direction(){return T()},get ariaActiveDescendant(){return I()},get ariaLabelledBy(){return v},get id(){return B},get isVisible(){return t(o)},get x(){return t(h)},get y(){return t(p)},get menuElement(){return t(f)},set menuElement(_){u(f,_,!0)},children:(_,St)=>{var D=ut(),$=st(D);lt($,()=>n.children??ct),x(_,D)},$$slots:{default:!0}})}C(r),E(r,(h,p)=>zt?.(h,p),()=>[{shortcut:{key:"Tab"},onShortcut:i,preventDefault:!1},{shortcut:{key:"Tab",shift:!0},onShortcut:i,preventDefault:!1}]),x(e,r)};dt(X,e=>{(t(o)||!V())&&e(Y)})}C(l),E(l,(e,r)=>yt?.(e,r),()=>({closeDropdown:i,container:t(f),isOpen:t(o),onEscape:J,openDropdown:P,selectedId:I(),selectionChanged:e=>y(k,e)})),x(R,l),at(),F()}export{Nt as B};
