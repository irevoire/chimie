import"./DsnmJJEf.js";import{s as L,d as At,a as ne}from"./BufZg4h2.js";import{p as ut,c as i,s as x,r as o,t as W,a as dt,g as e,u as B,f as X,n as se,Q as xt,h as it,i as gt,P as Kt,j as st,b as qt,W as le}from"./BOqQhZBJ.js";import{f as D,a as s,c as nt,t as wt,s as Wt}from"./CnteGC4G.js";import{i as Y}from"./QS5y7wlf.js";import{e as yt,i as ie}from"./D4fmOnVC.js";import{p as F,s as mt,a as K,f as Mt,d as Pt,b as ue}from"./B227BkWK.js";import{s as St,I as de,af as me,a as Bt,bD as Xt,d4 as ce,G as Ht,bB as Jt,u as ve,as as Zt,d6 as be,az as $t,a4 as fe,a1 as ge}from"./LrV5ZTyj.js";import{A as te}from"./BUBQrRQ7.js";import{u as Nt,c as Et}from"./Cx5lmlld.js";import{a as he,C as _e,c as xe}from"./ClLqiWoK.js";import{c as we}from"./De1sTUmb.js";import{$ as ht}from"./DdY9CyNE.js";import{R as ee}from"./BeWG-__C.js";import{y as pt,S as kt,A as bt,l as ae,x as ft,z as Ft,K as Vt}from"./Jagi0WJL.js";import{j as re,t as oe,s as ye,k as pe,i as ke,h as Ce}from"./DsCc9Mx1.js";import{f as Se}from"./DtjhqBtS.js";import{g as Ae}from"./C4XZXykC.js";import{c as Oe}from"./BNLYq5HQ.js";import{O as De}from"./Di6OVBka.js";import{s as zt,o as Me,M as Ot}from"./ClWsMFS7.js";import{a as Tt}from"./4T_x9N89.js";import{g as Ie}from"./Bz1BELIr.js";import{s as Be}from"./_U16pX41.js";import{d as Ne,a as Yt,h as Re,A as Pe}from"./BTiqhowq.js";import{F as Ee}from"./C0Ca_l_S.js";import{F as Gt}from"./DzmAA-7p.js";import{I as Fe}from"./BJT5MMCK.js";import{T as Ve}from"./BXaFREg4.js";import{n as It}from"./CS-10t6W.js";import{g as jt}from"./DPZFRR6n.js";import{m as Ut}from"./C20f7eOz.js";var ze=D('<div class="absolute end-6 top-6 opacity-0 group-hover:opacity-100 focus-within:opacity-100" data-testid="context-button-parent"><!></div>'),Te=D('<p class="flex text-sm dark:text-immich-dark-fg capitalize"> </p>'),Ye=D("<p> </p>"),Ge=D("<p>•</p>"),je=D("<p> </p>"),Ue=D("<p> </p>"),Le=D("<p> </p>"),Qe=D("<p> </p>"),Ke=D('<div class="group relative rounded-2xl border border-transparent p-5 hover:bg-gray-100 hover:border-gray-200 dark:hover:border-gray-800 dark:hover:bg-gray-900" data-testid="album-card"><!> <!> <div class="mt-4"><p class="w-full leading-6 text-lg line-clamp-2 font-semibold text-black dark:text-white group-hover:text-primary" data-testid="album-name"> </p> <!> <span class="flex gap-2 text-sm dark:text-immich-dark-fg" data-testid="album-details"><!> <!> <!></span></div></div>');function qe(q,t){ut(t,!0);const n=()=>K(ht,"$t",V),N=()=>K(Nt,"$user",V),[V,z]=mt();let R=F(t,"showOwner",3,!1),C=F(t,"showDateRange",3,!1),b=F(t,"showItemCount",3,!1),P=F(t,"preload",3,!1),S=F(t,"onShowContextMenu",3,void 0);const y=l=>{l.stopPropagation(),l.preventDefault(),S()?.(he(l))};var G=Ke(),f=i(G);{var w=l=>{var a=ze(),c=i(a);{let I=B(()=>n()("show_album_options"));de(c,{color:"secondary",get"aria-label"(){return e(I)},get icon(){return me},shape:"round",variant:"filled",size:"medium",class:"icon-white-drop-shadow",onclick:y})}o(a),W(()=>St(a,"id",`icon-${t.album.id??""}`)),s(l,a)};Y(f,l=>{S()&&l(w)})}var g=x(f,2);te(g,{get album(){return t.album},get preload(){return P()},class:"transition-all duration-300 hover:shadow-lg"});var p=x(g,2),_=i(p),h=i(_,!0);o(_);var v=x(_,2);{var A=l=>{var a=Te(),c=i(a,!0);o(a),W(I=>L(c,I),[()=>we(t.album.startDate,t.album.endDate)]),s(l,a)};Y(v,l=>{C()&&t.album.startDate&&t.album.endDate&&l(A)})}var u=x(v,2),m=i(u);{var M=l=>{var a=Ye(),c=i(a,!0);o(a),W(I=>L(c,I),[()=>n()("items_count",{values:{count:t.album.assetCount}})]),s(l,a)};Y(m,l=>{b()&&l(M)})}var O=x(m,2);{var E=l=>{var a=Ge();s(l,a)};Y(O,l=>{(R()||t.album.shared)&&b()&&l(E)})}var j=x(O,2);{var k=l=>{var a=nt(),c=X(a);{var I=$=>{var H=je(),ct=i(H,!0);o(H),W(r=>L(ct,r),[()=>n()("owned")]),s($,H)},lt=$=>{var H=Ue(),ct=i(H,!0);o(H),W(r=>L(ct,r),[()=>n()("shared_by_user",{values:{user:t.album.owner.name}})]),s($,H)},_t=$=>{var H=Le(),ct=i(H,!0);o(H),W(r=>L(ct,r),[()=>n()("shared")]),s($,H)};Y(c,$=>{N().id===t.album.ownerId?$(I):t.album.owner?$(lt,1):$(_t,!1)})}s(l,a)},T=l=>{var a=Qe(),c=i(a,!0);o(a),W(I=>L(c,I),[()=>n()("shared")]),s(l,a)};Y(j,l=>{R()?l(k):t.album.shared&&l(T,1)})}o(u),o(p),o(G),W(()=>{St(_,"title",t.album.albumName),L(h,t.album.albumName)}),s(q,G),dt(),z()}var We=D('<div class="grid"><button type="button" class="w-full text-start mt-2 pt-2 pe-2 pb-2 rounded-md transition-colors cursor-pointer dark:text-immich-dark-fg hover:text-primary hover:bg-subtle dark:hover:bg-immich-dark-gray"><!> <span class="font-bold text-3xl text-black dark:text-white"> </span> <span class="ms-1.5"> </span></button> <hr class="dark:border-immich-dark-gray"/></div>'),Xe=D("<a><!></a>"),He=D('<div class="grid grid-auto-fill-56 gap-y-4"></div>'),Je=D('<!> <div class="mt-4"><!></div>',1);function Lt(q,t){ut(t,!0);const n=()=>K(pt,"$albumViewSettings",V),N=()=>K(ht,"$t",V),[V,z]=mt();let R=F(t,"group",3,void 0),C=F(t,"showOwner",3,!1),b=F(t,"showDateRange",3,!1),P=F(t,"showItemCount",3,!1),S=F(t,"onShowContextMenu",3,void 0),y=B(()=>!!R()&&re(n(),R().id));const G=(u,m)=>{S()?.(u,m)};let f=B(()=>e(y)?"rotate-0":"rotate-90");const w=(u,m)=>{u.preventDefault(),G({x:u.x,y:u.y},m)};var g=Je(),p=X(g);{var _=u=>{var m=We(),M=i(m);M.__click=()=>oe(R().id);var O=i(M);Bt(O,{get icon(){return Xt},size:"24",get class(){return`inline-block -mt-2.5 transition-all duration-250 ${e(f)??""}`}});var E=x(O,2),j=i(E,!0);o(E);var k=x(E,2),T=i(k);o(k),o(M),se(2),o(m),W(l=>{St(M,"aria-expanded",!e(y)),L(j,R().name),L(T,`(${l??""})`)},[()=>N()("albums_count",{values:{count:t.albums.length}})]),s(u,m)};Y(p,u=>{R()&&u(_)})}var h=x(p,2),v=i(h);{var A=u=>{var m=He();yt(m,31,()=>t.albums,M=>M.id,(M,O,E)=>{var j=Xe();j.__contextmenu=T=>w(T,e(O));var k=i(j);{let T=B(()=>e(E)<20),l=B(()=>S()?a=>G(a,e(O)):void 0);qe(k,{get album(){return e(O)},get showOwner(){return C()},get showDateRange(){return b()},get showItemCount(){return P()},get preload(){return e(T)},get onShowContextMenu(){return e(l)}})}o(j),W(T=>St(j,"href",T),[()=>ee.viewAlbum(e(O))]),ce(j,()=>Se,()=>({duration:400})),s(M,j)}),o(m),Ht(3,m,()=>Jt,()=>({duration:300})),s(u,m)};Y(v,u=>{e(y)||u(A)})}o(h),s(q,g),dt(),z()}At(["click","contextmenu"]);var Ze=D('<th><button type="button" class="rounded-lg p-2 hover:bg-immich-dark-primary hover:dark:bg-immich-dark-primary/50"><!> </button></th>');function $e(q,t){ut(t,!0);const n=()=>K(pt,"$albumViewSettings",V),N=()=>K(ht,"$t",V),[V,z]=mt(),R=()=>{n().sortBy===t.option.id?Mt(pt,xt(n).sortOrder=n().sortOrder===kt.Asc?kt.Desc:kt.Asc,xt(n)):(Mt(pt,xt(n).sortBy=t.option.id,xt(n)),Mt(pt,xt(n).sortOrder=t.option.defaultOrder,xt(n)))};let C=B(()=>({[bt.Title]:N()("sort_title"),[bt.ItemCount]:N()("sort_items"),[bt.DateModified]:N()("sort_modified"),[bt.DateCreated]:N()("sort_created"),[bt.MostRecentPhoto]:N()("sort_recent"),[bt.OldestPhoto]:N()("sort_oldest")}));var b=Ze(),P=i(b);P.__click=R;var S=i(P);{var y=f=>{var w=nt(),g=X(w);{var p=h=>{var v=wt("↓");s(h,v)},_=h=>{var v=wt("↑");s(h,v)};Y(g,h=>{n().sortOrder===kt.Desc?h(p):h(_,!1)})}s(f,w)};Y(S,f=>{n().sortBy===t.option.id&&f(y)})}var G=x(S);o(P),o(b),W(()=>{ve(b,1,`text-sm font-medium ${t.option.columnStyle??""}`),L(G,` ${e(C)[t.option.id]??""}`)}),s(q,b),dt(),z()}At(["click"]);var ta=D('<tr class="flex w-full place-items-center border-3 border-transparent p-2 text-center even:bg-subtle/20 odd:bg-subtle/80 hover:cursor-pointer hover:border-immich-primary/75 odd:dark:bg-immich-dark-gray/75 even:dark:bg-immich-dark-gray/50 dark:hover:border-immich-dark-primary/75 md:px-5 md:py-2"><td class="text-md text-ellipsis text-start w-8/12 sm:w-4/12 md:w-4/12 xl:w-[30%] 2xl:w-[40%] items-center"> <!></td><td class="text-md text-ellipsis text-center sm:w-2/12 md:w-2/12 xl:w-[15%] 2xl:w-[12%]"> </td><td class="text-md hidden text-ellipsis text-center sm:block w-3/12 xl:w-[15%] 2xl:w-[12%]"> </td><td class="text-md hidden text-ellipsis text-center sm:block w-3/12 xl:w-[15%] 2xl:w-[12%]"> </td><td class="text-md text-ellipsis text-center hidden xl:block xl:w-[15%] 2xl:w-[12%]"><!></td><td class="text-md text-ellipsis text-center hidden xl:block xl:w-[15%] 2xl:w-[12%]"><!></td></tr>');function Qt(q,t){ut(t,!0);const n=()=>K(ae,"$locale",z),N=()=>K(Nt,"$user",z),V=()=>K(ht,"$t",z),[z,R]=mt();let C=F(t,"onShowContextMenu",3,void 0);const b=a=>{C()?.(a,t.album)},P=a=>new Date(a).toLocaleDateString(n(),Oe.album),S=a=>{a.preventDefault(),b({x:a.x,y:a.y})};var y=ta();y.__click=()=>Ae(ee.viewAlbum(t.album)),y.__contextmenu=S;var G=i(y),f=i(G),w=x(f);{var g=a=>{{let c=B(()=>t.album.ownerId===N().id?V()("shared_by_you"):V()("shared_by_user",{values:{user:t.album.owner.name}}));Bt(a,{get icon(){return Zt},size:"16",class:"inline ms-1 opacity-70",get title(){return e(c)}})}};Y(w,a=>{t.album.shared&&a(g)})}o(G);var p=x(G),_=i(p,!0);o(p);var h=x(p),v=i(h,!0);o(h);var A=x(h),u=i(A,!0);o(A);var m=x(A),M=i(m);{var O=a=>{var c=wt();W(I=>L(c,I),[()=>P(t.album.endDate)]),s(a,c)},E=a=>{var c=wt("-");s(a,c)};Y(M,a=>{t.album.endDate?a(O):a(E,!1)})}o(m);var j=x(m),k=i(j);{var T=a=>{var c=wt();W(I=>L(c,I),[()=>P(t.album.startDate)]),s(a,c)},l=a=>{var c=wt("-");s(a,c)};Y(k,a=>{t.album.startDate?a(T):a(l,!1)})}o(j),o(y),W((a,c,I)=>{L(f,`${t.album.albumName??""} `),L(_,a),L(v,c),L(u,I)},[()=>V()("items_count",{values:{count:t.album.assetCount}}),()=>P(t.album.updatedAt),()=>P(t.album.createdAt)]),s(q,y),dt(),R()}At(["click","contextmenu"]);var ea=D('<tbody class="block w-full overflow-y-auto rounded-md border dark:border-immich-dark-gray dark:text-immich-dark-fg"></tbody>'),aa=D('<tbody class="block w-full overflow-y-auto rounded-md border dark:border-immich-dark-gray dark:text-immich-dark-fg mt-4"></tbody>'),ra=D('<tbody class="block w-full overflow-y-auto rounded-md border dark:border-immich-dark-gray dark:text-immich-dark-fg mt-4"><tr class="flex w-full place-items-center p-2 md:ps-5 md:pe-5 md:pt-3 md:pb-3"><td class="text-md text-start -mb-1"><!> <span class="font-bold text-2xl"> </span> <span class="ms-1.5"> </span></td></tr></tbody> <!>',1),oa=D('<table class="mt-2 w-full text-start"><thead class="mb-4 flex h-12 w-full rounded-md border bg-gray-50 text-primary dark:border-immich-dark-gray dark:bg-immich-dark-gray"><tr class="flex w-full place-items-center p-2 md:p-5"></tr></thead><!></table>');function na(q,t){ut(t,!0);const n=()=>K(pt,"$albumViewSettings",V),N=()=>K(ht,"$t",V),[V,z]=mt();let R=F(t,"albumGroupOption",19,()=>ft.None);var C=oa(),b=i(C),P=i(b);yt(P,21,()=>ye,ie,(f,w)=>{$e(f,{get option(){return e(w)}})}),o(P),o(b);var S=x(b);{var y=f=>{var w=ea();yt(w,21,()=>t.groupedAlbums[0].albums,g=>g.id,(g,p)=>{Qt(g,{get album(){return e(p)},get onShowContextMenu(){return t.onShowContextMenu}})}),o(w),s(f,w)},G=f=>{var w=nt(),g=X(w);yt(g,17,()=>t.groupedAlbums,p=>p.id,(p,_)=>{const h=B(()=>re(n(),e(_).id)),v=B(()=>e(h)?"rotate-0":"rotate-90");var A=ra(),u=X(A),m=i(u);m.__click=()=>oe(e(_).id);var M=i(m),O=i(M);Bt(O,{get icon(){return Xt},size:"20",get class(){return`inline-block -mt-2 transition-all duration-250 ${e(v)??""}`}});var E=x(O,2),j=i(E,!0);o(E);var k=x(E,2),T=i(k);o(k),o(M),o(m),o(u);var l=x(u,2);{var a=c=>{var I=aa();yt(I,21,()=>e(_).albums,lt=>lt.id,(lt,_t)=>{Qt(lt,{get album(){return e(_t)},get onShowContextMenu(){return t.onShowContextMenu}})}),o(I),Ht(3,I,()=>Jt,()=>({duration:300})),s(c,I)};Y(l,c=>{e(h)||c(a)})}W(c=>{St(m,"aria-expanded",!e(h)),L(j,e(_).name),L(T,`(${c??""})`)},[()=>N()("albums_count",{values:{count:e(_).albums.length}})]),s(p,A)}),s(f,w)};Y(S,f=>{R()===ft.None?f(y):f(G,!1)})}o(C),s(q,C),dt(),z()}At(["click"]);var sa=D('<div><section class="fixed start-0 top-0 flex h-dvh w-dvw" role="presentation"><!></section></div>');function la(q,t){ut(t,!0);const n=()=>K(zt,"$selectedIdStore",N),[N,V]=mt();let z=F(t,"direction",3,"right"),R=F(t,"x",3,0),C=F(t,"y",3,0),b=F(t,"isOpen",3,!1),P=it(gt({})),S=it(void 0),y=it(void 0);const f=`context-menu-${Ie()}`,w=async v=>{const A=new MouseEvent("contextmenu",{bubbles:!0,cancelable:!0,view:window,clientX:v.x,clientY:v.y}),u=document.elementsFromPoint(v.x,v.y);if(e(S)&&u.includes(e(S)))return;g(),await le(),st(P,{},!0);const m=u.indexOf(v.target);u.at(m+1)?.dispatchEvent(A)},g=()=>{e(y)?.focus(),t.onClose?.()};Kt(()=>{b()&&e(S)&&(st(y,document.activeElement,!0),e(S).focus(),Pt(Me,g))});const p=async v=>{v.preventDefault(),await w(v)};var _=nt(),h=X(_);be(h,()=>e(P),v=>{var A=nt(),u=X(A);{var m=M=>{var O=sa(),E=i(O);E.__contextmenu=p;var j=i(E);_e(j,{get direction(){return z()},get x(){return R()},get y(){return C()},get ariaActiveDescendant(){return n()},get ariaLabel(){return t.title},get id(){return f},isVisible:!0,onClose:g,get menuElement(){return e(S)},set menuElement(k){st(S,k,!0)},children:(k,T)=>{var l=nt(),a=X(l);Wt(a,()=>t.children??qt),s(k,l)},$$slots:{default:!0}}),o(E),o(O),Tt(O,(k,T)=>xe?.(k,T),()=>({closeDropdown:g,container:e(S),isOpen:b(),selectedId:n(),selectionChanged:k=>Pt(zt,k)})),Tt(O,(k,T)=>Be?.(k,T),()=>[{shortcut:{key:"Tab"},onShortcut:g},{shortcut:{key:"Tab",shift:!0},onShortcut:g}]),s(M,O)};Y(u,M=>{b()&&M(m)})}s(v,A)}),s(q,_),dt(),V()}At(["contextmenu"]);var ia=D('<div class="flex items-center gap-8 m-4"><!> <div class="grow flex flex-col gap-4"><!> <!></div></div>');function ua(q,t){ut(t,!0);const n=()=>K(ht,"$t",N),[N,V]=mt();let z=it(gt(t.album.albumName)),R=it(gt(t.album.description));const C=async()=>{await Ne(t.album,{albumName:e(z),description:e(R)})&&t.onClose()};{let b=B(()=>n()("edit_album"));Ee(q,{get icon(){return $t},get title(){return e(b)},size:"medium",get onClose(){return t.onClose},onSubmit:C,children:(P,S)=>{var y=ia(),G=i(y);te(G,{get album(){return t.album},class:"h-50 w-50 shadow-lg hidden sm:flex"});var f=x(G,2),w=i(f);{let p=B(()=>n()("name"));Gt(w,{get label(){return e(p)},children:(_,h)=>{Fe(_,{get value(){return e(z)},set value(v){st(z,v,!0)}})},$$slots:{default:!0}})}var g=x(w,2);{let p=B(()=>n()("description"));Gt(g,{get label(){return e(p)},children:(_,h)=>{Ve(_,{get value(){return e(R)},set value(v){st(R,v,!0)}})},$$slots:{default:!0}})}o(f),o(y),s(P,y)},$$slots:{default:!0}})}dt(),V()}var da=D("<!> <!>",1),ma=D("<!> <!> <!>",1),ca=D("<!> <!> <!>",1);function Qa(q,t){ut(t,!0);const n=()=>K(ht,"$t",z),N=()=>K(Nt,"$user",z),V=()=>K(ae,"$locale",z),[z,R]=mt();let C=F(t,"ownedAlbums",31,()=>gt([])),b=F(t,"sharedAlbums",31,()=>gt([])),P=F(t,"searchQuery",3,""),S=F(t,"allowEdit",3,!1),y=F(t,"showOwner",3,!1),G=F(t,"albumGroupIds",31,()=>gt([]));const f={[ft.None]:(r,d)=>[{id:n()("albums"),name:n()("albums"),albums:d}],[ft.Year]:(r,d)=>{const U=n()("unknown_year"),rt=t.userSettings.sortBy===bt.OldestPhoto,ot=jt(d,Q=>{const J=rt?Q.startDate:Q.endDate;return J?new Date(J).getFullYear():U}),tt=r===kt.Desc?-1:1;return Object.entries(ot).sort(([Q],[J])=>Q===U?1:J===U?-1:(Number.parseInt(Q)-Number.parseInt(J))*tt).map(([Q,J])=>({id:Q,name:Q,albums:J}))},[ft.Owner]:(r,d)=>{const U=N().id,rt=jt(d,"ownerId"),ot=r===kt.Desc?-1:1;return Object.entries(rt).sort(([et,Q],[J,Z])=>et===U?-ot:J===U?ot:Q[0].owner.name.localeCompare(Z[0].owner.name,V())*ot).map(([et,Q])=>({id:et,name:et===U?n()("my_albums"):Q[0].owner.name,albums:Q}))}};let w=B(()=>{switch(t.userSettings.filter){case Ft.Owned:return C();case Ft.Shared:return b();default:{const r=b().filter(d=>d.ownerId!==N().id);return r.length>0?C().concat(r):C()}}});const g=B(()=>It(P()));let p=B(()=>e(g)?e(w).filter(({albumName:r,description:d})=>It(r).includes(e(g))||It(d).includes(e(g))):e(w)),_=B(()=>Ce(t.userSettings)),h=B(()=>(f[e(_)]??f[ft.None])(pe(t.userSettings.groupOrder),e(p)).map(U=>({id:U.id,name:U.name,albums:ke(U.albums,{sortBy:t.userSettings.sortBy,orderBy:t.userSettings.sortOrder})}))),v=it(gt({x:0,y:0})),A=it(void 0),u=it(!1);Kt(()=>{G(e(h).map(({id:r})=>r))});let m=B(()=>S()&&e(A)&&e(A).ownerId===N().id);ne(async()=>{S()&&await j()});const M=(r,d)=>{st(A,d,!0),st(v,{x:r.x,y:r.y},!0),st(u,!0)},O=()=>{st(u,!1)},E=async r=>{if(O(),!!e(A))switch(r){case"edit":{await Ut.show(ua,{album:e(A)});break}case"share":{await Ut.show(Pe,{album:e(A)});break}case"download":{await Re(e(A));break}case"delete":{await Yt(e(A));break}}},j=async()=>{const r=C().filter(d=>d.assetCount===0&&!d.albumName);await Promise.allSettled(r.map(d=>Yt(d,{prompt:!1,notify:!1})))},k=(r,d)=>{const U=r.find(({id:rt})=>rt===d.id);return U&&Object.assign(U,d),r},T=r=>{C(k(C(),r)),b(k(b(),r))},l=r=>{T(r),Et.recentAlbums=k(Et.recentAlbums||[],r)},a=r=>{C(C().filter(({id:d})=>d!==r.id)),b(b().filter(({id:d})=>d!==r.id))},c=r=>{r.album&&T(r.album)};var I=ca(),lt=X(I);De(lt,{onAlbumUpdate:l,onAlbumDelete:a,onSharedLinkCreate:c});var _t=x(lt,2);{var $=r=>{var d=nt(),U=X(d);{var rt=tt=>{var et=nt(),Q=X(et);{var J=at=>{Lt(at,{get albums(){return e(h)[0].albums},get showOwner(){return y()},showDateRange:!0,showItemCount:!0,onShowContextMenu:M})},Z=at=>{var Ct=nt(),Dt=X(Ct);yt(Dt,17,()=>e(h),vt=>vt.id,(vt,Rt)=>{Lt(vt,{get albums(){return e(Rt).albums},get group(){return e(Rt)},get showOwner(){return y()},showDateRange:!0,showItemCount:!0,onShowContextMenu:M})}),s(at,Ct)};Y(Q,at=>{e(_)===ft.None?at(J):at(Z,!1)})}s(tt,et)},ot=tt=>{na(tt,{get groupedAlbums(){return e(h)},get albumGroupOption(){return e(_)},onShowContextMenu:M})};Y(U,tt=>{t.userSettings.view===Vt.Cover?tt(rt):t.userSettings.view===Vt.List&&tt(ot,1)})}s(r,d)},H=r=>{var d=nt(),U=X(d);Wt(U,()=>t.empty??qt),s(r,d)};Y(_t,r=>{e(w).length>0?r($):r(H,!1)})}var ct=x(_t,2);{let r=B(()=>n()("album_options"));la(ct,ue({get title(){return e(r)}},()=>e(v),{get isOpen(){return e(u)},onClose:O,children:(d,U)=>{var rt=ma(),ot=X(rt);{var tt=Z=>{var at=da(),Ct=X(at);{let vt=B(()=>n()("edit_album"));Ot(Ct,{get icon(){return $t},get text(){return e(vt)},onClick:()=>E("edit")})}var Dt=x(Ct,2);{let vt=B(()=>n()("share"));Ot(Dt,{get icon(){return Zt},get text(){return e(vt)},onClick:()=>E("share")})}s(Z,at)};Y(ot,Z=>{e(m)&&Z(tt)})}var et=x(ot,2);{let Z=B(()=>n()("download"));Ot(et,{get icon(){return fe},get text(){return e(Z)},onClick:()=>E("download")})}var Q=x(et,2);{var J=Z=>{{let at=B(()=>n()("delete"));Ot(Z,{get icon(){return ge},get text(){return e(at)},onClick:()=>E("delete")})}};Y(Q,Z=>{e(m)&&Z(J)})}s(d,rt)},$$slots:{default:!0}}))}s(q,I),dt(),R()}export{Qa as A};
