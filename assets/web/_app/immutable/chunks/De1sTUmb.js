import{h as f,aU as h,a0 as g,g as a,j as u,aV as d,d as y,p as L,a as T,b as E,c as w,r as z,W as O}from"./BOqQhZBJ.js";import{bu as I,bv as k,bw as x}from"./LrV5ZTyj.js";import{c as C}from"./BNLYq5HQ.js";import{l as S,h as U}from"./Jagi0WJL.js";import{D as p,b as $}from"./Cx5lmlld.js";import"./DsnmJJEf.js";import{f as M,s as N,a as _}from"./CnteGC4G.js";import{a as Z}from"./4T_x9N89.js";import{p as F}from"./B227BkWK.js";var P=["forEach","isDisjointFrom","isSubsetOf","isSupersetOf"],j=["difference","intersection","symmetricDifference","union"],v=!1;class m extends Set{#s=new Map;#e=f(0);#t=f(0);#r=h||-1;constructor(e){if(super(),e){for(var t of e)super.add(t);this.#t.v=super.size}v||this.#n()}#o(e){return h===this.#r?f(e):g(e)}#n(){v=!0;var e=m.prototype,t=Set.prototype;for(const s of P)e[s]=function(...o){return a(this.#e),t[s].apply(this,o)};for(const s of j)e[s]=function(...o){a(this.#e);var n=t[s].apply(this,o);return new m(n)}}has(e){var t=super.has(e),s=this.#s,o=s.get(e);if(o===void 0){if(!t)return a(this.#e),!1;o=this.#o(!0),s.set(e,o)}return a(o),t}add(e){return super.has(e)||(super.add(e),u(this.#t,super.size),d(this.#e)),this}delete(e){var t=super.delete(e),s=this.#s,o=s.get(e);return o!==void 0&&(s.delete(e),u(o,!1)),t&&(u(this.#t,super.size),d(this.#e)),t}clear(){if(super.size!==0){super.clear();var e=this.#s;for(var t of e.values())u(t,!1);e.clear(),u(this.#t,0),d(this.#e)}}keys(){return this.values()}values(){return a(this.#e),super.values()}entries(){return a(this.#e),super.entries()}[Symbol.iterator](){return this.keys()}get size(){return a(this.#t)}}let q={includeContainer:!1};const Y=(r,e=!1)=>I(r,{...q,includeContainer:e}),ee=(r,e)=>{const t=k(document.body,{includeContainer:!0});if(t.length===0)return;const s=document.activeElement,o=s?t.indexOf(s):-1;if(o===-1){const c=t.find(D=>r(D));c?c.focus():t[0]&&t[0].focus();return}const n=e==="next"?1:-1,i=t.length;let l=o;do{l=(l+n+i)%i;const c=t[l];if(x(c)&&r(c)){c.focus();break}}while(l!==o)};function te(r){if(!r||r==="0")return 0;const e=$.fromISOTime(r).as("seconds");return Number.isNaN(e)?0:e}function se(r){return p.fromISO(r,{zone:"UTC"}).toUTC()}const re=(r,e)=>{const t=y(S);let s=p.fromISO(r).setZone("UTC"),o=p.fromISO(e).setZone("UTC");t&&(s=s.setLocale(t),o=o.setLocale(t));const n=o.toLocaleString({month:"short",year:"numeric"});return s.year===o.year?s.month===o.month?n:`${s.toLocaleString({month:"short"})} - ${n}`:`${s.toLocaleString({month:"short",year:"numeric"})} - ${n}`},b=r=>{if(!r)return;const e=r.replace(/Z$/,"").replace(/\+.+$/,"");return e?new Date(e).toLocaleDateString(y(S),C.album):void 0},oe=r=>{const e=b(r.startDate),t=b(r.endDate);return e&&t&&e!==t?`${e} - ${t}`:e||""},ne=r=>r.setZone("utc",{keepLocalTime:!0}).toISO();function A(r,e="body"){let t;async function s(n){if(e=n,typeof e=="string"){if(t=document.querySelector(e),t===null&&(await O(),t=document.querySelector(e)),t===null)throw new Error(`No element found matching css selector: "${e}"`)}else if(e instanceof HTMLElement)t=e;else throw new TypeError(`Unknown portal target type: ${e===null?"null":typeof e}. Allowed types: string (CSS selector) or HTMLElement.`);t.append(r),r.hidden=!1}function o(){r.parentNode&&r.remove()}return U(s(e)),{update:s,destroy:o}}var H=M('<div hidden=""><!></div>');function ae(r,e){L(e,!0);let t=F(e,"target",3,"body");var s=H(),o=w(s);N(o,()=>e.children??E),z(s),Z(s,(n,i)=>A?.(n,i),t),_(r,s),T()}export{ae as P,m as S,ne as a,oe as b,re as c,Y as g,ee as m,se as p,te as t};
