import"./DsnmJJEf.js";import{p as N,c as u,b as _e,r as l,a as R,P as se,g as s,h as ae,f as te,n as S,t as C,s as f,u as L,j as Q,i as de,a7 as pe}from"./BOqQhZBJ.js";import{r as ce,c as ye,b as be,p as ue}from"./B227BkWK.js";import{s as I,o as xe}from"./BufZg4h2.js";import{r as ke,s as ve,m as Pe,c as we}from"./_U16pX41.js";import{f as b,s as Se,a as o,t as z,c as Ce}from"./CnteGC4G.js";import{i as E}from"./QS5y7wlf.js";import{e as me}from"./D4fmOnVC.js";import{a as Ie}from"./4T_x9N89.js";import{n as ze,h as Me,i as fe,B as $e,T as B,a as J,C as ne,v as Ae,y as De,l as H,d8 as le,cp as je,d9 as Fe,da as Be,db as ie,J as Ee,dc as Ke,dd as Ue}from"./LrV5ZTyj.js";import{B as Oe}from"./SuizJy8Y.js";import{I as Te}from"./BJT5MMCK.js";import{M as He,a as Qe,b as We,i as qe,m as Je}from"./C20f7eOz.js";import{d as Le,S as Ne}from"./Ze2c3aZz.js";var Re=b("<kbd><!></kbd>");function Ve(g,e){N(e,!0);const n=ce(e,["$$slots","$$events","$$legacy","class","size","children"]),t=ze({base:"bg-subtle rounded-md border border-b-2 px-1 py-0.5 font-mono shadow",variants:{size:{tiny:"text-xs",small:"text-sm",medium:"text-base",large:"text-lg",giant:"text-xl"}}});var m=Re();Me(m,M=>({class:M,...n}),[()=>fe(t({size:e.size}),e.class)]);var w=u(m);Se(w,()=>e.children??_e),l(m),o(g,m),R()}var Ge=b('<div class="mt-2"><!></div>'),Xe=b('<div class="flex justify-end"><!></div>'),Ye=b('<div class="flex shrink-0 flex-col justify-end gap-1"></div>'),Ze=b('<div class="flex flex-col"><div class="flex place-items-center gap-2"><!> <!></div> <!> <!></div> <!>',1),et=b('<div class="p-1"><!></div>');function tt(g,e){N(e,!0);const t=(e.item.shortcuts===void 0?[]:Array.isArray(e.item.shortcuts)?e.item.shortcuts:[e.item.shortcuts]).map(_=>ke(_));let m=ae(null);se(()=>{e.selected&&s(m)&&s(m).scrollIntoView({block:"nearest",inline:"start",behavior:"smooth"})});var w=et(),M=u(w);{let _=L(()=>e.selected?"outline":"ghost"),A=L(()=>e.selected?"border-primary/50 bg-primary-50":"border-light-200 dark:border-light-300");$e(M,{onclick:()=>e.onSelect(),fullWidth:!0,get variant(){return s(_)},color:"secondary",get class(){return`hover:bg-primary-50 flex justify-between gap-3 border py-4 text-start ${s(A)??""}`},children:(p,V)=>{var G=Ze(),W=te(G),q=u(W),Z=u(q);B(Z,{fontWeight:"semi-bold",children:(a,c)=>{S();var r=z();C(()=>I(r,e.item.title)),o(a,r)},$$slots:{default:!0}});var K=f(Z,2);{var ee=a=>{J(a,{get icon(){return e.item.icon},size:"1.25rem",get class(){return e.item.iconClass}})};E(K,a=>{e.item.icon&&a(ee)})}l(q);var x=f(q,2);{var U=a=>{B(a,{size:"small",class:"mt-0.5 line-clamp-4 w-full overflow-hidden text-ellipsis md:line-clamp-2",color:"muted",children:(c,r)=>{S();var i=z();C(()=>I(i,e.item.description)),o(c,i)},$$slots:{default:!0}})};E(x,a=>{e.item.description&&a(U)})}var $=f(x,2);{var D=a=>{var c=Ge(),r=u(c);Oe(r,{color:"primary",size:"small",shape:"round",children:(i,v)=>{S();var d=z();C(()=>I(d,e.item.type)),o(i,d)},$$slots:{default:!0}}),l(c),o(a,c)};E($,a=>{e.item.type&&a(D)})}l(W);var k=f(W,2);{var y=a=>{var c=Ye();me(c,21,()=>t,r=>r.join("-"),(r,i)=>{var v=Xe(),d=u(v);{let h=L(()=>fe(e.selected&&"border"));Ve(d,{size:"tiny",get class(){return s(h)},children:(O,re)=>{S();var j=z();C(T=>I(j,T),[()=>s(i).join(" ")]),o(O,j)},$$slots:{default:!0}})}l(v),o(r,v)}),l(c),o(a,c)};E(k,a=>{t.length>0&&a(y)})}o(p,G)},$$slots:{default:!0}})}l(w),ye(w,_=>Q(m,_),()=>s(m)),o(g,w),R()}function at(g,e){N(e,!0);let n=ce(e,["$$slots","$$events","$$legacy"]);Le(g,be({get for(){return ne.Modal},get as(){return ne.ModalHeader}},()=>n)),R()}var rt=b('<div class="flex place-items-center gap-1"><!> <div><!></div></div>'),st=b('<div class="flex flex-col"></div>'),ot=b("<!> <!>",1),nt=b('<div class="flex place-items-center gap-1"><span class="flex gap-1 rounded bg-gray-300 p-1 dark:bg-gray-500"><!></span> <!></div>'),lt=b('<div class="flex gap-4"><div class="flex place-items-center gap-1"><span class="rounded bg-gray-300 p-1 dark:bg-gray-500"><!></span> <!></div> <div class="flex place-items-center gap-1"><span class="flex gap-1 rounded bg-gray-300 p-1 dark:bg-gray-500"><!> <!></span> <!></div> <div class="flex place-items-center gap-1"><span class="rounded bg-gray-300 p-1 dark:bg-gray-500"><!></span> <!></div></div>'),it=b('<div class="flex w-full justify-around"><!></div>'),dt=b("<!> <!> <!>",1);function ct(g,e){N(e,!0);const n=ue(e,"initialQuery",3,""),t=p=>M(p,"up"),m=p=>M(p,"down"),w=p=>M(p,"select"),M=async(p,V)=>{switch(p.preventDefault(),V){case"up":{Q(_,Math.max((s(_)===0?P.items.length:s(_))-1,0),!0);break}case"down":{if(!s(A)&&P.items.length===0){P.loadAllItems();break}Q(_,(s(_)+1)%P.items.length||0,!0);break}case"select":{e.onClose(P.items[s(_)]);break}}};let _=ae(0),A=ae(de(n()));se(()=>P.queryUpdate(s(A))),Ie(pe,(p,V)=>ve?.(p,V),()=>[{shortcut:{key:"ArrowUp"},preventDefault:!1,ignoreInputFields:!1,onShortcut:t},{shortcut:{key:"ArrowDown"},preventDefault:!1,ignoreInputFields:!1,onShortcut:m},{shortcut:{key:"k",ctrl:!0},ignoreInputFields:!1,onShortcut:t},{shortcut:{key:"k",meta:!0},ignoreInputFields:!1,onShortcut:t},{shortcut:{key:"j",ctrl:!0},ignoreInputFields:!1,onShortcut:m},{shortcut:{key:"j",meta:!0},ignoreInputFields:!1,onShortcut:m},{shortcut:{key:"Enter"},ignoreInputFields:!1,onShortcut:w}]),He(g,{size:"large",get onClose(){return e.onClose},closeOnBackdropClick:!0,class:"max-h-[85vh] lg:max-h-[75vh]",children:(p,V)=>{var G=dt(),W=te(G);at(W,{children:(K,ee)=>{var x=rt(),U=u(x);{let k=L(()=>H("search_placeholder",e.translations));Te(U,{get placeholder(){return s(k)},get leadingIcon(){return Ae},tabindex:1,get value(){return s(A)},set value(y){Q(A,y,!0)}})}var $=f(U,2),D=u($);De(D,{onclick:()=>e.onClose(),class:"md:hidden"}),l($),l(x),o(K,x)},$$slots:{default:!0}});var q=f(W,2);Qe(q,{children:(K,ee)=>{Ne(K,{gap:2,children:(x,U)=>{var $=ot(),D=te($);{var k=r=>{var i=Ce(),v=te(i);{var d=h=>{B(h,{children:(O,re)=>{S();var j=z();C(T=>I(j,T),[()=>H("search_no_results",e.translations)]),o(O,j)},$$slots:{default:!0}})};E(v,h=>{P.items.length===0&&h(d)})}o(r,i)},y=r=>{B(r,{children:(i,v)=>{S();var d=z();C(h=>I(d,h),[()=>H("command_palette_prompt_default",e.translations)]),o(i,d)},$$slots:{default:!0}})};E(D,r=>{s(A)?r(k):r(y,!1)})}var a=f(D,2);{var c=r=>{var i=st();me(i,23,()=>P.items,v=>v.id,(v,d,h)=>{{let O=L(()=>s(_)===s(h));tt(v,{get item(){return s(d)},get selected(){return s(O)},onSelect:()=>e.onClose(s(d))})}}),l(i),o(r,i)};E(a,r=>{P.items.length>0&&r(c)})}o(x,$)},$$slots:{default:!0}})},$$slots:{default:!0}});var Z=f(q,2);We(Z,{children:(K,ee)=>{var x=it(),U=u(x);{var $=k=>{var y=nt(),a=u(y),c=u(a);J(c,{get icon(){return le},size:"1rem"}),l(a);var r=f(a,2);B(r,{size:"small",children:(i,v)=>{S();var d=z();C(h=>I(d,h),[()=>H("command_palette_to_show_all",e.translations)]),o(i,d)},$$slots:{default:!0}}),l(y),o(k,y)},D=k=>{var y=lt(),a=u(y),c=u(a),r=u(c);J(r,{get icon(){return je},size:"1rem"}),l(c);var i=f(c,2);B(i,{size:"small",children:(X,oe)=>{S();var F=z();C(Y=>I(F,Y),[()=>H("command_palette_to_select",e.translations)]),o(X,F)},$$slots:{default:!0}}),l(a);var v=f(a,2),d=u(v),h=u(d);J(h,{get icon(){return Fe},size:"1rem"});var O=f(h,2);J(O,{get icon(){return le},size:"1rem"}),l(d);var re=f(d,2);B(re,{size:"small",children:(X,oe)=>{S();var F=z();C(Y=>I(F,Y),[()=>H("command_palette_to_navigate",e.translations)]),o(X,F)},$$slots:{default:!0}}),l(v);var j=f(v,2),T=u(j),he=u(T);J(he,{get icon(){return Be},size:"1rem"}),l(T);var ge=f(T,2);B(ge,{size:"small",children:(X,oe)=>{S();var F=z();C(Y=>I(F,Y),[()=>H("command_palette_to_close",e.translations)]),o(X,F)},$$slots:{default:!0}}),l(j),l(y),o(k,y)};E(U,k=>{!s(A)&&P.items.length===0?k($):k(D,!1)})}l(x),o(K,x)},$$slots:{default:!0}}),o(p,G)},$$slots:{default:!0}}),R()}const ut=({name:g,actions:e})=>({name:g,onSearch:n=>n?e.filter(t=>Ue(t).includes(n.toLowerCase())):e});class vt{#s={};#e=[];#a=!1;#r=!1;#t=ae(de([]));get isEnabled(){return this.#a}get items(){return s(this.#t)}enable(){this.#a||(this.#a=!0,globalThis.window&&document.body&&(ve(document.body,[{shortcut:{key:"k",meta:!0},onShortcut:()=>this.open()},{shortcut:{key:"k",ctrl:!0},onShortcut:()=>this.open()},{shortcut:{key:"/"},preventDefault:!0,onShortcut:()=>this.open()}]),xe(document.body,"keydown",e=>this.#n(e))))}setTranslations(e={}){this.#s=e}async#o(e){const n=await Promise.all(this.#e.map(t=>Promise.resolve(t.onSearch(e))));Q(this.#t,n.flat().filter(t=>ie(t)).map(t=>({...t,id:Ee()})),!0)}queryUpdate(e){if(!e){Q(this.#t,[],!0);return}this.#o(e)}async#n(e){if(e.defaultPrevented||qe())return;const n=await Promise.all(this.#e.map(t=>Promise.resolve(t.onSearch())));for(const t of n.flat()){if(!Ke(t.shortcuts).some(M=>Pe(e,M))||!ie(t))continue;const{ignoreInputFields:m=!0,preventDefault:w=!0}=t.shortcutOptions||{};if(!(m&&we(e))){w&&e.preventDefault(),t?.onAction(t);return}}}async#l(e){await e?.onAction(e),this.#r=!1,Q(this.#t,[],!0)}open(e){if(this.#r)return;const{onClose:n}=Je.open(ct,{translations:this.#s,initialQuery:e});this.#r=!0,n.then(t=>this.#l(t))}loadAllItems(){this.#o()}addProvider(e){return this.#e.push(e),()=>this.#i(e)}#i(e){this.#e=this.#e.filter(n=>n!==e)}}const P=new vt;function mt(g,e){N(e,!0),se(()=>{const n=[];for(const t of e.providers)n.push(P.addProvider(t));return()=>n.forEach(t=>t())}),R()}function zt(g,e){N(e,!0);const n=ue(e,"actions",19,()=>[]);{let t=L(()=>[ut({name:e.name,actions:n()})]);mt(g,{get providers(){return s(t)}})}R()}export{zt as C,P as c};
