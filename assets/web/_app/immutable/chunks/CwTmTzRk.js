import"./DsnmJJEf.js";import{p as Y,c as h,n as Ae,t as E,r as p,a as Q,h as Ee,i as Le,j as $e,g as e,f as P,s as l,b as me,u as C,ae as a}from"./BOqQhZBJ.js";import{s as q,a as ke}from"./BufZg4h2.js";import{f as M,t as we,a as $,c as fe,s as re}from"./CnteGC4G.js";import{i as A}from"./QS5y7wlf.js";import{h as ze,e as Ie,i as Ue}from"./D4fmOnVC.js";import{a as ge}from"./4T_x9N89.js";import{n as We,T as Be,q as De,i as He,u as ae,s as ie,aa as Fe,cP as Pe,cN as Re,cQ as je,cR as qe,ag as Ge,ax as Ye,cS as Qe,cT as Ve,cU as Xe,av as Ze,cV as Je,a8 as Ke,v as et,cW as tt,b2 as rt,cX as at,aI as it,Y as nt,G as st,H as ot,at as lt,cY as dt,V as ut,b4 as ct,aG as vt,cZ as mt,B as ft}from"./LrV5ZTyj.js";import{p as U,a as G,s as he,d as gt,m as ht}from"./B227BkWK.js";import{m as pt,N as x,B as bt,c as _t}from"./CWUfCk5h.js";import"./69_IOA4Y.js";import{i as $t}from"./CMtyP6CA.js";import{R as _}from"./BeWG-__C.js";import{c as ce,p as yt}from"./Cx5lmlld.js";import{t as xt,aa as ye}from"./Jagi0WJL.js";import{X as At}from"./DeYUhNiz.js";import{$ as pe}from"./DdY9CyNE.js";import{c as kt}from"./BmZTbFl5.js";import{f as wt}from"./CKQ4VlI3.js";import{m as xe}from"./BihPMor6.js";import{s as te}from"./BOKXftfP.js";import{f as ve}from"./D5h9ps2j.js";import{o as It}from"./BjCgVxgW.js";import{H as Ot}from"./C20f7eOz.js";import{C as Mt}from"./BPix1jPq.js";var Tt=M("<div><!></div>");function Nt(k,i){Y(i,!0);let n=U(i,"size",3,"small");const r=We({base:"ps-6 transition-all duration-200",variants:{variant:{compact:"py-4",default:"py-6"}}});var c=Tt(),s=h(c);Be(s,{get color(){return i.color},get size(){return n()},get fontWeight(){return i.fontWeight},children:(u,O)=>{Ae();var g=we();E(()=>q(g,i.title)),$(u,g)},$$slots:{default:!0}}),p(c),E(u=>ae(c,1,u),[()=>De(He(r({variant:i.variant??"default"}),i.class))]),$(k,c),Q()}function St(k,i){const n=[];if(i)for(const r of i){const c=Array.isArray(r)?r[0]:r;Array.isArray(r)&&r.length>1?n.push(c(k,r[1])):n.push(c(k))}return{update(r){if((r?.length||0)!=n.length)throw new Error("You must not change the length of an actions array.");if(r){for(const[c,s]of n.entries())if(s&&s.update){const u=r[c];Array.isArray(u)&&u.length>1?s.update(u[1]):s.update()}}},destroy(){for(const r of n)r?.destroy?.()}}}var Ct=M('<a class="flex w-full place-items-center justify-between gap-4 rounded-e-full py-3 transition-[padding] delay-100 duration-100 hover:cursor-pointer hover:bg-subtle hover:text-immich-primary dark:text-immich-dark-fg dark:hover:bg-immich-dark-gray dark:hover:text-immich-dark-primary ps-10 group-hover:sm:px-10 md:px-10"><div><div class="h-6 w-6 bg-cover rounded bg-gray-200 dark:bg-gray-600"></div></div> <div class="grow text-sm font-medium truncate"> </div></a>');function Et(k,i){Y(i,!0);const n=()=>G(pe,"$t",r),[r,c]=he();let s=Ee(Le([]));ke(async()=>{if(ce.recentAlbums){$e(s,ce.recentAlbums,!0);return}try{const g=await At({});$e(s,g.sort((y,v)=>y.updatedAt>v.updatedAt?-1:1).slice(0,3),!0),ce.recentAlbums=e(s)}catch(g){ze(g,n()("failed_to_load_assets"))}});var u=fe(),O=P(u);Ie(O,17,()=>e(s),g=>g.id,(g,y)=>{var v=Ct(),T=h(v),W=h(T);p(T);var B=l(T,2),L=h(B,!0);p(B),p(v),E((z,D)=>{ie(v,"href",z),ie(v,"title",e(y).albumName),Fe(W,D),q(L,e(y).albumName)},[()=>_.viewAlbum(e(y)),()=>e(y).albumThumbnailAssetId?`background-image:url('${xt({id:e(y).albumThumbnailAssetId})}')`:""]),$(g,v)}),$(k,u),Q(),c()}var Lt=M('<nav id="sidebar" tabindex="-1" data-testid="sidebar-parent"><div class="pe-6 flex flex-col gap-1 h-max min-h-full"><!></div></nav>');function zt(k,i){Y(i,!0);const n=C(()=>!te.isOpen&&!xe.isFullSidebar),r=C(()=>te.isOpen&&!xe.isFullSidebar);ke(()=>{c()});const c=()=>{e(r)&&(te.reset(),e(n)&&document.querySelector(`#${pt}`)?.focus())};var s=Lt();let u;var O=h(s),g=h(O);re(g,()=>i.children??me),p(O),p(s),ge(s,(y,v)=>kt?.(y,v),()=>({onOutclick:c,onEscape:c})),ge(s,(y,v)=>wt?.(y,v),()=>({active:e(r)})),E(()=>{ie(s,"aria-label",i.ariaLabel),u=ae(s,1,"immich-scrollbar relative z-1 w-0 sidebar:w-64 overflow-y-auto overflow-x-hidden pt-8 transition-all duration-200 bg-light",null,u,{"shadow-2xl":e(r),"dark:border-e-immich-dark-gray":e(r),"border-r":e(r),"w-[min(100vw,16rem)]":te.isOpen}),s.inert=e(n)}),$(k,s),Q()}var Ut=M('<span class="hidden md:block"><!></span>'),Wt=M("<!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!>",1);function Bt(k,i){Y(i,!1);const n=()=>G(pe,"$t",s),r=()=>G(yt,"$preferences",s),c=()=>G(ye,"$recentAlbumsDropdown",s),[s,u]=he();$t();{let O=a(()=>n()("primary"));zt(k,{get ariaLabel(){return e(O)},children:(g,y)=>{var v=Wt(),T=P(v);{let t=a(()=>n()("photos")),o=a(()=>_.photos());x(T,{get title(){return e(t)},get href(){return e(o)},get icon(){return Re},get activeIcon(){return Pe}})}var W=l(T,2);{var B=t=>{{let o=a(()=>n()("explore")),m=a(()=>_.explore());x(t,{get title(){return e(o)},get href(){return e(m)},get icon(){return et}})}};A(W,t=>{ve.value.search&&t(B)})}var L=l(W,2);{var z=t=>{{let o=a(()=>n()("map")),m=a(()=>_.map());x(t,{get title(){return e(o)},get href(){return e(m)},get icon(){return rt},get activeIcon(){return tt}})}};A(L,t=>{ve.value.map&&t(z)})}var D=l(L,2);{var ne=t=>{{let o=a(()=>n()("people")),m=a(()=>_.people());x(t,{get title(){return e(o)},get href(){return e(m)},get icon(){return it},get activeIcon(){return at}})}};A(D,t=>{r().people.enabled&&r().people.sidebarWeb&&t(ne)})}var H=l(D,2);{var V=t=>{{let o=a(()=>n()("shared_links")),m=a(()=>_.sharedLinks());x(t,{get title(){return e(o)},get href(){return e(m)},get icon(){return nt}})}};A(H,t=>{r().sharedLinks.enabled&&r().sharedLinks.sidebarWeb&&t(V)})}var X=l(H,2);{let t=a(()=>n()("sharing")),o=a(()=>_.sharing());x(X,{get title(){return e(t)},get href(){return e(o)},get icon(){return qe},get activeIcon(){return je}})}var Z=l(X,2);{let t=a(()=>n()("library"));Nt(Z,{get title(){return e(t)},size:"tiny"})}var R=l(Z,2);{let t=a(()=>n()("favorites")),o=a(()=>_.favorites());x(R,{get title(){return e(t)},get href(){return e(o)},get icon(){return Ye},get activeIcon(){return Ge}})}var N=l(R,2);{const t=b=>{var w=Ut(),de=h(w);Et(de,{}),p(w),st(1,w,()=>ot,()=>({y:-20})),$(b,w)};let o=a(()=>n()("albums")),m=a(()=>_.albums()),f=a(()=>({icon:lt,flipped:!0}));x(N,{get title(){return e(o)},get href(){return e(m)},get icon(){return e(f)},get expanded(){return ht(),c()},set expanded(b){gt(ye,b)},items:t,$$slots:{items:!0},$$legacy:!0})}var J=l(N,2);{var se=t=>{{let o=a(()=>n()("tags")),m=a(()=>_.tags()),f=a(()=>({icon:ct,flipped:!0}));x(t,{get title(){return e(o)},get href(){return e(m)},get icon(){return e(f)}})}};A(J,t=>{r().tags.enabled&&r().tags.sidebarWeb&&t(se)})}var K=l(J,2);{var d=t=>{{let o=a(()=>n()("folders")),m=a(()=>_.folders()),f=a(()=>({icon:vt,flipped:!0}));x(t,{get title(){return e(o)},get href(){return e(m)},get icon(){return e(f)}})}};A(K,t=>{r().folders.enabled&&r().folders.sidebarWeb&&t(d)})}var I=l(K,2);{let t=a(()=>n()("utilities")),o=a(()=>_.utilities());x(I,{get title(){return e(t)},get href(){return e(o)},get icon(){return Ve},get activeIcon(){return Qe}})}var S=l(I,2);{let t=a(()=>n()("archive")),o=a(()=>_.archive());x(S,{get title(){return e(t)},get href(){return e(o)},get icon(){return Ze},get activeIcon(){return Xe}})}var j=l(S,2);{let t=a(()=>n()("locked_folder")),o=a(()=>_.locked());x(j,{get title(){return e(t)},get href(){return e(o)},get icon(){return Ke},get activeIcon(){return Je}})}var ee=l(j,2);{var oe=t=>{{let o=a(()=>n()("trash")),m=a(()=>_.trash());x(t,{get title(){return e(o)},get href(){return e(m)},get icon(){return ut},get activeIcon(){return dt}})}};A(ee,t=>{ve.value.trash&&t(oe)})}var le=l(ee,2);bt(le),$(g,v)},$$slots:{default:!0}})}Q(),u()}const Dt="user-page-header";var Ht=M('<div class="outline-none pe-8" tabindex="-1"> </div>'),Ft=M('<p class="text-sm text-gray-400 dark:text-gray-600"> </p>'),Pt=M('<div class="hidden md:block"><!></div> <!>',1),Rt=M('<div class="absolute flex h-16 w-full place-items-center justify-between border-b p-2 text-dark"><div class="flex gap-2 items-center"><!> <!></div> <!> <!></div>'),jt=M('<header><!></header> <div tabindex="-1"><!> <main class="relative"><div><!></div> <!></main></div>',1);function br(k,i){Y(i,!0);const n=()=>G(pe,"$t",r),[r,c]=he();let s=U(i,"hideNavbar",3,!1),u=U(i,"title",3,void 0),O=U(i,"description",3,void 0),g=U(i,"scrollbar",3,!0),y=U(i,"use",19,()=>[]),v=U(i,"actions",19,()=>[]);const T=C(()=>v().filter(d=>!mt(d)).filter(d=>d.$if?.()??!0));let W=C(()=>g()?"immich-scrollbar":"scrollbar-hidden"),B=C(()=>u()?"top-16 h-[calc(100%-(--spacing(16)))]":"top-0 h-full");var L=jt(),z=P(L),D=h(z);{var ne=d=>{_t(d,{onUploadClick:()=>It()})};A(D,d=>{s()||d(ne)})}p(z);var H=l(z,2),V=h(H);{var X=d=>{var I=fe(),S=P(I);re(S,()=>i.sidebar),$(d,I)},Z=d=>{Bt(d,{})};A(V,d=>{i.sidebar?d(X):d(Z,!1)})}var R=l(V,2),N=h(R),J=h(N);re(J,()=>i.children??me),p(N),ge(N,(d,I)=>St?.(d,I),y);var se=l(N,2);{var K=d=>{var I=Rt(),S=h(I),j=h(S);{var ee=f=>{var b=Ht();ie(b,"id",Dt);var w=h(b,!0);p(b),E(()=>q(w,u())),$(f,b)};A(j,f=>{u()&&f(ee)})}var oe=l(j,2);{var le=f=>{var b=Ft(),w=h(b,!0);p(b),E(()=>q(w,O())),$(f,b)};A(oe,f=>{O()&&f(le)})}p(S);var t=l(S,2);re(t,()=>i.buttons??me);var o=l(t,2);{var m=f=>{var b=Pt(),w=P(b),de=h(w);Ot(de,{gap:0,children:(ue,qt)=>{var be=fe(),Me=P(be);Ie(Me,17,()=>e(T),Ue,(Te,F)=>{{let Ne=C(()=>e(F).color??"secondary"),Se=C(()=>e(F).data?.title);ft(Te,{variant:"ghost",size:"small",get color(){return e(Ne)},get leadingIcon(){return e(F).icon},onclick:()=>e(F).onAction(e(F)),get title(){return e(Se)},children:(Ce,Gt)=>{Ae();var _e=we();E(()=>q(_e,e(F).title)),$(Ce,_e)},$$slots:{default:!0}})}}),$(ue,be)},$$slots:{default:!0}}),p(w);var Oe=l(w,2);{let ue=C(()=>n()("open"));Mt(Oe,{get"aria-label"(){return e(ue)},get items(){return v()},class:"md:hidden"})}$(f,b)};A(o,f=>{e(T).length>0&&f(m)})}p(I),$(d,I)};A(se,d=>{(u()||i.buttons)&&d(K)})}p(R),p(H),E(()=>{ae(H,1,`relative z-0 grid grid-cols-[--spacing(0)_auto] overflow-hidden sidebar:grid-cols-[--spacing(64)_auto]
    ${s()?"h-dvh":"h-[calc(100dvh-var(--navbar-height))] max-md:h-[calc(100dvh-var(--navbar-height-md))]"}
    ${s()?"pt-(--navbar-height)":""}
    ${s()?"max-md:pt-(--navbar-height-md)":""}`),ae(N,1,`${e(W)??""} absolute ${e(B)??""} w-full overflow-y-auto p-2`)}),$(k,L),Q(),c()}export{zt as S,br as U,Dt as h};
