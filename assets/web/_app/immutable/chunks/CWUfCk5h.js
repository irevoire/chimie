import"./DsnmJJEf.js";import{p as te,t as C,g as a,u as _,s,a as re,c as r,r as t,f as X,am as Mt,n as J,j as W,h as ae,b as Ye,d as Lt,Q as rt,ae as vt,i as ut,P as mt,at as Tt}from"./BOqQhZBJ.js";import{s as k,d as we,a as He,e as ye}from"./BufZg4h2.js";import{f as R,a as o,c as he,s as ft,t as K}from"./CnteGC4G.js";import{i as H}from"./QS5y7wlf.js";import{e as We,i as Ot,t as gt,h as Be}from"./D4fmOnVC.js";import{n as _t,a as Z,l as Qe,s as be,i as Je,u as Ae,b1 as Rt,bD as Dt,q as pt,L as je,T as pe,I as ke,a9 as Ce,eE as jt,at as Nt,eF as Et,ci as Ft,ex as Ht,B as oe,eG as Wt,ep as ht,d4 as Vt,G as Me,ab as Le,eH as qt,eI as at,eJ as Gt,eK as Kt,bs as Yt,bU as Qt,eL as Jt,d0 as Xt,d6 as Zt,eM as er,v as tr,cy as it,eN as rr,d as ar,cX as ir,E as Se,d1 as sr,w as bt,r as or,x as nr,eO as lr,cD as cr,aa as dr}from"./LrV5ZTyj.js";import{p as de,b as st,a as G,s as ie,d as vr,f as ur}from"./B227BkWK.js";import{p as Xe}from"./DbKlvrsB.js";import{L as xt}from"./Dj0AsE1j.js";import{a as Ne}from"./4T_x9N89.js";import{a as mr}from"./Cv1syPnL.js";import{c as ot}from"./BmZTbFl5.js";import{U as Ze,A as fr,g as gr}from"./Bp2HQ4kn.js";import{g as yt}from"./C4XZXykC.js";import{f as kt}from"./CKQ4VlI3.js";import{bT as _e,bU as fe,bV as _r,bW as pr,P as hr,aj as $t,bl as wt,bX as br,bY as xr,bZ as yr}from"./DeYUhNiz.js";import{D as Te,u as ze,c as le,p as Ue,l as kr,g as $r,r as Pt}from"./Cx5lmlld.js";import{S as De,H as wr}from"./Ze2c3aZz.js";import{ak as $e,l as It,w as Pr,al as nt,q as Re}from"./Jagi0WJL.js";import{$ as se}from"./DdY9CyNE.js";import{f as Ir,S as Sr}from"./DtjhqBtS.js";import{S as zr}from"./CWrj8NSO.js";import{a as Ur}from"./0U8rfwJB.js";import{g as Ar,P as Br}from"./De1sTUmb.js";import{a as Ee}from"./C2I_EQjW.js";import{f as lt}from"./D5h9ps2j.js";import{R as Oe}from"./BeWG-__C.js";import{m as Cr}from"./BihPMor6.js";import{s as ct}from"./BOKXftfP.js";import{T as Mr}from"./S6jRJcg1.js";import{M as Ve,a as qe,m as Fe}from"./C20f7eOz.js";import"./69_IOA4Y.js";import{I as St,O as Lr}from"./BNLYq5HQ.js";import{S as Tr}from"./CGdGWZSx.js";import{b as Or,L as zt}from"./eLOR7anR.js";import{s as Rr}from"./FIvvbHQR.js";import{i as Ut}from"./CMtyP6CA.js";import{e as Dr}from"./ytu5q_IM.js";import{A as jr}from"./BEiKRg21.js";var Nr=R('<button type="button" class="hover:bg-subtle hover:text-primary absolute me-2 hidden h-full rounded-lg px-0.5 md:block"><!></button>'),Er=R('<div><!> <span class="truncate text-sm font-medium"> </span></div>'),Fr=R("<div><!></div>"),Hr=R('<div><div class="relative flex items-center"><!> <!></div> <!></div>');function Wr(U,e){te(e,!0);const i=()=>Xe.url.pathname.startsWith(e.href);let p=de(e,"expanded",15,!1);const P=_(()=>e.isActive??i);let I=_(()=>e.active??a(P)());const h=_(()=>typeof e.icon=="string"?{icon:e.icon}:e.icon),l=_(()=>typeof e.activeIcon=="string"?{icon:e.activeIcon}:e.activeIcon),b=_t({base:"hover:bg-subtle hover:text-primary flex w-full place-items-center gap-4 rounded-e-full ps-5 transition-[padding] delay-100 duration-100",variants:{active:{true:"bg-primary/10 text-primary",false:""},variant:{default:"py-3",compact:"py-2"}}});var j=Hr(),v=r(j),u=r(v);{var x=z=>{var A=Nr();A.__click=()=>p(!p());var E=r(A);{let F=_(()=>p()?Rt:Dt);Z(E,{get icon(){return a(F)},size:"1em",class:"shrink-0 delay-100 duration-100 ","aria-hidden":!0})}t(A),C(F=>be(A,"aria-label",F),[()=>p()?Qe("collapse"):Qe("expand")]),o(z,A)};H(u,z=>{e.items&&z(x)})}var c=s(u,2);{let z=_(()=>a(I)?"page":void 0),A=_(()=>Je(b({active:a(I),variant:e.variant??"default"}),e.class));xt(c,{get href(){return e.href},get"aria-current"(){return a(z)},underline:!1,get class(){return a(A)},children:(E,F)=>{var m=Er(),y=r(m);{var f=L=>{Z(L,st({size:"1.375em",class:"shrink-0","aria-hidden":!0},()=>a(I)&&a(l)?a(l):a(h)))};H(y,L=>{a(h)&&L(f)})}var D=s(y,2),w=r(D,!0);t(D),t(m),C(()=>{Ae(m,1,`relative flex w-full place-items-center ${e.variant==="compact"?"gap-2":"gap-4"}`),k(w,e.title)}),o(E,m)},$$slots:{default:!0}})}t(v);var $=s(v,2);{var S=z=>{var A=Fr(),E=r(A);{var F=f=>{var D=he(),w=X(D);We(w,17,()=>e.items,Ot,(L,N,d,g)=>{let T=()=>a(N).class,M=()=>Mt(a(N),["class"]);{let n=_(()=>Je("ps-8",T()));Wr(L,st({get variant(){return e.variant}},M,{get class(){return a(n)}}))}}),o(f,D)},m=_(()=>Array.isArray(e.items)),y=f=>{var D=he(),w=X(D);ft(w,()=>e.items),o(f,D)};H(E,f=>{a(m)?f(F):e.items&&f(y,1)})}t(A),o(z,A)};H($,z=>{p()&&z(S)})}t(j),o(U,j),re()}we(["click"]);var Vr=R("<!> <!>",1),qr=R("<div><!></div>");function Gr(U,e){te(e,!0);const i=de(e,"effect",3,"hover"),p=de(e,"text",19,()=>Qe("supporter")),P=de(e,"size",3,"medium"),I={tiny:"tiny",small:"tiny",medium:"small",large:"medium",giant:"medium"},h=_t({base:"bg-secondary flex place-items-center gap-2 overflow-hidden rounded-lg transition-all",variants:{size:{tiny:"px-2 py-1",small:"px-2 py-1",medium:"px-3 py-2",large:"px-3 py-2",giant:"px-3 py-2"},effect:{hover:"supporter-effect-hover border-dark/25 border",always:"supporter-effect shadow"}}});var l=qr(),b=r(l);{var j=u=>{var x=he(),c=X(x);ft(c,()=>e.children),o(u,x)},v=u=>{var x=Vr(),c=X(x);je(c,{get size(){return I[P()]},variant:"icon"});var $=s(c,2);pe($,{fontWeight:"normal",color:"secondary",get size(){return P()},children:(S,z)=>{J();var A=K();C(()=>k(A,p())),o(S,A)},$$slots:{default:!0}}),o(u,x)};H(b,u=>{e.children?u(j):u(v,!1)})}t(l),C(u=>Ae(l,1,u,"svelte-opv4wt"),[()=>pt(Je(h({effect:i(),size:P()})))]),o(U,l),re()}var Kr=R("<!> <!> <!>",1),Yr=R('<div class="w-2 h-2 rounded-full bg-primary text-right justify-self-center"></div>'),Qr=R('<button class="min-h-20 p-2 py-3 hover:bg-immich-primary/10 dark:hover:bg-immich-dark-primary/10 border-b border-gray-200 dark:border-immich-dark-gray w-full" type="button"><div class="grid grid-cols-[56px_1fr_32px] items-center gap-2"><div class="flex place-items-center place-content-center"><!></div> <!> <!></div></button>');function Jr(U,e){te(e,!0);const i=c=>{switch(c){case fe.Error:return"danger";case fe.Warning:return"warning";case fe.Info:return"primary";case fe.Success:return"success";default:return"primary"}},p=c=>{switch(c){case fe.Error:return"bg-red-500 dark:bg-red-300 dark:hover:bg-red-200";case fe.Warning:return"bg-amber-500 dark:bg-amber-200 dark:hover:bg-amber-200";case fe.Info:return"bg-blue-500 dark:bg-blue-200 dark:hover:bg-blue-200";case fe.Success:return"bg-green-500 dark:bg-green-200 dark:hover:bg-green-200"}},P=c=>{switch(c){case _e.BackupFailed:return Ht;case _e.JobFailed:return Ft;case _e.SystemMessage:return Et;case _e.Custom:return Ce;case _e.AlbumInvite:return Nt;case _e.AlbumUpdate:return jt;default:return Ce}},I=c=>{try{const $=Te.fromISO(c);return $.isValid&&$.setLocale("en").toRelative()||c}catch($){return console.error("Error formatting relative time:",$),c}};var h=Qr();h.__click=()=>e.onclick(e.notification);var l=r(h),b=r(l),j=r(b);{let c=_(()=>P(e.notification.type)),$=_(()=>i(e.notification.level)),S=_(()=>p(e.notification.level));ke(j,{get icon(){return a(c)},get color(){return a($)},get"aria-label"(){return e.notification.title},shape:"round",get class(){return a(S)},size:"small"})}t(b);var v=s(b,2);De(v,{class:"text-left",gap:1,children:(c,$)=>{var S=Kr(),z=X(S);pe(z,{size:"tiny",class:"text-black dark:text-white text-base",fontWeight:"semi-bold",children:(m,y)=>{J();var f=K();C(()=>k(f,e.notification.title)),o(m,f)},$$slots:{default:!0}});var A=s(z,2);{var E=m=>{pe(m,{class:"overflow-hidden text-gray-600 dark:text-gray-300",children:(y,f)=>{J();var D=K();C(()=>k(D,e.notification.description)),o(y,D)},$$slots:{default:!0}})};H(A,m=>{e.notification.description&&m(E)})}var F=s(A,2);pe(F,{size:"tiny",color:"muted",children:(m,y)=>{J();var f=K();C(D=>k(f,D),[()=>I(e.notification.createdAt)]),o(m,f)},$$slots:{default:!0}}),o(c,S)},$$slots:{default:!0}});var u=s(v,2);{var x=c=>{var $=Yr();o(c,$)};H(u,c=>{e.notification.readAt||c(x)})}t(l),t(h),C(()=>be(h,"title",e.notification.createdAt)),o(U,h),re()}we(["click"]);var Xr=R("<!> <!>",1),Zr=R("<div><!></div>"),ea=R('<div class="flex justify-between items-center mt-4 mx-4"><!> <div><!></div></div> <hr class="dark:border-black"/> <!>',1),ta=R('<div id="notification-panel" class="absolute right-6 top-17.5 z-1 w-[min(360px,100vw-50px)] rounded-3xl bg-gray-100 border border-gray-200 shadow-lg dark:border dark:border-light dark:bg-immich-dark-gray text-light"><!></div>');function ra(U,e){te(e,!0);const i=()=>G(se,"$t",p),[p,P]=ie(),I=_(()=>$e.notifications.length===0),h=async x=>{try{await $e.markAsRead(x)}catch(c){Be(c,i()("errors.failed_to_update_notification_status"))}},l=async()=>{try{await $e.markAllAsRead(),gt.info(i()("marked_all_as_read"))}catch(x){Be(x,i()("errors.failed_to_update_notification_status"))}},b=async x=>{switch(x.type){case _e.AlbumInvite:case _e.AlbumUpdate:{if(!x.data||typeof x.data!="string")return;const c=JSON.parse(x.data);c?.albumId&&await yt(`/albums/${c.albumId}`);break}}},j=async x=>{await h(x.id),await b(x)};var v=ta(),u=r(v);De(u,{class:"max-h-125",children:(x,c)=>{var $=ea(),S=X($),z=r(S);pe(z,{size:"medium",color:"secondary",fontWeight:"semi-bold",children:(f,D)=>{J();var w=K();C(L=>k(w,L),[()=>i()("notifications")]),o(f,w)},$$slots:{default:!0}});var A=s(z,2),E=r(A);oe(E,{variant:"ghost",get disabled(){return a(I)},get leadingIcon(){return Wt},size:"small",color:"primary",onclick:()=>l(),children:(f,D)=>{J();var w=K();C(L=>k(w,L),[()=>i()("mark_all_as_read")]),o(f,w)},$$slots:{default:!0}}),t(A),t(S);var F=s(S,4);{var m=f=>{De(f,{class:"py-12 flex flex-col place-items-center place-content-center text-gray-700 dark:text-gray-300",gap:1,children:(D,w)=>{var L=Xr(),N=X(L);Z(N,{get icon(){return ht},size:"20"});var d=s(N,2);pe(d,{children:(g,T)=>{J();var M=K();C(n=>k(M,n),[()=>i()("no_notifications")]),o(g,M)},$$slots:{default:!0}}),o(D,L)},$$slots:{default:!0}})},y=f=>{zr(f,{class:"pb-6",children:(D,w)=>{De(D,{gap:0,children:(L,N)=>{var d=he(),g=X(d);We(g,25,()=>$e.notifications,T=>T.id,(T,M)=>{var n=Zr(),O=r(n);Jr(O,{get notification(){return a(M)},onclick:j}),t(n),Vt(n,()=>Ir,()=>({duration:400})),o(T,n)}),o(L,d)},$$slots:{default:!0}})},$$slots:{default:!0}})};H(F,f=>{a(I)?f(m):f(y,!1)})}o(x,$)},$$slots:{default:!0}}),t(v),Ne(v,x=>kt?.(x)),Me(1,v,()=>Le,()=>({duration:100})),Me(2,v,()=>Le,()=>({duration:100})),o(U,v),re(),P()}var aa=R("<div><!></div>");function ia(U,e){te(e,!0);const i=()=>G(se,"$t",p),[p,P]=ie();let I=de(e,"target",3,"main"),h=de(e,"text",19,()=>i()("skip_to_content")),l=ae(!1);const b=()=>{const x=document.querySelector(I());if(x){const c=Ar(x)[0];c&&c.focus()}},j=()=>{if(!e.breakpoint)return"";switch(e.breakpoint){case"sm":return"hidden sm:block";case"md":return"hidden md:block";case"lg":return"hidden lg:block";case"xl":return"hidden xl:block";case"2xl":return"hidden 2xl:block"}};var v=aa(),u=r(v);{let x=_(j);oe(u,{size:"small",onclick:b,get class(){return a(x)},onfocus:()=>W(l,!0),onblur:()=>W(l,!1),children:(c,$)=>{J();var S=K();C(()=>k(S,h())),o(c,S)},$$slots:{default:!0}})}t(v),C(()=>Ae(v,1,`absolute top-2 start-2 transition-transform ${a(l)?"translate-y-0":"-translate-y-10 sr-only"}`)),o(U,v),re(),P()}var sa=R('<button type="button"><!></button>'),oa=R('<div class="grid grid-cols-2 sm:grid-cols-5 gap-4 place-items-center"></div>');function na(U,e){te(e,!0);const i=()=>G(ze,"$user",P),p=()=>G(se,"$t",P),[P,I]=ie(),h=Object.values(_r),l=async b=>{try{i().profileImagePath!==""&&await pr(),gt.success(p()("saved_profile")),vr(ze,await hr({userUpdateMeDto:{avatarColor:b}})),e.onClose()}catch(j){Be(j,p()("errors.unable_to_save_profile"))}};{let b=_(()=>p()("select_avatar_color"));Ve(U,{get title(){return a(b)},size:"small",get onClose(){return e.onClose},children:(j,v)=>{qe(j,{children:(u,x)=>{var c=oa();We(c,20,()=>h,$=>$,($,S)=>{var z=sa();z.__click=()=>l(S);var A=r(z);{let E=_(()=>({...i(),profileImagePath:"",avatarColor:S}));Ze(A,{get label(){return S},get user(){return a(E)},size:"xl"})}t(z),o($,z)}),t(c),o(u,c)},$$slots:{default:!0}})},$$slots:{default:!0}})}re(),I()}we(["click"]);const la='<svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>',ca='</title><path d="',da='"/></svg>',va={title:"Discord",slug:"discord",get svg(){return la+"Discord"+ca+this.path+da},path:"M20.317 4.3698a19.7913 19.7913 0 00-4.8851-1.5152.0741.0741 0 00-.0785.0371c-.211.3753-.4447.8648-.6083 1.2495-1.8447-.2762-3.68-.2762-5.4868 0-.1636-.3933-.4058-.8742-.6177-1.2495a.077.077 0 00-.0785-.037 19.7363 19.7363 0 00-4.8852 1.515.0699.0699 0 00-.0321.0277C.5334 9.0458-.319 13.5799.0992 18.0578a.0824.0824 0 00.0312.0561c2.0528 1.5076 4.0413 2.4228 5.9929 3.0294a.0777.0777 0 00.0842-.0276c.4616-.6304.8731-1.2952 1.226-1.9942a.076.076 0 00-.0416-.1057c-.6528-.2476-1.2743-.5495-1.8722-.8923a.077.077 0 01-.0076-.1277c.1258-.0943.2517-.1923.3718-.2914a.0743.0743 0 01.0776-.0105c3.9278 1.7933 8.18 1.7933 12.0614 0a.0739.0739 0 01.0785.0095c.1202.099.246.1981.3728.2924a.077.077 0 01-.0066.1276 12.2986 12.2986 0 01-1.873.8914.0766.0766 0 00-.0407.1067c.3604.698.7719 1.3628 1.225 1.9932a.076.076 0 00.0842.0286c1.961-.6067 3.9495-1.5219 6.0023-3.0294a.077.077 0 00.0313-.0552c.5004-5.177-.8382-9.6739-3.5485-13.6604a.061.061 0 00-.0312-.0286zM8.02 15.3312c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9555-2.4189 2.157-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.9555 2.4189-2.1569 2.4189zm7.9748 0c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9554-2.4189 2.1569-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.946 2.4189-2.1568 2.4189Z",source:"https://discord.com/branding",hex:"5865F2",guidelines:"https://discord.com/branding"},ge=(U,e=Ye,i=Ye,p=Ye)=>{var P=ua(),I=r(P),h=r(I);Z(h,{get icon(){return i()},size:"1.5em",class:"inline-block"});var l=s(h,2),b=r(l,!0);t(l),t(I),t(P),C(()=>{be(I,"href",e()),k(b,p())}),o(U,P)};var ua=R('<div><a target="_blank" rel="noreferrer"><!> <p class="font-medium text-primary text-sm underline inline-block"> </p></a></div>'),ma=R('<p class="mt-5"> </p> <p class="text-sm mt-1"> </p> <div class="flex flex-col gap-2 mt-5"><!> <!> <!> <!></div>',1),fa=R('<p> </p> <div class="flex flex-col gap-2 mt-5"><!> <!> <!> <!></div> <!>',1);function ga(U,e){te(e,!0);const i=()=>G(se,"$t",p),[p,P]=ie();{let I=_(()=>i()("support_and_feedback"));Ve(U,{get title(){return a(I)},get onClose(){return e.onClose},size:"small",children:(h,l)=>{qe(h,{children:(b,j)=>{var v=fa(),u=X(v),x=r(u,!0);t(u);var c=s(u,2),$=r(c);{let m=_(()=>i()("documentation"));ge($,()=>`https://docs.${e.info.version}.archive.immich.app/overview/introduction`,()=>Ce,()=>a(m))}var S=s($,2);{let m=_(()=>i()("source"));ge(S,()=>"https://github.com/immich-app/immich/",()=>qt,()=>a(m))}var z=s(S,2);{let m=_(()=>i()("discord"));ge(z,()=>"https://discord.immich.app",()=>va,()=>a(m))}var A=s(z,2);{let m=_(()=>i()("bugs_and_feature_requests"));ge(A,()=>"https://github.com/immich-app/immich/issues/new/choose",()=>at,()=>a(m))}t(c);var E=s(c,2);{var F=m=>{var y=ma(),f=X(y),D=r(f,!0);t(f);var w=s(f,2),L=r(w,!0);t(w);var N=s(w,2),d=r(N);{var g=V=>{{let ee=_(()=>i()("documentation"));ge(V,()=>e.info.thirdPartyDocumentationUrl,()=>Ce,()=>a(ee))}};H(d,V=>{e.info.thirdPartyDocumentationUrl&&V(g)})}var T=s(d,2);{var M=V=>{{let ee=_(()=>i()("source"));ge(V,()=>e.info.thirdPartySourceUrl,()=>Gt,()=>a(ee))}};H(T,V=>{e.info.thirdPartySourceUrl&&V(M)})}var n=s(T,2);{var O=V=>{{let ee=_(()=>i()("support"));ge(V,()=>e.info.thirdPartySupportUrl,()=>Kt,()=>a(ee))}};H(n,V=>{e.info.thirdPartySupportUrl&&V(O)})}var q=s(n,2);{var Y=V=>{{let ee=_(()=>i()("bugs_and_feature_requests"));ge(V,()=>e.info.thirdPartyBugFeatureUrl,()=>at,()=>a(ee))}};H(q,V=>{e.info.thirdPartyBugFeatureUrl&&V(Y)})}t(N),C((V,ee)=>{k(D,V),k(L,ee)},[()=>i()("third_party_resources"),()=>i()("support_third_party_description")]),o(m,y)};H(E,m=>{(e.info.thirdPartyBugFeatureUrl||e.info.thirdPartySourceUrl||e.info.thirdPartyDocumentationUrl||e.info.thirdPartySupportUrl)&&m(F)})}C(m=>k(x,m),[()=>i()("official_immich_resources")]),o(b,v)},$$slots:{default:!0}})},$$slots:{default:!0}})}re(),P()}var _a=R('<div class="flex place-content-center place-items-center text-center gap-2 px-2"><!> </div>'),pa=R('<div class="flex place-content-center place-items-center text-center gap-2 px-2"><!> </div>'),ha=R('<div id="account-info-panel" class="absolute z-1 end-6 top-19 w-[min(360px,100vw-50px)] rounded-3xl bg-gray-200 shadow-lg dark:border dark:border-immich-dark-gray dark:bg-immich-dark-gray"><div class="mx-4 mt-4 flex flex-col items-center justify-center gap-4 rounded-t-3xl bg-white p-4 dark:bg-immich-dark-primary/10"><div class="relative"><!> <div class="absolute bottom-0 end-0 rounded-full w-6 h-6"><!></div></div> <div><p class="text-center text-lg font-medium text-primary"> </p> <p class="text-sm text-gray-500 dark:text-immich-dark-fg"> </p></div> <div class="flex flex-col gap-1"><!> <!></div></div> <div class="mb-4 flex flex-col"><!> <button type="button" class="text-center mt-4 underline text-xs text-primary"> </button></div></div>');function ba(U,e){te(e,!0);const i=()=>G(ze,"$user",P),p=()=>G(se,"$t",P),[P,I]=ie();let h=de(e,"onClose",3,()=>{}),l=ae(void 0);He(async()=>{W(l,le.aboutInfo??await $t(),!0)});var b=ha(),j=r(b),v=r(j),u=r(v);Ze(u,{get user(){return i()},size:"xl"});var x=s(u,2),c=r(x);{let d=_(()=>p()("edit_avatar"));ke(c,{color:"primary",get icon(){return Yt},get"aria-label"(){return a(d)},size:"tiny",shape:"round",onclick:async()=>{h()(),await Fe.show(na)}})}t(x),t(v);var $=s(v,2),S=r($),z=r(S,!0);t(S);var A=s(S,2),E=r(A,!0);t(A),t($);var F=s($,2),m=r(F);{let d=_(()=>Oe.userSettings());oe(m,{get href(){return a(d)},get onclick(){return h()},size:"small",color:"secondary",variant:"ghost",shape:"round",class:"border dark:border-immich-dark-gray dark:bg-gray-500 dark:hover:bg-immich-dark-primary/50 hover:bg-immich-primary/10 dark:text-white",children:(g,T)=>{var M=_a(),n=r(M);Z(n,{get icon(){return Qt},size:"18","aria-hidden":!0});var O=s(n);t(M),C(q=>k(O,` ${q??""}`),[()=>p()("account_settings")]),o(g,M)},$$slots:{default:!0}})}var y=s(m,2);{var f=d=>{{let g=_(()=>Oe.systemSettings()),T=_(()=>Xe.url.pathname.includes("/admin")?"page":void 0);oe(d,{get href(){return a(g)},get onclick(){return h()},shape:"round",variant:"ghost",size:"small",color:"secondary",get"aria-current"(){return a(T)},class:"border dark:border-immich-dark-gray dark:bg-gray-500 dark:hover:bg-immich-dark-primary/50 hover:bg-immich-primary/10 dark:text-white",children:(M,n)=>{var O=pa(),q=r(O);Z(q,{get icon(){return Xt},size:"18","aria-hidden":!0});var Y=s(q);t(O),C(V=>k(Y,` ${V??""}`),[()=>p()("administration")]),o(M,O)},$$slots:{default:!0}})}};H(y,d=>{i().isAdmin&&d(f)})}t(F),t(j);var D=s(j,2),w=r(D);oe(w,{class:"m-1 mx-4 rounded-none rounded-b-3xl bg-white p-3 dark:bg-immich-dark-primary/10",get onclick(){return e.onLogout},get leadingIcon(){return Jt},variant:"ghost",color:"secondary",children:(d,g)=>{J();var T=K();C(M=>k(T,M),[()=>p()("sign_out")]),o(d,T)},$$slots:{default:!0}});var L=s(w,2);L.__click=async()=>{h()(),a(l)&&await Fe.show(ga,{info:a(l)})};var N=r(L,!0);t(L),t(D),t(b),Ne(b,d=>kt?.(d)),C(d=>{k(z,i().name),k(E,i().email),k(N,d)},[()=>p()("support_and_feedback")]),Me(1,b,()=>Le,()=>({duration:100})),Me(2,b,()=>Le,()=>({duration:100})),o(U,b),re(),I()}we(["click"]);const xa="top-menu-button";var ya=R("<!> <!>",1),ka=R('<div class="pointer-events-none absolute border top-0 right-1 flex h-5 w-5 items-center justify-center rounded-full bg-primary text-[10px] font-bold text-light"> </div>'),$a=R('<nav id="dashboard-navbar" class="max-md:h-(--navbar-height-md) h-(--navbar-height) w-dvw text-sm"><!> <div><div class="flex flex-row gap-1 mx-4 items-center"><!> <a data-sveltekit-preload-data="hover"><!></a></div> <div class="flex justify-between gap-4 lg:gap-8 pe-6"><div class="hidden w-full max-w-5xl flex-1 tall:ps-0 sm:block"><!></div> <section class="flex place-items-center justify-end gap-1 md:gap-2 w-full sm:w-auto"><!> <!> <!> <div><div class="relative"><!> <!></div> <!></div> <!> <div><button type="button" class="flex ps-2"><!></button> <!></div></section></div></div></nav>');function Yi(U,e){te(e,!0);const i=()=>G(se,"$t",P),p=()=>G(ze,"$user",P),[P,I]=ie();let h=de(e,"noBorder",3,!1),l=ae(!1),b=ae(!1),j=ae(0);const v=_(()=>$e.notifications.length>0);He(async()=>{try{await $e.refresh()}catch(B){console.error("Failed to load notifications on mount",B)}});const u=_(()=>gr(i())),x=_(()=>a(u).Cast);var c=$a(),$=r(c);{let B=_(()=>i()("skip_to_content"));ia($,{get text(){return a(B)}})}var S=s($,2),z=r(S),A=r(z);{let B=_(()=>i()("main_menu"));ke(A,{id:xa,shape:"round",color:"secondary",variant:"ghost",size:"medium",get"aria-label"(){return a(B)},get icon(){return er},onclick:()=>{ct.toggle()},onmousedown:Q=>{ct.isOpen&&Q.stopPropagation()},class:"sidebar:hidden"})}var E=s(A,2),F=r(E);{let B=_(()=>Cr.isFullSidebar?"inline":"icon");je(F,{get variant(){return a(B)},class:"max-md:h-12"})}t(E),t(z);var m=s(z,2),y=r(m),f=r(y);{var D=B=>{Ur(B,{grayTheme:!0})};H(f,B=>{lt.value.search&&B(D)})}t(y);var w=s(y,2),L=r(w);{var N=B=>{{let Q=_(()=>Oe.search()),me=_(()=>i()("go_to_search"));ke(B,{color:"secondary",shape:"round",variant:"ghost",size:"medium",get icon(){return tr},get href(){return a(Q)},id:"search-button",class:"sm:hidden",get"aria-label"(){return a(me)}})}};H(L,B=>{lt.value.search&&B(N)})}var d=s(L,2);{var g=B=>{var Q=ya(),me=X(Q);oe(me,{get leadingIcon(){return it},get onclick(){return e.onUploadClick},class:"hidden lg:flex",variant:"ghost",size:"medium",color:"secondary",children:(Ke,et)=>{J();var tt=K();C(Ct=>k(tt,Ct),[()=>i()("upload")]),o(Ke,tt)},$$slots:{default:!0}});var Bt=s(me,2);{let Ke=_(()=>i()("upload")),et=_(()=>i()("upload"));ke(Bt,{color:"secondary",shape:"round",variant:"ghost",size:"medium",get onclick(){return e.onUploadClick},get title(){return a(Ke)},get"aria-label"(){return a(et)},get icon(){return it},class:"lg:hidden"})}o(B,Q)},T=_(()=>!Xe.url.pathname.includes("/admin")&&e.onUploadClick);H(d,B=>{a(T)&&B(g)})}var M=s(d,2);Mr(M,{});var n=s(M,2),O=r(n),q=r(O);{let B=_(()=>a(v)?"primary":"secondary"),Q=_(()=>a(v)?rr:ht),me=_(()=>i()("notifications"));ke(q,{shape:"round",get color(){return a(B)},variant:"ghost",size:"medium",get icon(){return a(Q)},onclick:()=>W(b,!a(b)),get"aria-label"(){return a(me)}})}var Y=s(q,2);{var V=B=>{var Q=ka(),me=r(Q,!0);t(Q),C(()=>k(me,$e.notifications.length)),o(B,Q)};H(Y,B=>{a(v)&&B(V)})}t(O);var ee=s(O,2);{var ve=B=>{ra(B,{})};H(ee,B=>{a(b)&&B(ve)})}t(n),Ne(n,(B,Q)=>ot?.(B,Q),()=>({onOutclick:()=>W(b,!1),onEscape:()=>W(b,!1)}));var xe=s(n,2);fr(xe,{get action(){return a(x)}});var Pe=s(xe,2),ue=r(Pe);ue.__click=()=>W(l,!a(l));var Ge=r(ue);Zt(Ge,p,B=>{Ze(B,{get user(){return p()},size:"md",noTitle:!0,interactive:!0})}),t(ue);var ne=s(ue,2);{var Ie=B=>{ba(B,{onLogout:()=>Ee.logout(),onClose:()=>W(l,!1)})};H(ne,B=>{a(l)&&B(Ie)})}t(Pe),Ne(Pe,(B,Q)=>ot?.(B,Q),()=>({onOutclick:()=>W(l,!1),onEscape:()=>W(l,!1)})),t(w),t(m),t(S),t(c),C(B=>{Ae(S,1,`grid h-full grid-cols-[--spacing(32)_auto] items-center py-2 sidebar:grid-cols-[--spacing(64)_auto] ${h()?"":"border-b"}`),be(E,"href",B),be(ue,"title",`${p().name} (${p().email})`)},[()=>Oe.photos()]),mr("innerWidth",B=>W(j,B,!0)),o(U,c),re(),I()}we(["click"]);const dt=()=>{const U=Lt(Ue);if(!U)return!0;const{purchase:e}=U,i=Te.now(),p=Te.fromISO(e.hideBuyButtonUntil);return Number(i.diff(p,"days").days.toFixed(0))>0},wa=async U=>{const e=await wt({userPreferencesUpdateDto:{purchase:{showSupportBadge:U}}});Ue.set(e)};var Pa=R('<div class="m-auto w-3/4 text-center flex flex-col place-content-center place-items-center my-6"><!> <p class="text-4xl mt-8 font-bold"> </p> <p class="text-lg mt-6"> </p> <div class="mb-4 w-full mt-6 border rounded-xl p-4 bg-gray-50 dark:bg-gray-900 dark:border-gray-600"><!></div> <div class="mt-6 w-full"><!></div></div>');function Ia(U,e){te(e,!0);const i=()=>G(se,"$t",P),p=()=>G(Ue,"$preferences",P),[P,I]=ie();var h=Pa(),l=r(h);Z(l,{get icon(){return ar},class:"text-primary",size:"96"});var b=s(l,2),j=r(b,!0);t(b);var v=s(b,2),u=r(v,!0);t(v);var x=s(v,2),c=r(x);{let z=_(()=>i()("show_supporter_badge")),A=_(()=>i()("show_supporter_badge_description"));Tr(c,{get title(){return a(z)},get subtitle(){return a(A)},get onToggle(){return wa},get checked(){return p().purchase.showSupportBadge},set checked(E){ur(Ue,rt(p).purchase.showSupportBadge=E,rt(p))}})}t(x);var $=s(x,2),S=r($);oe(S,{fullWidth:!0,shape:"round",get onclick(){return e.onDone},children:(z,A)=>{J();var E=K();C(F=>k(E,F),[()=>i()("ok")]),o(z,E)},$$slots:{default:!0}}),t($),t(h),C((z,A)=>{k(j,z),k(u,A)},[()=>i()("purchase_activated_title"),()=>i()("purchase_activated_subtitle")]),o(U,h),re(),I()}const Sa="https://buy.immich.app",za="https://pay.futo.org",Ua=async(U,e)=>{const p=(await kr())?.isAdmin&&U.search("IMSV")!==-1,P={licenseKey:U,activationKey:e};return p?br({licenseKeyDto:P}):xr({licenseKeyDto:P})},Aa=async U=>{const e=await fetch(new URL(`/api/v1/activate/${U}`,za).href);if(!e.ok)throw new Error("Failed to fetch activation key");return e.text()},At=U=>{const e=new URL("/",Sa);return e.searchParams.append("productId",U),e.searchParams.append("instanceUrl",Rr.value.externalDomain||globalThis.origin),e.href};var Ba=R('<div class="border border-gray-300 dark:border-gray-800 w-[min(375px,100%)] p-8 rounded-3xl bg-gray-100 dark:bg-gray-900"><div class="text-primary"><!> <p class="font-semibold text-lg mt-1"> </p></div> <div class="mt-4 dark:text-immich-gray"><p class="text-6xl font-bold">$25</p> <p> </p></div> <div class="flex flex-col justify-between h-50 dark:text-immich-gray"><div class="mt-6 flex flex-col gap-1"><div class="grid grid-cols-[36px_auto]"><!> <p class="self-center"> </p></div> <div class="grid grid-cols-[36px_auto]"><!> <p class="self-center"> </p></div> <div class="grid grid-cols-[36px_auto]"><!> <p class="self-center"> </p></div></div> <!></div></div>');function Ca(U,e){te(e,!1);const i=()=>G(se,"$t",p),[p,P]=ie();Ut();var I=Ba(),h=r(I),l=r(h);Z(l,{get icon(){return ir},size:"56"});var b=s(l,2),j=r(b,!0);t(b),t(h);var v=s(h,2),u=s(r(v),2),x=r(u,!0);t(u),t(v);var c=s(v,2),$=r(c),S=r($),z=r(S);Z(z,{get icon(){return Se},size:"24",class:"text-green-500 self-center"});var A=s(z,2),E=r(A,!0);t(A),t(S);var F=s(S,2),m=r(F);Z(m,{get icon(){return Se},size:"24",class:"text-green-500 self-center"});var y=s(m,2),f=r(y,!0);t(y),t(F);var D=s(F,2),w=r(D);Z(w,{get icon(){return Se},size:"24",class:"text-green-500 self-center"});var L=s(w,2),N=r(L,!0);t(L),t(D),t($);var d=s($,2);{let g=vt(()=>At(St.Client));oe(d,{shape:"round",get href(){return a(g)},fullWidth:!0,children:(T,M)=>{J();var n=K();C(O=>k(n,O),[()=>i()("purchase_button_select")]),o(T,n)},$$slots:{default:!0}})}t(c),t(I),C((g,T,M,n,O)=>{k(j,g),k(x,T),k(E,M),k(f,n),k(N,O)},[()=>i()("purchase_individual_title"),()=>i()("purchase_per_user"),()=>i()("purchase_individual_description_1"),()=>i()("purchase_lifetime_description"),()=>i()("purchase_individual_description_2")]),o(U,I),re(),P()}var Ma=R('<div class="border border-gray-300 dark:border-gray-800 w-[min(375px,100%)] p-8 rounded-3xl bg-gray-100 dark:bg-gray-900"><div class="text-primary"><!> <p class="font-semibold text-lg mt-1"> </p></div> <div class="mt-4 dark:text-immich-gray"><p class="text-6xl font-bold">$100</p> <p> </p></div> <div class="flex flex-col justify-between h-50 dark:text-immich-gray"><div class="mt-6 flex flex-col gap-1"><div class="grid grid-cols-[36px_auto]"><!> <p class="self-center"> </p></div> <div class="grid grid-cols-[36px_auto]"><!> <p class="self-center"> </p></div> <div class="grid grid-cols-[36px_auto]"><!> <p class="self-center"> </p></div></div> <!></div></div>');function La(U,e){te(e,!1);const i=()=>G(se,"$t",p),[p,P]=ie();Ut();var I=Ma(),h=r(I),l=r(h);Z(l,{get icon(){return sr},size:"56"});var b=s(l,2),j=r(b,!0);t(b),t(h);var v=s(h,2),u=s(r(v),2),x=r(u,!0);t(u),t(v);var c=s(v,2),$=r(c),S=r($),z=r(S);Z(z,{get icon(){return Se},size:"24",class:"text-green-500 self-center"});var A=s(z,2),E=r(A,!0);t(A),t(S);var F=s(S,2),m=r(F);Z(m,{get icon(){return Se},size:"24",class:"text-green-500 self-center"});var y=s(m,2),f=r(y,!0);t(y),t(F);var D=s(F,2),w=r(D);Z(w,{get icon(){return Se},size:"24",class:"text-green-500 self-center"});var L=s(w,2),N=r(L,!0);t(L),t(D),t($);var d=s($,2);{let g=vt(()=>At(St.Server));oe(d,{shape:"round",get href(){return a(g)},fullWidth:!0,children:(T,M)=>{J();var n=K();C(O=>k(n,O),[()=>i()("purchase_button_select")]),o(T,n)},$$slots:{default:!0}})}t(c),t(I),C((g,T,M,n,O)=>{k(j,g),k(x,T),k(E,M),k(f,n),k(N,O)},[()=>i()("purchase_server_title"),()=>i()("purchase_per_server"),()=>i()("purchase_server_description_1"),()=>i()("purchase_lifetime_description"),()=>i()("purchase_server_description_2")]),o(U,I),re(),P()}var Ta=R('<div class="mt-2"><p> </p> <br/> <p> </p> <div></div></div>'),Oa=R('<section><!> <!> <div class="flex flex-col sm:flex-row gap-6 mt-4 justify-between"><!> <!></div> <div class="mt-6"><p class="dark:text-immich-gray"> </p> <form class="mt-2 flex gap-2"><input class="immich-form-input w-full" id="purchaseKey" type="text" required="" placeholder="IMCL-0KEY-0CAN-00BE-FOUD-FROM-YOUR-EMAIL-INBX"/> <!></form></div></section>');function Ra(U,e){te(e,!0);const i=()=>G(se,"$t",p),[p,P]=ie();let I=de(e,"showTitle",3,!0),h=de(e,"showMessage",3,!0),l=ae(""),b=ae(!1);const j=async()=>{try{W(l,a(l).trim(),!0),W(b,!0);const w=await Aa(a(l));await Ua(a(l),w),e.onActivate(),Ee.isPurchased=!0}catch(w){Be(w,i()("purchase_failed_activation"))}finally{W(b,!1)}};var v=Oa(),u=r(v);{var x=w=>{wr(w,{color:"primary",tag:"h1",class:"text-4xl font-bold tracking-wider",children:(L,N)=>{J();var d=K();C(g=>k(d,g),[()=>i()("purchase_option_title")]),o(L,d)},$$slots:{default:!0}})};H(u,w=>{I()&&w(x)})}var c=s(u,2);{var $=w=>{var L=Ta(),N=r(L),d=r(N,!0);t(N);var g=s(N,4),T=r(g,!0);t(g),J(2),t(L),C((M,n)=>{k(d,M),k(T,n)},[()=>i()("purchase_panel_info_1"),()=>i()("purchase_panel_info_2")]),o(w,L)};H(c,w=>{h()&&w($)})}var S=s(c,2),z=r(S);La(z,{});var A=s(z,2);Ca(A,{}),t(S);var E=s(S,2),F=r(E),m=r(F,!0);t(F);var y=s(F,2),f=r(y);or(f);var D=s(f,2);oe(D,{type:"submit",children:(w,L)=>{var N=he(),d=X(N);{var g=M=>{bt(M,{})},T=M=>{var n=K();C(O=>k(n,O),[()=>i()("purchase_button_activate")]),o(M,n)};H(d,M=>{a(b)?M(g):M(T,!1)})}o(w,N)},$$slots:{default:!0}}),t(y),t(E),t(v),C(w=>{k(m,w),f.disabled=a(b)},[()=>i()("purchase_input_suggestion")]),ye("submit",y,j),Or(f,()=>a(l),w=>W(l,w)),o(U,v),re(),P()}function Da(U,e){let i=ae(!1);Ve(U,{title:" ",get onClose(){return e.onClose},size:"large",children:(p,P)=>{qe(p,{children:(I,h)=>{var l=he(),b=X(l);{var j=u=>{Ia(u,{get onDone(){return e.onClose}})},v=u=>{Ra(u,{onActivate:()=>{W(i,!0)},showMessage:!1})};H(b,u=>{a(i)?u(j):u(v,!1)})}o(I,l)},$$slots:{default:!0}})},$$slots:{default:!0}})}var ja=R('<button class="w-full mt-2" type="button"><!></button>'),Na=R('<button type="button" class="p-2 flex justify-between place-items-center place-content-center border border-immich-primary/20 dark:border-immich-dark-primary/10 mt-2 rounded-lg shadow-md dark:bg-immich-dark-primary/10 min-w-52 w-full"><div class="flex justify-between w-full place-items-center place-content-center"><div class="flex place-items-center place-content-center gap-1"><!> <p class="flex text-primary font-medium"> </p></div> <div><!></div></div></button>'),Ea=R('<dialog open="" class="hidden sidebar:block w-125 absolute bottom-19 start-64 bg-gray-50 dark:border-gray-800 border border-gray-200 dark:bg-immich-dark-gray dark:text-white text-black rounded-3xl shadow-2xl px-8 py-6 svelte-4dkbrh"><div class="flex justify-between place-items-center"><div class="h-10 w-10"><!></div> <!></div> <h1 class="text-lg font-medium my-3 text-primary"> </h1> <div class="text-gray-800 dark:text-white my-4"><p> </p> <br/> <p> </p></div> <!> <div class="mt-3 flex gap-4"><!> <!></div></dialog>'),Fa=R('<div class="license-status ps-4 text-sm"><!></div> <!>',1);function Ha(U,e){te(e,!0);const i=()=>G(se,"$t",P),p=()=>G(Ue,"$preferences",P),[P,I]=ie();let h=ae(!1),l=ae(!1),b=ae(!1),j=ae(ut(dt()));const v=async()=>{await Fe.show(Da),W(h,!1)},u=()=>{W(h,!0),W(b,!0)},x=async m=>{const y=new Sr;m?y.setFullYear(2124):y.setDate(y.getDate()+30);try{const f=await wt({userPreferencesUpdateDto:{purchase:{hideBuyButtonUntil:y.toISOString()}}});Ue.set(f),W(j,dt(),!0),W(h,!1)}catch(f){Be(f,i()("errors.error_hiding_buy_button"))}};mt(()=>{a(h)&&!a(l)&&!a(b)&&setTimeout(()=>{!a(l)&&!a(b)&&W(h,!1)},300)});var c=Fa(),$=X(c),S=r($);{var z=m=>{var y=ja();y.__click=()=>yt(Oe.userSettings({isOpen:Lr.PURCHASE_SETTINGS}));var f=r(y);Gr(f,{size:"small",effect:"always"}),t(y),o(m,y)},A=m=>{var y=Na();y.__click=v,y.__mouseover=u;var f=r(y),D=r(f),w=r(D);je(w,{variant:"icon",size:"tiny"});var L=s(w,2),N=r(L,!0);t(L),t(D);var d=s(D,2),g=r(d);Z(g,{get icon(){return Ce},class:"hidden sidebar:flex text-primary font-medium",size:"18"}),t(d),t(f),t(y),C(T=>k(N,T),[()=>i()("purchase_button_buy_immich")]),ye("mouseleave",y,()=>W(b,!1)),ye("focus",y,u),ye("blur",y,()=>W(b,!1)),o(m,y)},E=_(()=>!Ee.isPurchased&&a(j)&&$r()>14);H(S,m=>{Ee.isPurchased&&p().purchase.showSupportBadge?m(z):a(E)&&m(A,1)})}t($);var F=s($,2);Br(F,{target:"body",children:(m,y)=>{var f=he(),D=X(f);{var w=L=>{var N=Ea();N.__mouseover=()=>W(l,!0);var d=r(N),g=r(d),T=r(g);je(T,{variant:"icon",size:"small"}),t(g);var M=s(g,2);{let ne=_(()=>i()("close"));ke(M,{shape:"round",color:"secondary",variant:"ghost",get icon(){return nr},onclick:()=>{W(h,!1)},get"aria-label"(){return a(ne)},size:"medium",class:"text-immich-dark-gray/85 dark:text-immich-gray"})}t(d);var n=s(d,2),O=r(n,!0);t(n);var q=s(n,2),Y=r(q),V=r(Y,!0);t(Y);var ee=s(Y,4),ve=r(ee,!0);t(ee),t(q);var xe=s(q,2);oe(xe,{shape:"round",class:"mt-2",fullWidth:!0,onclick:v,children:(ne,Ie)=>{J();var B=K();C(Q=>k(B,Q),[()=>i()("purchase_button_buy_immich")]),o(ne,B)},$$slots:{default:!0}});var Pe=s(xe,2),ue=r(Pe);oe(ue,{shape:"round",size:"small",fullWidth:!0,color:"secondary",variant:"ghost",onclick:()=>x(!0),children:(ne,Ie)=>{J();var B=K();C(Q=>k(B,Q),[()=>i()("purchase_button_never_show_again")]),o(ne,B)},$$slots:{default:!0}});var Ge=s(ue,2);oe(Ge,{shape:"round",size:"small",fullWidth:!0,color:"secondary",variant:"ghost",onclick:()=>x(!1),children:(ne,Ie)=>{J();var B=K();C(Q=>k(B,Q),[()=>i()("purchase_button_reminder")]),o(ne,B)},$$slots:{default:!0}}),t(Pe),t(N),C((ne,Ie,B)=>{k(O,ne),k(V,Ie),k(ve,B)},[()=>i()("purchase_panel_title"),()=>i()("purchase_panel_info_1"),()=>i()("purchase_panel_info_2")]),ye("mouseleave",N,()=>W(l,!1)),ye("focus",N,()=>W(l,!0)),ye("blur",N,()=>W(l,!1)),Me(3,N,()=>Le,()=>({duration:150})),o(L,N)};H(D,L=>{a(h)&&L(w)})}o(m,f)},$$slots:{default:!0}}),o(U,c),re(),I()}we(["click","mouseover"]);class Wa{#e=ae();get value(){return a(this.#e)}set value(e){W(this.#e,e,!0)}constructor(){Dr.on({ReleaseEvent:e=>this.value=e})}}const Va=new Wa;var qa=R("<div><!> <!></div>");function ce(U,e){var i=qa(),p=r(i);zt(p,{size:"small",color:"primary",get for(){return e.id},children:(I,h)=>{J();var l=K();C(()=>k(l,e.title)),o(I,l)},$$slots:{default:!0}});var P=s(p,2);pe(P,{size:"small",color:"muted",get id(){return e.id},children:(I,h)=>{var l=he(),b=X(l);{var j=u=>{xt(u,{get href(){return e.versionHref},children:(x,c)=>{J();var $=K();C(()=>k($,e.version)),o(x,$)},$$slots:{default:!0}})},v=u=>{var x=K();C(()=>k(x,e.version)),o(u,x)};H(b,u=>{e.versionHref?u(j):u(v,!1)})}o(I,l)},$$slots:{default:!0}}),t(i),C(()=>Ae(i,1,pt(e.class))),o(U,i)}var Ga=R('<li><span class="immich-form-label pb-2 text-xs" id="version-history"> </span></li>'),Ka=R('<div class="flex flex-col sm:grid sm:grid-cols-2 gap-4"><!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <div class="col-span-full"><!> <ul id="version-history" class="list-none"></ul></div></div>');function Ya(U,e){te(e,!0);const i=()=>G(se,"$t",P),p=()=>G(It,"$locale",P),[P,I]=ie();{let h=_(()=>i()("about"));Ve(U,{get title(){return a(h)},get onClose(){return e.onClose},children:(l,b)=>{qe(l,{children:(j,v)=>{var u=Ka(),x=r(u);{var c=n=>{{let O=_(()=>i()("main_branch_warning"));jr(n,{color:"warning",get title(){return a(O)},class:"col-span-full",size:"small"})}};H(x,n=>{e.info.sourceRef==="main"&&e.info.repository==="immich-app/immich"&&n(c)})}var $=s(x,2);ce($,{id:"immich",title:"Immich",get version(){return e.info.version},get versionHref(){return e.info.versionUrl}});var S=s($,2);ce(S,{id:"exif",title:"ExifTool",get version(){return e.info.exiftool}});var z=s(S,2);ce(z,{id:"nodejs",title:"Node.js",get version(){return e.info.nodejs}});var A=s(z,2);ce(A,{id:"libvips",title:"Libvips",get version(){return e.info.libvips}});var E=s(A,2);{let n=_(()=>(e.info.imagemagick?.length||0)>10?"col-span-2":"");ce(E,{id:"imagemagick",title:"ImageMagick",get version(){return e.info.imagemagick},get class(){return a(n)}})}var F=s(E,2);{let n=_(()=>(e.info.ffmpeg?.length||0)>10?"col-span-2":"");ce(F,{id:"ffmpeg",title:"FFmpeg",get version(){return e.info.ffmpeg},get class(){return a(n)}})}var m=s(F,2);{var y=n=>{{let O=_(()=>i()("repository"));ce(n,{id:"repository",get title(){return a(O)},get version(){return e.info.repository},get versionHref(){return e.info.repositoryUrl}})}};H(m,n=>{e.info.repository&&e.info.repositoryUrl&&n(y)})}var f=s(m,2);{var D=n=>{{let O=_(()=>i()("source")),q=_(()=>e.info.sourceRef),Y=_(()=>e.info.sourceCommit.slice(0,9));ce(n,{id:"source",get title(){return a(O)},get version(){return`${a(q)??""}@${a(Y)??""}`},get versionHref(){return e.info.sourceUrl}})}};H(f,n=>{e.info.sourceRef&&e.info.sourceCommit&&e.info.sourceUrl&&n(D)})}var w=s(f,2);{var L=n=>{{let O=_(()=>i()("build"));ce(n,{id:"build",get title(){return a(O)},get version(){return e.info.build},get versionHref(){return e.info.buildUrl}})}};H(w,n=>{e.info.build&&e.info.buildUrl&&n(L)})}var N=s(w,2);{var d=n=>{{let O=_(()=>i()("build_image"));ce(n,{id:"build-image",get title(){return a(O)},get version(){return e.info.buildImage},get versionHref(){return e.info.buildImageUrl}})}};H(N,n=>{e.info.buildImage&&e.info.buildImage&&n(d)})}var g=s(N,2),T=r(g);zt(T,{size:"small",color:"primary",for:"version-history",children:(n,O)=>{J();var q=K();C(Y=>k(q,Y),[()=>i()("version_history")]),o(n,q)},$$slots:{default:!0}});var M=s(T,2);We(M,21,()=>e.versions.slice(0,5),n=>n.id,(n,O)=>{const q=_(()=>Te.fromISO(a(O).createdAt));var Y=Ga(),V=r(Y),ee=r(V,!0);t(V),t(Y),C((ve,xe)=>{be(V,"title",ve),k(ee,xe)},[()=>a(q).toLocaleString(Te.DATETIME_SHORT_WITH_SECONDS,{locale:p()}),()=>i()("version_history_item",{values:{version:a(O).version,date:a(q).toLocaleString({month:"short",day:"numeric",year:"numeric"},{locale:p()})}})]),o(n,Y)}),t(M),t(g),t(u),o(j,u)},$$slots:{default:!0}})},$$slots:{default:!0}})}re(),I()}var Qa=R('<div class="flex gap-2 place-items-center place-content-center"><div class="w-1.75 h-1.75 bg-green-500 rounded-full"></div> <p class="dark:text-immich-gray"> </p></div>'),Ja=R('<div class="flex gap-2 place-items-center place-content-center"><div class="w-1.75 h-1.75 bg-red-500 rounded-full"></div> <p class="text-red-500"> </p></div>'),Xa=R("<!> ",1),Za=R('<button type="button" class="dark:text-immich-gray flex gap-1 place-items-center place-content-center"><!></button>'),ei=R('<p class="text-red-500"> </p>'),ti=R('<a target="_blank" rel="noopener noreferrer" class="mt-3 p-2.5 ms-4 rounded-lg text-sm min-w-52 border border-gray-200/50 dark:border-gray-700/50 bg-white/50 dark:bg-gray-800/50 hover:border-immich-primary/40 dark:hover:border-immich-dark-primary/40 hover:bg-immich-primary/5 dark:hover:bg-immich-dark-primary/5 transition-all duration-200 group block"><div class="flex items-center justify-between gap-2"><div class="flex items-center gap-2"><!> <!></div> <span class="text-[11px] text-gray-500 dark:text-gray-400 group-hover:text-immich-primary dark:group-hover:text-immich-dark-primary transition-colors opacity-70 group-hover:opacity-100"> </span></div></a>'),ri=R('<div class="text-sm flex md:flex ps-5 pe-1 place-items-center place-content-center justify-between min-w-52 overflow-hidden dark:text-immich-dark-fg"><!> <div class="flex justify-between justify-items-center"><!></div></div> <!>',1);function ai(U,e){te(e,!0);const i=()=>G(b,"$serverVersion",h),p=()=>G(ze,"$user",h),P=()=>G(j,"$connected",h),I=()=>G(se,"$t",h),[h,l]=ie(),{serverVersion:b,connected:j}=Pr;let v=ae(void 0),u=ae(ut([]));He(async()=>{if(le.aboutInfo&&le.versions&&i()){W(v,le.aboutInfo,!0),W(u,le.versions,!0);return}await Pt(),await(async d=>{var g=Tt(d,2);W(v,g[0],!0),W(u,g[1],!0)})(await Promise.all([$t(),yr()])),le.aboutInfo=a(v),le.versions=a(u)});let x=_(()=>a(v)?.sourceRef==="main"&&a(v).repository==="immich-app/immich"),c=_(()=>i()?`v${i().major}.${i().minor}.${i().patch}`:null);const $=d=>{if(!d||!d?.isAvailable||!p().isAdmin)return;const g=nt(d.releaseVersion);if(nt(d.serverVersion)!==g)return{availableVersion:g,releaseUrl:`https://github.com/immich-app/immich/releases/tag/${g}`}},S=_(()=>$(Va.value));var z=ri(),A=X(z),E=r(A);{var F=d=>{var g=Qa(),T=s(r(g),2),M=r(T,!0);t(T),t(g),C(n=>k(M,n),[()=>I()("server_online")]),o(d,g)},m=d=>{var g=Ja(),T=s(r(g),2),M=r(T,!0);t(T),t(g),C(n=>k(M,n),[()=>I()("server_offline")]),o(d,g)};H(E,d=>{P()?d(F):d(m,!1)})}var y=s(E,2),f=r(y);{var D=d=>{var g=Za();g.__click=()=>a(v)&&Fe.show(Ya,{versions:a(u),info:a(v)});var T=r(g);{var M=O=>{var q=Xa(),Y=X(q);Z(Y,{get icon(){return cr},size:"1.5em",color:"#ffcc4d"});var V=s(Y);C(()=>k(V,` ${a(v)?.sourceRef??""}`)),o(O,q)},n=O=>{var q=K();C(()=>k(q,a(c))),o(O,q)};H(T,O=>{a(x)?O(M):O(n,!1)})}t(g),o(d,g)},w=d=>{var g=ei(),T=r(g,!0);t(g),C(M=>k(T,M),[()=>I()("unknown")]),o(d,g)};H(f,d=>{P()&&a(c)?d(D):d(w,!1)})}t(y),t(A);var L=s(A,2);{var N=d=>{var g=ti(),T=r(g),M=r(T),n=r(M);Z(n,{get icon(){return lr},size:"16",class:"text-immich-primary dark:text-immich-dark-primary opacity-80"});var O=s(n,2);pe(O,{size:"tiny",fontWeight:"medium",class:"text-gray-700 dark:text-gray-300",children:(V,ee)=>{J();var ve=K();C(()=>k(ve,a(S).availableVersion)),o(V,ve)},$$slots:{default:!0}}),t(M);var q=s(M,2),Y=r(q);t(q),t(T),t(g),C(V=>{be(g,"href",a(S).releaseUrl),k(Y,`${V??""}!`)},[()=>I()("new_update")]),o(d,g)};H(L,d=>{a(S)&&d(N)})}o(U,z),re(),l()}we(["click"]);var ii=R('<p class="text-gray-500 dark:text-gray-300"> </p> <div class="mt-4 h-1.75 w-full rounded-full bg-gray-200 dark:bg-gray-700"><div></div></div>',1),si=R('<div class="mt-2"><!></div>'),oi=R('<div class="storage-status p-4 bg-gray-100 dark:bg-immich-dark-primary/10 ms-4 rounded-lg text-sm min-w-52"><p class="font-medium text-immich-dark-gray dark:text-white mb-2"> </p> <!></div>');function ni(U,e){te(e,!0);const i=()=>G(ze,"$user",I),p=()=>G(se,"$t",I),P=()=>G(It,"$locale",I),[I,h]=ie();let l=ae(""),b=_(()=>i()?.quotaSizeInBytes!==null),j=_(()=>(a(b)?i()?.quotaSizeInBytes:le.serverInfo?.diskSizeRaw)||0),v=_(()=>(a(b)?i()?.quotaUsageInBytes:le.serverInfo?.diskUseRaw)||0),u=_(()=>Math.min(Math.round(a(v)/a(j)*100),100));const x=()=>{W(l,c(),!0)},c=()=>a(u)>=95?"bg-red-500":a(u)>80?"bg-yellow-500":"bg-primary";mt(()=>{i()&&x()}),He(async()=>{le.serverInfo&&i()||await Pt()});var $=oi(),S=r($),z=r(S,!0);t(S);var A=s(S,2);{var E=m=>{var y=ii(),f=X(y),D=r(f,!0);t(f);var w=s(f,2),L=r(w);t(w),C(N=>{k(D,N),Ae(L,1,`h-1.75 rounded-full ${a(l)??""}`),dr(L,`width: ${a(u)??""}%`)},[()=>p()("storage_usage",{values:{used:Re(a(v),P()),available:Re(a(j),P())}})]),o(m,y)},F=m=>{var y=si(),f=r(y);bt(f,{}),t(y),o(m,y)};H(A,m=>{le.serverInfo?m(E):m(F,!1)})}t($),C((m,y)=>{be($,"title",m),k(z,y)},[()=>p()("storage_usage",{values:{used:Re(a(v),P(),3),available:Re(a(j),P(),3)}}),()=>p()("storage")]),o(U,$),re(),h()}var li=R('<div class="mt-auto"><!></div> <!> <div class="mb-6 mt-2"><!></div>',1);function Qi(U){var e=li(),i=X(e),p=r(i);ni(p,{}),t(i);var P=s(i,2);Ha(P,{});var I=s(P,2),h=r(I);ai(h,{}),t(I),o(U,e)}export{Qi as B,Wr as N,Ia as P,ia as S,Ua as a,Ra as b,Yi as c,Aa as g,xa as m,wa as s};
