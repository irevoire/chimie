import{g as v}from"./De1sTUmb.js";import{W as E}from"./BOqQhZBJ.js";function h(a,c){const u=document.activeElement,s=document.createElement("div");s.setAttribute("tabindex","0"),s.dataset.focusTrap="start";const t=document.createElement("div");t.setAttribute("tabindex","-1"),t.dataset.focusTrap="backup";const n=document.createElement("div");n.setAttribute("tabindex","0"),n.dataset.focusTrap="end",a.insertBefore(s,a.firstChild),a.insertBefore(t,s.nextSibling),a.append(n);const o=e=>({active:e?.active??!0}),l=async()=>{await E();const i=v(a,!1).find(r=>!Object.hasOwn(r.dataset,"focusTrap"));i?i.focus():(t.setAttribute("tabindex","-1"),t.focus())};o(c).active&&l();const f=()=>{const i=v(a).filter(r=>!Object.hasOwn(r.dataset,"focusTrap"));return[i.at(0),i.at(-1)]},d=()=>{if(o(c).active){const[,e]=f();e?e.focus():t.focus()}},b=()=>{if(o(c).active){const[e]=f();e&&e.focus()}},m=()=>{if(o(c).active){const[e]=f();e?e.focus():t.focus()}};return s.addEventListener("focus",d),t.addEventListener("focus",b),n.addEventListener("focus",m),{update(e){c=e,o(c).active&&l()},destroy(){s.removeEventListener("focus",d),t.removeEventListener("focus",b),n.removeEventListener("focus",m),s.remove(),t.remove(),n.remove(),u instanceof HTMLElement&&u.focus()}}}export{h as f};
